"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([["src_app_custom-elements_api_api-list_module_ts"],{4858:(I,u,n)=>{n.r(u),n.d(u,{ApiListModule:()=>N});var p=n(4666),h=n(8987),S=n(4466),m=n(6067),A=n(6562),f=n(635),t=n(2560),C=n(253),d=n(8951),v=n(9337),T=n(5733),L=n(4541);let g=(()=>{class s{constructor(e,i){this.http=e,this.logger=i,this.apiBase=T.Yp+"api/",this.apiListJsonDefault="api-list.json",this.firstTime=!0,this.onDestroy=new C.x,this.sectionsSubject=new m.t(1),this._sections=this.sectionsSubject.pipe((0,d.R)(this.onDestroy))}get sections(){return this.firstTime&&(this.firstTime=!1,this.fetchSections(),this._sections.subscribe(e=>this.logger.log(`ApiService got API ${e.length} section(s)`))),this._sections.pipe((0,v.b)(e=>{e.forEach(i=>{i.deprecated=!!i.items&&i.items.every(a=>"deprecated"===a.stability)})}))}ngOnDestroy(){this.onDestroy.next()}fetchSections(e){const i=this.apiBase+(e||this.apiListJsonDefault);this.http.get(i).pipe((0,d.R)(this.onDestroy),(0,v.b)(()=>this.logger.log(`Got API sections from ${i}`))).subscribe({next:a=>this.sectionsSubject.next(a),error:a=>{throw this.logger.error(a),a}})}}return s.ɵfac=function(e){return new(e||s)(t.LFG(h.eN),t.LFG(L.Y))},s.ɵprov=t.Yz7({token:s,factory:s.ɵfac}),s})();var Z=n(5370),M=n(587);const b=["filter"];function x(s,l){if(1&s&&(t.TgZ(0,"h2")(1,"a",11),t._uU(2),t.qZA()()),2&s){const e=t.oxw().$implicit;t.xp6(1),t.ekj("deprecated-api-item",e.deprecated),t.Q6J("href",e.path,t.LSH),t.xp6(1),t.Oqu(e.title)}}function F(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"li",13)(2,"a",11),t._UZ(3,"span"),t._uU(4),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(2),t.ekj("deprecated-api-item","deprecated"===e.stability),t.Q6J("href",e.path,t.LSH),t.xp6(1),t.Gre("symbol ",e.docType,""),t.xp6(1),t.hij(" ",e.title," ")}}function j(s,l){if(1&s&&(t.TgZ(0,"ul",12),t.YNc(1,F,5,7,"ng-container",8),t.qZA()),2&s){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.items)}}function J(s,l){if(1&s&&(t.TgZ(0,"div"),t.YNc(1,x,3,4,"h2",9),t.YNc(2,j,2,1,"ul",10),t.qZA()),2&s){const e=l.$implicit;t.xp6(1),t.Q6J("ngIf",e.items),t.xp6(1),t.Q6J("ngIf",e.items&&e.items.length)}}class Q{constructor(){this.query="",this.status="all",this.type="all"}}let O=(()=>{class s{constructor(e,i){this.apiService=e,this.locationService=i,this.showStatusMenu=!1,this.showTypeMenu=!1,this.criteriaSubject=new m.t(1),this.searchCriteria=new Q,this.types=[{value:"all",title:"全部"},{value:"class",title:"類"},{value:"const",title:"常量"},{value:"decorator",title:"裝飾器"},{value:"directive",title:"指令"},{value:"element",title:"Element"},{value:"enum",title:"列舉"},{value:"function",title:"函式"},{value:"interface",title:"介面"},{value:"package",title:"Package"},{value:"pipe",title:"管道"},{value:"ngmodule",title:"NgModule"},{value:"type-alias",title:"類型別名"}],this.statuses=[{value:"all",title:"全部"},{value:"stable",title:"穩定"},{value:"deprecated",title:"棄用"},{value:"security-risk",title:"安全風險"}]}ngOnInit(){this.filteredSections=(0,A.a)([this.apiService.sections,this.criteriaSubject]).pipe((0,f.U)(e=>({sections:e[0],criteria:e[1]})),(0,f.U)(e=>e.sections.map(i=>({...i,items:this.filterSection(i,e.criteria)})))),this.initializeSearchCriteria()}setQuery(e){this.setSearchCriteria({query:(e||"").toLowerCase().trim()})}setStatus(e){this.toggleStatusMenu(),this.status=e,this.setSearchCriteria({status:e.value})}setType(e){this.toggleTypeMenu(),this.type=e,this.setSearchCriteria({type:e.value})}toggleStatusMenu(){this.showStatusMenu=!this.showStatusMenu}toggleTypeMenu(){this.showTypeMenu=!this.showTypeMenu}filterSection(e,{query:i,status:a,type:o}){const r=!i||-1!==e.name.indexOf(i),y=(e.items||[]).filter(c=>(c=>"all"===o||o===c.docType)(c)&&(c=>"all"===a||a===c.stability||"security-risk"===a&&c.securityRisk)(c)&&(c=>r||-1!==c.name.indexOf(i))(c));return y.length?y:r&&"package"===o?[]:null}initializeSearchCriteria(){const{query:e,status:i,type:a}=this.locationService.search(),o=(e||"").toLowerCase();this.queryEl.nativeElement.value=o,this.status=this.statuses.find(r=>r.value===i)||this.statuses[0],this.type=this.types.find(r=>r.value===a)||this.types[0],this.searchCriteria={query:o,status:this.status.value,type:this.type.value},this.criteriaSubject.next(this.searchCriteria)}setLocationSearch(){const{query:e,status:i,type:a}=this.searchCriteria;this.locationService.setSearch("API 搜尋",{query:e||void 0,status:"all"!==i?i:void 0,type:"all"!==a?a:void 0})}setSearchCriteria(e){this.criteriaSubject.next(Object.assign(this.searchCriteria,e)),this.setLocationSearch()}}return s.ɵfac=function(e){return new(e||s)(t.Y36(g),t.Y36(Z.a))},s.ɵcmp=t.Xpm({type:s,selectors:[["aio-api-list"]],viewQuery:function(e,i){if(1&e&&t.Gf(b,7),2&e){let a;t.iGM(a=t.CRH())&&(i.queryEl=a.first)}},decls:11,vars:9,consts:[[1,"l-flex-wrap","api-filter"],["label","型別：",3,"options","selected","showSymbol","change"],["label","狀態：",3,"options","selected","disabled","change"],[1,"form-search"],["placeholder","過濾","aria-label","Filter Search",3,"input"],["filter",""],[1,"material-icons"],[1,"api-list-container"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","api-list",4,"ngIf"],[3,"href"],[1,"api-list"],[1,"api-item"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"aio-select",1),t.NdJ("change",function(o){return i.setType(o.option)}),t.qZA(),t.TgZ(2,"aio-select",2),t.NdJ("change",function(o){return i.setStatus(o.option)}),t.qZA(),t.TgZ(3,"div",3)(4,"input",4,5),t.NdJ("input",function(o){return i.setQuery(o.target.value)}),t.qZA(),t.TgZ(6,"i",6),t._uU(7,"search"),t.qZA()()(),t.TgZ(8,"article",7),t.YNc(9,J,3,2,"div",8),t.ALo(10,"async"),t.qZA()),2&e&&(t.xp6(1),t.Q6J("options",i.types)("selected",i.type)("showSymbol",!0),t.xp6(1),t.Q6J("options",i.statuses)("selected",i.status)("disabled","package"===i.type.value),t.xp6(7),t.Q6J("ngForOf",t.lcZ(10,7,i.filteredSections)))},dependencies:[p.sg,p.O5,M.H,p.Ov],encapsulation:2}),s})(),N=(()=>{class s{constructor(){this.customElementComponent=O}}return s.ɵfac=function(e){return new(e||s)},s.ɵmod=t.oAB({type:s}),s.ɵinj=t.cJS({providers:[g],imports:[p.ez,S.m,h.JF]}),s})()}}]);
//# sourceMappingURL=src_app_custom-elements_api_api-list_module_ts.e9d0328fd5c2933a.js.map

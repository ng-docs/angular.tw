{"id":"errors/NG0203","title":"NG0203: `inject()` must be called from an injection context such as a constructor, a factory function, a field initializer, or a function used with `EnvironmentInjector#runInContext`.\n\n`inject()` 只能從注入上下文（比如建構函式、工廠函式、欄位初始化器或使用了 `EnvironmentInjector#runInContext` 的函式）中呼叫","contents":"<div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/edit/cn/aio/content/errors/NG0203.md?message=docs(...)%3A%20請簡述你的修改...\" aria-label=\"提供編輯建議\" title=\"提供編輯建議\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n</div>\n\n<div class=\"content\">\n\n  <h1 id=\"ng0203-inject-must-be-called-from-an-injection-context-such-as-a-constructor-a-factory-function-a-field-initializer-or-a-function-used-with-environmentinjectorrunincontextinject-只能從注入上下文比如建構函式工廠函式欄位初始化器或使用了-environmentinjectorrunincontext-的函式中呼叫\">NG0203: `inject()` must be called from an injection context such as a constructor, a factory function, a field initializer, or a function used with `EnvironmentInjector#runInContext`.\n\n`inject()` 只能從注入上下文（比如建構函式、工廠函式、欄位初始化器或使用了 `EnvironmentInjector#runInContext` 的函式）中呼叫<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG0203#ng0203-inject-must-be-called-from-an-injection-context-such-as-a-constructor-a-factory-function-a-field-initializer-or-a-function-used-with-environmentinjectorrunincontextinject-只能從注入上下文比如建構函式工廠函式欄位初始化器或使用了-environmentinjectorrunincontext-的函式中呼叫\"><i class=\"material-icons\">link</i></a></h1>\n\n  \n  \n\n  <div class=\"error-description\">\n    <h2 translation-result=\"on\" id=\"說明\">說明<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG0203#說明\"><i class=\"material-icons\">link</i></a></h2>\n    <h2 translation-origin=\"off\" id=\"description\">Description<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG0203#description\"><i class=\"material-icons\">link</i></a></h2>\n    <p translation-result=\"on\">當試圖在允許的注入上下文之外使用 <code>inject()</code> 函式時，就會看到此錯誤。注入上下文只能在類別的建立和初始化過程中使用。它還可用於使用了 <code><a href=\"api/core/EnvironmentInjector\" class=\"code-anchor\">EnvironmentInjector</a>#runInContext</code> 的函式中。</p><p translation-origin=\"off\">You see this error when you try to use the <code>inject()</code> function outside of the allowed injection context. The injection context is available during the class creation and initialization. It is also available to functions\nused with <code><a href=\"api/core/EnvironmentInjector\" class=\"code-anchor\">EnvironmentInjector</a>#runInContext</code>.</p>\n\n<p translation-result=\"on\">在實踐中，建構函式、建構函式引數和欄位初始化器中允許進行 <code>inject()</code> 呼叫：</p><p translation-origin=\"off\">In practice the <code>inject()</code> calls are allowed in a constructor, a constructor parameter and a field initializer:</p>\n\n<code-example language=\"typescript\">\n@<a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a>({providedIn: 'root'})\nexport class Car {\n  radio: Radio|undefined;\n\n  // OK: field initializer\n  spareTyre = inject(Tyre);\n  \n  constructor() {\n    // OK: constructor body\n    this.radio = inject(Radio);\n  }\n}\n</code-example>\n<p translation-result=\"on\">從提供者的工廠呼叫 <code>inject</code> 也是合法的：</p><p translation-origin=\"off\">It is also legal to call <code>inject</code> from a provider's factory:</p>\n\n<code-example language=\"typescript\">\nproviders: [\n  {provide: Car, useFactory: () =&gt; {\n    // OK: a class factory\n    const engine = inject(Engine);\n    return new Car(engine);\n  }}\n]\n</code-example>\n<p translation-result=\"on\">在類別的建立上下文或 <code>runInContext</code> 之外呼叫 <code>inject()</code> 函式將導致錯誤。最值得注意的是，在建立類例項之後，不允許在方法（包括生命週期鉤子）中呼叫 <code>inject()</code>：</p><p translation-origin=\"off\">Calls to the <code>inject()</code> function outside of the class creation or <code>runInContext</code> will result in error. Most notably, calls to <code>inject()</code> are disallowed after a class instance was created, in methods (including lifecycle hooks):</p>\n\n<code-example language=\"typescript\">\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({ ... })\nexport class CarComponent {\n  ngOnInit() {\n    // ERROR: too late, the component instance was already created\n    const engine = inject(Engine);\n    engine.start();\n  }\n}\n</code-example>\n\n  </div>\n\n\n  \n  <br>\n\n  <div class=\"debugging\">\n    <h2 translation-result=\"on\" id=\"如何排除本錯誤\">如何排除本錯誤<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG0203#如何排除本錯誤\"><i class=\"material-icons\">link</i></a></h2>\n    <h2 translation-origin=\"off\" id=\"debugging-the-error\">Debugging the error<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG0203#debugging-the-error\"><i class=\"material-icons\">link</i></a></h2>\n    <p translation-result=\"on\">從錯誤堆疊追蹤中向後找，以識別出不允許的 <code>inject()</code> 呼叫所在的位置。</p><p translation-origin=\"off\">Work backwards from the stack trace of the error to identify a place where the disallowed call to <code>inject()</code> is located. </p>\n\n<p translation-result=\"on\">要解決此錯誤，請將 <code>inject()</code> 呼叫移動到允許的位置（通常是類建構函式或欄位初始化器）。</p><p translation-origin=\"off\">To fix the error move the <code>inject()</code> call to an allowed place (usually a class constructor or a field initializer).</p>\n\n<!-- links -->\n<!-- external links -->\n<!-- end links -->\n\n  </div>\n  \n</div>\n\n<!-- links to this doc:\n - errors\n-->\n<!-- links from this doc:\n - api/core/Component\n - api/core/EnvironmentInjector\n - api/core/Injectable\n - errors/NG0203#debugging-the-error\n - errors/NG0203#description\n - errors/NG0203#ng0203-inject-must-be-called-from-an-injection-context-such-as-a-constructor-a-factory-function-a-field-initializer-or-a-function-used-with-environmentinjectorrunincontextinject-只能從注入上下文比如建構函式工廠函式欄位初始化器或使用了-environmentinjectorrunincontext-的函式中呼叫\n - errors/NG0203#如何排除本錯誤\n - errors/NG0203#說明\n - https://github.com/ng-docs/angular-cn/edit/cn/aio/content/errors/NG0203.md?message=docs(...)%3A%20請簡述你的修改...\n-->"}
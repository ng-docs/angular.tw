{"id":"api/core/ChangeDetectorRef","title":"ChangeDetectorRef","contents":"<article>\n  <div class=\"breadcrumb-container\">\n    <div class=\"breadcrumb\">\n      <script type=\"application/ld+json\">\n        {\n          \"@context\": \"http://schema.org\",\n          \"@type\": \"BreadcrumbList\",\n          \"itemListElement\": [\n            { \"@type\": \"ListItem\", \"position\": 1, \"item\": { \"@id\": \"https://angular.cn/api\", \"name\": \"API\" } },\n            { \"@type\": \"ListItem\", \"position\": 2, \"item\": { \"@id\": \"https://angular.cn/api/core\", \"name\": \"@angular/core\" } },\n            { \"@type\": \"ListItem\", \"position\": 3, \"item\": { \"@id\": \"https://angular.cn/api/core/ChangeDetectorRef\", \"name\": \"ChangeDetectorRef\" } }\n          ]\n        }\n      </script>\n        <a href=\"/api\">API</a> &gt; <a href=\"api/core\">@angular/core</a>\n    </div>\n    <div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/edit/cn/packages/core/src/change_detection/change_detector_ref.ts?message=docs(core)%3A%20請簡述你的修改...#L17-L173\" aria-label=\"提供編輯建議\" title=\"提供編輯建議\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n  <a href=\"https://github.com/ng-docs/angular-cn/tree/16.1.0-next.3/packages/core/src/change_detection/change_detector_ref.ts#L17-L173\" aria-label=\"檢視原始碼\" title=\"檢視原始碼\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">code</i></a>\n</div>\n  </div>\n  <header ng-should-translate=\"\" class=\"api-header\">\n    <h1 id=\"changedetectorref\">ChangeDetectorRef<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/ChangeDetectorRef#changedetectorref\"><i class=\"material-icons\">link</i></a></h1>\n    <label class=\"api-type-label class\">class</label>\n  </header>\n  <aio-toc class=\"embedded\"></aio-toc>\n\n  <div class=\"api-body\">\n  <section ng-should-translate=\"\" class=\"short-description\">\n    <p translation-result=\"on\">Angular 各種檢視的基礎類，提供變更檢測功能。\n變更檢測樹會收集要檢查的所有檢視。\n使用這些方法從樹中新增或移除檢視、初始化變更檢測並明確地把這些檢視標記為<em>髒的</em>，意思是它們變了、需要重新渲染。</p><p translation-origin=\"off\">Base class that provides change detection functionality.\nA change-detection tree collects all views that are to be checked for changes.\nUse the methods to add and remove views from the tree, initiate change-detection,\nand explicitly mark views as <em>dirty</em>, meaning that they have changed and need to be re-rendered.</p>\n\n\n  </section><section ng-should-translate=\"\" class=\"class-overview\">\n<code-example language=\"ts\" hidecopy=\"true\">\nabstract class <a href=\"api/core/ChangeDetectorRef\" class=\"code-anchor\">ChangeDetectorRef</a> {\n  <a class=\"code-anchor\" href=\"api/core/ChangeDetectorRef#markForCheck\">abstract <span class=\"member-name\">markForCheck</span>(): void</a>\n  <a class=\"code-anchor\" href=\"api/core/ChangeDetectorRef#detach\">abstract <span class=\"member-name\">detach</span>(): void</a>\n  <a class=\"code-anchor\" href=\"api/core/ChangeDetectorRef#detectChanges\">abstract <span class=\"member-name\">detectChanges</span>(): void</a>\n  <a class=\"code-anchor\" href=\"api/core/ChangeDetectorRef#checkNoChanges\">abstract <span class=\"member-name\">checkNoChanges</span>(): void</a>\n  <a class=\"code-anchor\" href=\"api/core/ChangeDetectorRef#reattach\">abstract <span class=\"member-name\">reattach</span>(): void</a>\n}\n</code-example>\n\n  <div class=\"descendants class\">\n    <h2 id=\"子類別\">子類別<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/ChangeDetectorRef#子類別\"><i class=\"material-icons\">link</i></a></h2>\n    \n<ul>\n  <li>\n    <code><a href=\"api/core/ViewRef\" class=\"code-anchor\">ViewRef</a></code>\n    \n<ul>\n  <li>\n    <code><a href=\"api/core/EmbeddedViewRef\" class=\"code-anchor\">EmbeddedViewRef</a></code>\n    \n  </li>\n</ul>\n  </li>\n</ul>\n  </div>\n</section>\n\n<section ng-should-translate=\"\" class=\"see-also\">\n  <h2 id=\"see-also\">參見<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/ChangeDetectorRef#see-also\"><i class=\"material-icons\">link</i></a></h2>\n  <ul>\n    <li><p translation-result=\"on\"><a href=\"guide/lifecycle-hooks#using-change-detection-hooks\">使用變更檢測鉤子</a></p><p translation-origin=\"off\"><a href=\"guide/lifecycle-hooks#using-change-detection-hooks\">Using change detection hooks</a></p>\n</li>\n    <li><p translation-result=\"on\"><a href=\"guide/lifecycle-hooks#defining-custom-change-detection\">定義自訂變更檢測</a></p><p translation-origin=\"off\"><a href=\"guide/lifecycle-hooks#defining-custom-change-detection\">Defining custom change detection</a></p>\n</li>\n  </ul>\n</section>\n  \n  \n<section ng-should-translate=\"\" class=\"instance-methods\">\n  <a name=\"methods\"></a>\n  <h2 id=\"instance-methods\">方法<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/ChangeDetectorRef#instance-methods\"><i class=\"material-icons\">link</i></a></h2>\n  <a id=\"markForCheck\"></a>\n<table class=\"is-full-width method-table instance-methods\">\n  <thead><tr><th>\n    <div class=\"with-github-links\">\n      <h3 id=\"markforcheck\">markForCheck()<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/ChangeDetectorRef#markforcheck\"><i class=\"material-icons\">link</i></a></h3>\n      <div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/edit/cn/packages/core/src/change_detection/change_detector_ref.ts?message=docs(core)%3A%20請簡述你的修改...#L90-L107\" aria-label=\"提供編輯建議\" title=\"提供編輯建議\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n  <a href=\"https://github.com/ng-docs/angular-cn/tree/16.1.0-next.3/packages/core/src/change_detection/change_detector_ref.ts#L90-L107\" aria-label=\"檢視原始碼\" title=\"檢視原始碼\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">code</i></a>\n</div>\n    </div>\n  </th></tr></thead>\n  <tbody>\n    <tr>\n      <td class=\"short-description\">\n        <p translation-result=\"on\">當檢視使用 <a href=\"api/core/ChangeDetectionStrategy#OnPush\">OnPush</a>（<code>checkOnce</code>）變更檢測策略時，把該檢視顯式標記為已更改，以便它再次進行檢查。</p><p translation-origin=\"off\">When a view uses the <a href=\"api/core/ChangeDetectionStrategy#OnPush\">OnPush</a> (checkOnce)\nchange detection strategy, explicitly marks the view as changed so that\nit can be checked again.</p>\n\n</td>\n    </tr>\n    <tr>\n      <td>\n        <div class=\"overload-info\">\n  <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\">abstract <span class=\"member-name\">markForCheck</span>(): void</code-example>\n\n  <h6 class=\"no-anchor\" id=\"引數\">引數</h6>\n  <p>沒有引數。</p>\n  <h6 class=\"no-anchor\" id=\"返回值\">返回值</h6>\n  <p><code>void</code></p>\n\n</div>\n      </td>\n    </tr>\n    <tr>\n      <td class=\"description\">\n        <p translation-result=\"on\">當輸入已更改或檢視中發生了事件時，元件通常會標記為髒的（需要重新渲染）。呼叫此方法會確保即使那些觸發器沒有被觸發，也仍然檢查該元件。</p><p translation-origin=\"off\">Components are normally marked as dirty (in need of rerendering) when inputs\nhave changed or events have fired in the view. Call this method to ensure that\na component is checked even if these triggers have not occurred.</p>\n\n<!-- TODO: Add a link to a chapter on OnPush components -->\n\n      </td>\n    </tr>\n  </tbody>\n</table>\n  <a id=\"detach\"></a>\n<table class=\"is-full-width method-table instance-methods\">\n  <thead><tr><th>\n    <div class=\"with-github-links\">\n      <h3 id=\"detach\">detach()<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/ChangeDetectorRef#detach\"><i class=\"material-icons\">link</i></a></h3>\n      <div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/edit/cn/packages/core/src/change_detection/change_detector_ref.ts?message=docs(core)%3A%20請簡述你的修改...#L108-L128\" aria-label=\"提供編輯建議\" title=\"提供編輯建議\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n  <a href=\"https://github.com/ng-docs/angular-cn/tree/16.1.0-next.3/packages/core/src/change_detection/change_detector_ref.ts#L108-L128\" aria-label=\"檢視原始碼\" title=\"檢視原始碼\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">code</i></a>\n</div>\n    </div>\n  </th></tr></thead>\n  <tbody>\n    <tr>\n      <td class=\"short-description\">\n        <p translation-result=\"on\">從變更檢測樹中分離開檢視。\n已分離的檢視在重新附加上去之前不會被檢查。\n與 <code>detectChanges()</code> 結合使用，可以實現區域性變更檢測。</p><p translation-origin=\"off\">Detaches this view from the change-detection tree.\nA detached view is  not checked until it is reattached.\nUse in combination with <code>detectChanges()</code> to implement local change detection checks.</p>\n\n</td>\n    </tr>\n    <tr>\n      <td>\n        <div class=\"overload-info\">\n  <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\">abstract <span class=\"member-name\">detach</span>(): void</code-example>\n\n  <h6 class=\"no-anchor\" id=\"引數-1\">引數</h6>\n  <p>沒有引數。</p>\n  <h6 class=\"no-anchor\" id=\"返回值-1\">返回值</h6>\n  <p><code>void</code></p>\n\n</div>\n      </td>\n    </tr>\n    <tr>\n      <td class=\"description\">\n        <p translation-result=\"on\">即使已分離的檢視已標記為髒的，它們在重新附加上去之前也不會被檢查。</p><p translation-origin=\"off\">Detached views are not checked during change detection runs until they are\nre-attached, even if they are marked as dirty.</p>\n\n<!-- TODO: Add a link to a chapter on detach/reattach/local digest -->\n<!-- TODO: Add a live demo once ref.detectChanges is merged into master -->\n\n      </td>\n    </tr>\n  </tbody>\n</table>\n  <a id=\"detectChanges\"></a>\n<table class=\"is-full-width method-table instance-methods\">\n  <thead><tr><th>\n    <div class=\"with-github-links\">\n      <h3 id=\"detectchanges\">detectChanges()<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/ChangeDetectorRef#detectchanges\"><i class=\"material-icons\">link</i></a></h3>\n      <div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/edit/cn/packages/core/src/change_detection/change_detector_ref.ts?message=docs(core)%3A%20請簡述你的修改...#L129-L142\" aria-label=\"提供編輯建議\" title=\"提供編輯建議\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n  <a href=\"https://github.com/ng-docs/angular-cn/tree/16.1.0-next.3/packages/core/src/change_detection/change_detector_ref.ts#L129-L142\" aria-label=\"檢視原始碼\" title=\"檢視原始碼\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">code</i></a>\n</div>\n    </div>\n  </th></tr></thead>\n  <tbody>\n    <tr>\n      <td class=\"short-description\">\n        <p translation-result=\"on\">檢查該檢視及其子檢視。與 <a href=\"api/core/ChangeDetectorRef#detach\">detach</a> 結合使用可以實現區域性變更檢測。</p><p translation-origin=\"off\">Checks this view and its children. Use in combination with <a href=\"api/core/ChangeDetectorRef#detach\">detach</a>\nto implement local change detection checks.</p>\n\n</td>\n    </tr>\n    <tr>\n      <td>\n        <div class=\"overload-info\">\n  <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\">abstract <span class=\"member-name\">detectChanges</span>(): void</code-example>\n\n  <h6 class=\"no-anchor\" id=\"引數-2\">引數</h6>\n  <p>沒有引數。</p>\n  <h6 class=\"no-anchor\" id=\"返回值-2\">返回值</h6>\n  <p><code>void</code></p>\n\n</div>\n      </td>\n    </tr>\n    <tr>\n      <td class=\"description\">\n        <!-- TODO: Add a link to a chapter on detach/reattach/local digest -->\n<!-- TODO: Add a live demo once ref.detectChanges is merged into master -->\n\n      </td>\n    </tr>\n  </tbody>\n</table>\n  <a id=\"checkNoChanges\"></a>\n<table class=\"is-full-width method-table instance-methods\">\n  <thead><tr><th>\n    <div class=\"with-github-links\">\n      <h3 id=\"checknochanges\">checkNoChanges()<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/ChangeDetectorRef#checknochanges\"><i class=\"material-icons\">link</i></a></h3>\n      <div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/edit/cn/packages/core/src/change_detection/change_detector_ref.ts?message=docs(core)%3A%20請簡述你的修改...#L143-L154\" aria-label=\"提供編輯建議\" title=\"提供編輯建議\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n  <a href=\"https://github.com/ng-docs/angular-cn/tree/16.1.0-next.3/packages/core/src/change_detection/change_detector_ref.ts#L143-L154\" aria-label=\"檢視原始碼\" title=\"檢視原始碼\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">code</i></a>\n</div>\n    </div>\n  </th></tr></thead>\n  <tbody>\n    <tr>\n      <td class=\"short-description\">\n        <p translation-result=\"on\">檢查變更檢測器及其子檢測器，如果檢測到任何更改，則丟擲例外。</p><p translation-origin=\"off\">Checks the change detector and its children, and throws if any changes are detected.</p>\n\n</td>\n    </tr>\n    <tr>\n      <td>\n        <div class=\"overload-info\">\n  <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\">abstract <span class=\"member-name\">checkNoChanges</span>(): void</code-example>\n\n  <h6 class=\"no-anchor\" id=\"引數-3\">引數</h6>\n  <p>沒有引數。</p>\n  <h6 class=\"no-anchor\" id=\"返回值-3\">返回值</h6>\n  <p><code>void</code></p>\n\n</div>\n      </td>\n    </tr>\n    <tr>\n      <td class=\"description\">\n        <p translation-result=\"on\">在開發模式下可用來驗證正在執行的變更檢測器是否引入了其它變更。在生產模式下呼叫它時沒有任何效果。</p><p translation-origin=\"off\">Use in development mode to verify that running change detection doesn't introduce\nother changes. Calling it in production mode is a noop.</p>\n\n\n      </td>\n    </tr>\n  </tbody>\n</table>\n  <a id=\"reattach\"></a>\n<table class=\"is-full-width method-table instance-methods\">\n  <thead><tr><th>\n    <div class=\"with-github-links\">\n      <h3 id=\"reattach\">reattach()<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/ChangeDetectorRef#reattach\"><i class=\"material-icons\">link</i></a></h3>\n      <div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/edit/cn/packages/core/src/change_detection/change_detector_ref.ts?message=docs(core)%3A%20請簡述你的修改...#L155-L166\" aria-label=\"提供編輯建議\" title=\"提供編輯建議\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n  <a href=\"https://github.com/ng-docs/angular-cn/tree/16.1.0-next.3/packages/core/src/change_detection/change_detector_ref.ts#L155-L166\" aria-label=\"檢視原始碼\" title=\"檢視原始碼\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">code</i></a>\n</div>\n    </div>\n  </th></tr></thead>\n  <tbody>\n    <tr>\n      <td class=\"short-description\">\n        <p translation-result=\"on\">把以前分離開的檢視重新附加到變更檢測樹上。\n檢視會被預設附加到這棵樹上。</p><p translation-origin=\"off\">Re-attaches the previously detached view to the change detection tree.\nViews are attached to the tree by default.</p>\n\n</td>\n    </tr>\n    <tr>\n      <td>\n        <div class=\"overload-info\">\n  <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\">abstract <span class=\"member-name\">reattach</span>(): void</code-example>\n\n  <h6 class=\"no-anchor\" id=\"引數-4\">引數</h6>\n  <p>沒有引數。</p>\n  <h6 class=\"no-anchor\" id=\"返回值-4\">返回值</h6>\n  <p><code>void</code></p>\n\n</div>\n      </td>\n    </tr>\n    <tr>\n      <td class=\"description\">\n        <!-- TODO: Add a link to a chapter on detach/reattach/local digest -->\n\n      </td>\n    </tr>\n  </tbody>\n</table>\n</section>\n\n<section ng-should-translate=\"\" class=\"usage-notes\">\n  <h2 id=\"usage-notes\">使用說明<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/ChangeDetectorRef#usage-notes\"><i class=\"material-icons\">link</i></a></h2>\n  <p translation-result=\"on\">下面的例子示範瞭如何修改預設的變更檢測行為，以便在需要時執行顯式變更檢測。</p><p translation-origin=\"off\">The following examples demonstrate how to modify default change-detection behavior\nto perform explicit detection when needed.</p>\n\n<h3 id=\"use-markforcheck-with-checkonce-strategy\" translation-result=\"on\">使用 <code>markForCheck()</code> 和 <code>CheckOnce</code> 策略<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/ChangeDetectorRef#use-markforcheck-with-checkonce-strategy\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">Use <code>markForCheck()</code> with <code>CheckOnce</code> strategy<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/ChangeDetectorRef#use-markforcheck-with-checkonce-strategy\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">下面的例子為元件設定了 <code>OnPush</code> 變更檢測策略（<code>CheckOnce</code> 而不是預設的\n<code>CheckAlways</code>），然後每隔一段時間強制進行第二輪檢測。\n參見<a href=\"http://plnkr.co/edit/GC512b?p=preview\">線上例子</a>。</p><p translation-origin=\"off\">The following example sets the <code>OnPush</code> change-detection strategy for a component\n(<code>CheckOnce</code>, rather than the default <code>CheckAlways</code>), then forces a second check\nafter an interval.</p>\n\n<code-example path=\"core/ts/change_detect/change-detection.ts\" region=\"mark-for-check\">\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app-root',\n  template: `Number of ticks: {{numberOfTicks}}`,\n  changeDetection: <a href=\"api/core/ChangeDetectionStrategy#OnPush\" class=\"code-anchor\">ChangeDetectionStrategy.OnPush</a>,\n})\n\nclass AppComponent {\n  numberOfTicks = 0;\n\n  constructor(private ref: <a href=\"api/core/ChangeDetectorRef\" class=\"code-anchor\">ChangeDetectorRef</a>) {\n    setInterval(() =&gt; {\n      this.numberOfTicks++;\n      // require view to be updated\n      this.ref.markForCheck();\n    }, 1000);\n  }\n}\n\n</code-example>\n<h3 id=\"detach-change-detector-to-limit-how-often-check-occurs\" translation-result=\"on\">分離開變更檢測器以限制變更檢測的發生頻度<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/ChangeDetectorRef#detach-change-detector-to-limit-how-often-check-occurs\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">Detach change detector to limit how often check occurs<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/ChangeDetectorRef#detach-change-detector-to-limit-how-often-check-occurs\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">下面的例子定義了一個帶有隻讀資料的大型列表，這些資料預計每秒會變化很多次。\n為了提高效能，我們檢測和更新列表的頻率就應該比實際發生的變化少得多。\n要解決這個問題，就要分離開變更檢測器，並每隔五秒鐘顯式執行一次變更檢查。</p><p translation-origin=\"off\">The following example defines a component with a large list of read-only data\nthat is expected to change constantly, many times per second.\nTo improve performance, we want to check and update the list\nless often than the changes actually occur. To do that, we detach\nthe component's change detector and perform an explicit local check every five seconds.</p>\n\n<code-example path=\"core/ts/change_detect/change-detection.ts\" region=\"detach\">\nclass DataListProvider {\n  // in a real application the returned data will be different every time\n  get data() {\n    return [1, 2, 3, 4, 5];\n  }\n}\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'giant-list',\n  template: `\n      &lt;li *<a href=\"api/common/NgFor\" class=\"code-anchor\">ngFor</a>=\"let d of dataProvider.data\"&gt;<a href=\"api/router/Data\" class=\"code-anchor\">Data</a> {{d}}&lt;/li&gt;\n    `,\n})\nclass GiantList {\n  constructor(private ref: <a href=\"api/core/ChangeDetectorRef\" class=\"code-anchor\">ChangeDetectorRef</a>, public dataProvider: DataListProvider) {\n    ref.detach();\n    setInterval(() =&gt; {\n      this.ref.detectChanges();\n    }, 5000);\n  }\n}\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app',\n  providers: [DataListProvider],\n  template: `\n      &lt;giant-list&gt;&lt;/giant-list&gt;\n    `,\n})\nclass App {\n}\n\n</code-example>\n<h3 id=\"reattaching-a-detached-component\" translation-result=\"on\">重新附加一個已分離的元件<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/ChangeDetectorRef#reattaching-a-detached-component\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">Reattaching a detached component<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/ChangeDetectorRef#reattaching-a-detached-component\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">下面的例子建立了一個用來顯示活動資料的元件。\n當 <code>live</code> 屬性為 <code>false</code> 時，該元件就把它的變更檢測器從主變更檢測器樹中分離出來，當該屬性變為\n<code>true</code> 時，則重新附加上它。</p><p translation-origin=\"off\">The following example creates a component displaying live data.\nThe component detaches its change detector from the main change detector tree\nwhen the <code>live</code> property is set to false, and reattaches it when the property\nbecomes true.</p>\n\n<code-example path=\"core/ts/change_detect/change-detection.ts\" region=\"reattach\">\nclass DataProvider {\n  data = 1;\n  constructor() {\n    setInterval(() =&gt; {\n      this.data = 2;\n    }, 500);\n  }\n}\n\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({selector: 'live-data', inputs: ['live'], template: '<a href=\"api/router/Data\" class=\"code-anchor\">Data</a>: {{dataProvider.data}}'})\nclass LiveData {\n  constructor(private ref: <a href=\"api/core/ChangeDetectorRef\" class=\"code-anchor\">ChangeDetectorRef</a>, public dataProvider: DataProvider) {}\n\n  @<a href=\"api/core/Input\" class=\"code-anchor\">Input</a>()\n  set live(value: boolean) {\n    if (value) {\n      this.ref.reattach();\n    } else {\n      this.ref.detach();\n    }\n  }\n}\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app',\n  providers: [DataProvider],\n  template: `\n       Live Update: &lt;input type=\"checkbox\" [(<a href=\"api/forms/NgModel\" class=\"code-anchor\">ngModel</a>)]=\"live\"&gt;\n       &lt;live-data [live]=\"live\"&gt;&lt;/live-data&gt;\n     `,\n})\n\nclass App1 {\n  live = true;\n}\n\n</code-example>\n\n</section></div>\n</article>\n\n<!-- links to this doc:\n - api/core\n - api/core/ApplicationRef\n - api/core/ChangeDetectionStrategy\n - api/core/ComponentRef\n - api/core/EmbeddedViewRef\n - api/core/ViewRef\n - api/core/global/ngApplyChanges\n - api/core/testing/ComponentFixture\n - api/router/InMemoryScrollingOptions\n - api/upgrade/static/downgradeComponent\n - guide/change-detection-skipping-subtrees\n - guide/deprecations\n - guide/glossary\n - guide/testing-utility-apis\n-->\n<!-- links from this doc:\n - /api\n - api/common/NgFor\n - api/core\n - api/core/ChangeDetectionStrategy#OnPush\n - api/core/ChangeDetectorRef#changedetectorref\n - api/core/ChangeDetectorRef#checkNoChanges\n - api/core/ChangeDetectorRef#checknochanges\n - api/core/ChangeDetectorRef#detach\n - api/core/ChangeDetectorRef#detach-change-detector-to-limit-how-often-check-occurs\n - api/core/ChangeDetectorRef#detectChanges\n - api/core/ChangeDetectorRef#detectchanges\n - api/core/ChangeDetectorRef#instance-methods\n - api/core/ChangeDetectorRef#markForCheck\n - api/core/ChangeDetectorRef#markforcheck\n - api/core/ChangeDetectorRef#reattach\n - api/core/ChangeDetectorRef#reattaching-a-detached-component\n - api/core/ChangeDetectorRef#see-also\n - api/core/ChangeDetectorRef#usage-notes\n - api/core/ChangeDetectorRef#use-markforcheck-with-checkonce-strategy\n - api/core/ChangeDetectorRef#使用-markforcheck-和-checkonce-策略\n - api/core/ChangeDetectorRef#分離開變更檢測器以限制變更檢測的發生頻度\n - api/core/ChangeDetectorRef#子類別\n - api/core/ChangeDetectorRef#重新附加一個已分離的元件\n - api/core/Component\n - api/core/EmbeddedViewRef\n - api/core/Input\n - api/core/ViewRef\n - api/forms/NgModel\n - api/router/Data\n - guide/lifecycle-hooks#defining-custom-change-detection\n - guide/lifecycle-hooks#using-change-detection-hooks\n - http://plnkr.co/edit/GC512b?p=preview\n - https://github.com/ng-docs/angular-cn/edit/cn/packages/core/src/change_detection/change_detector_ref.ts?message=docs(core)%3A%20請簡述你的修改...#L108-L128\n - https://github.com/ng-docs/angular-cn/edit/cn/packages/core/src/change_detection/change_detector_ref.ts?message=docs(core)%3A%20請簡述你的修改...#L129-L142\n - https://github.com/ng-docs/angular-cn/edit/cn/packages/core/src/change_detection/change_detector_ref.ts?message=docs(core)%3A%20請簡述你的修改...#L143-L154\n - https://github.com/ng-docs/angular-cn/edit/cn/packages/core/src/change_detection/change_detector_ref.ts?message=docs(core)%3A%20請簡述你的修改...#L155-L166\n - https://github.com/ng-docs/angular-cn/edit/cn/packages/core/src/change_detection/change_detector_ref.ts?message=docs(core)%3A%20請簡述你的修改...#L17-L173\n - https://github.com/ng-docs/angular-cn/edit/cn/packages/core/src/change_detection/change_detector_ref.ts?message=docs(core)%3A%20請簡述你的修改...#L90-L107\n - https://github.com/ng-docs/angular-cn/tree/16.1.0-next.3/packages/core/src/change_detection/change_detector_ref.ts#L108-L128\n - https://github.com/ng-docs/angular-cn/tree/16.1.0-next.3/packages/core/src/change_detection/change_detector_ref.ts#L129-L142\n - https://github.com/ng-docs/angular-cn/tree/16.1.0-next.3/packages/core/src/change_detection/change_detector_ref.ts#L143-L154\n - https://github.com/ng-docs/angular-cn/tree/16.1.0-next.3/packages/core/src/change_detection/change_detector_ref.ts#L155-L166\n - https://github.com/ng-docs/angular-cn/tree/16.1.0-next.3/packages/core/src/change_detection/change_detector_ref.ts#L17-L173\n - https://github.com/ng-docs/angular-cn/tree/16.1.0-next.3/packages/core/src/change_detection/change_detector_ref.ts#L90-L107\n-->"}
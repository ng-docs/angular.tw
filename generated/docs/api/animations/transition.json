{"id":"api/animations/transition","title":"transition","contents":"<article>\n  <div class=\"breadcrumb-container\">\n    <div class=\"breadcrumb\">\n      <script type=\"application/ld+json\">\n        {\n          \"@context\": \"http://schema.org\",\n          \"@type\": \"BreadcrumbList\",\n          \"itemListElement\": [\n            { \"@type\": \"ListItem\", \"position\": 1, \"item\": { \"@id\": \"https://angular.cn/api\", \"name\": \"API\" } },\n            { \"@type\": \"ListItem\", \"position\": 2, \"item\": { \"@id\": \"https://angular.cn/api/animations\", \"name\": \"@angular/animations\" } },\n            { \"@type\": \"ListItem\", \"position\": 3, \"item\": { \"@id\": \"https://angular.cn/api/animations/transition\", \"name\": \"transition\" } }\n          ]\n        }\n      </script>\n        <a href=\"/api\">API</a> &gt; <a href=\"api/animations\">@angular/animations</a>\n    </div>\n    <div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/edit/cn/packages/animations/src/animation_metadata.ts?message=docs(animations)%3A%20請簡述你的修改...#L1296-L1523\" aria-label=\"提供編輯建議\" title=\"提供編輯建議\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n  <a href=\"https://github.com/ng-docs/angular-cn/tree/16.1.0-next.3/packages/animations/src/animation_metadata.ts#L1296-L1523\" aria-label=\"檢視原始碼\" title=\"檢視原始碼\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">code</i></a>\n</div>\n  </div>\n  <header ng-should-translate=\"\" class=\"api-header\">\n    <h1 id=\"transition\">transition<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/animations/transition#transition\"><i class=\"material-icons\">link</i></a></h1>\n    <label class=\"api-type-label function\">function</label>\n  </header>\n  <aio-toc class=\"embedded\"></aio-toc>\n\n  <div class=\"api-body\">\n  <section ng-should-translate=\"\" class=\"short-description\">\n    <p translation-result=\"on\">宣告一個轉場動畫，以便在滿足給定條件時執行一系列動畫步驟。</p><p translation-origin=\"off\">Declares an animation transition which is played when a certain specified condition is met.</p>\n\n\n  </section>\n\n  <div class=\"overload-info\">\n  <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\"> <span class=\"member-name\"><a href=\"api/animations/transition\" class=\"code-anchor\">transition</a></span>(stateChangeExpr: string | ((fromState: string, toState: string, element?: any, params?: { [key: string]: any; }) =&gt; boolean), steps: <a href=\"api/animations/AnimationMetadata\" class=\"code-anchor\">AnimationMetadata</a> | <a href=\"api/animations/AnimationMetadata\" class=\"code-anchor\">AnimationMetadata</a>[], options: <a href=\"api/animations/AnimationOptions\" class=\"code-anchor\">AnimationOptions</a> = null): <a href=\"api/animations/AnimationTransitionMetadata\" class=\"code-anchor\">AnimationTransitionMetadata</a></code-example>\n\n  <h6 class=\"no-anchor\" id=\"引數\">引數</h6>\n  <table class=\"is-full-width list-table parameters-table function-overload-parameters\">\n  <tbody>\n    <tr class=\"function-overload-parameter\">\n      <td class=\"param-name\">\n        <a id=\"\"></a>\n        <code>stateChangeExpr</code>\n      </td>\n      <td class=\"param-type\"><code>string | ((fromState: string, toState: string, element?: any, params?: { [key: string]: any; }) =&gt; boolean)</code></td>\n      <td class=\"param-description\">\n        <p translation-result=\"on\">具有特定格式的字串或指定動畫轉換何時發生的函式（請參閱<a href=\"api/animations/transition#state-change-expression\">狀態更改表示式</a>）。</p><p translation-origin=\"off\">A string with a specific format or a function that specifies when the\nanimation transition should occur (see <a href=\"api/animations/transition#state-change-expression\">State Change Expression</a>).</p>\n\n\n      </td>\n    </tr>\n    <tr class=\"function-overload-parameter\">\n      <td class=\"param-name\">\n        <a id=\"\"></a>\n        <code>steps</code>\n      </td>\n      <td class=\"param-type\"><code><a href=\"api/animations/AnimationMetadata\" class=\"code-anchor\">AnimationMetadata</a> | <a href=\"api/animations/AnimationMetadata\" class=\"code-anchor\">AnimationMetadata</a>[]</code></td>\n      <td class=\"param-description\">\n        <p translation-result=\"on\">表示動畫操作指南的一個或多個動畫物件。</p><p translation-origin=\"off\">One or more animation objects that represent the animation's instructions.</p>\n\n\n      </td>\n    </tr>\n    <tr class=\"function-overload-parameter\">\n      <td class=\"param-name\">\n        <a id=\"\"></a>\n        <code>options</code>\n      </td>\n      <td class=\"param-type\"><code><a href=\"api/animations/AnimationOptions\" class=\"code-anchor\">AnimationOptions</a></code></td>\n      <td class=\"param-description\">\n        <p translation-result=\"on\">一個選項物件，可用於指定動畫的延遲或為其提供自訂引數。</p><p translation-result=\"on\">可選值。預設值為 <code>null</code>。</p><p translation-origin=\"off\">An options object that can be used to specify a delay for the animation or provide\ncustom parameters for it.</p>\n\n\n        \n\n      </td>\n    </tr>\n  </tbody>\n</table>\n  <h6 class=\"no-anchor\" id=\"返回值\">返回值</h6>\n  <p translation-result=\"on\">一個封裝了轉場資料的物件。</p><p translation-origin=\"off\"><code><a href=\"api/animations/AnimationTransitionMetadata\" class=\"code-anchor\">AnimationTransitionMetadata</a></code>: An object that encapsulates the transition data.</p>\n\n\n</div>\n\n\n\n\n\n<section ng-should-translate=\"\" class=\"usage-notes\">\n  <h2 id=\"usage-notes\">使用說明<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/animations/transition#usage-notes\"><i class=\"material-icons\">link</i></a></h2>\n  <h3 id=\"state-change-expression\" translation-result=\"on\">狀態更改表示式<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/animations/transition#state-change-expression\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">State Change Expression<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/animations/transition#state-change-expression\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">狀態更改表示式會指示 Angular 何時執行轉換的動畫，它可以是</p><p translation-origin=\"off\">The State Change Expression instructs Angular when to run the transition's animations, it can\neither be</p>\n\n<ul>\n<li>\n<p translation-result=\"on\">具有特定語法的字串</p><p translation-origin=\"off\">a string with a specific syntax</p>\n\n</li>\n<li>\n<p translation-result=\"on\">或一個比較前一個狀態和當前狀態（繫結到元素觸發器的表示式的值）的函式，如果應該發生轉換，則返回\n<code>true</code>，否則返回 <code>false</code></p><p translation-origin=\"off\">or a function that compares the previous and current state (value of the expression bound to\nthe element's trigger) and returns <code>true</code> if the transition should occur or <code>false</code> otherwise</p>\n\n</li>\n</ul>\n<p translation-result=\"on\">字串格式可以是：</p><p translation-origin=\"off\">The string format can be:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\"><code>fromState =&gt; toState</code>，這表明應該發生轉換的動畫，然後繫結到觸發器元素的表示式從 <code>fromState</code>\n到 <code>toState</code></p><p translation-origin=\"off\"><code>fromState =&gt; toState</code>, which indicates that the transition's animations should occur then the\nexpression bound to the trigger's element goes from <code>fromState</code> to <code>toState</code></p>\n\n<p translation-result=\"on\"><em> 範例：</em></p><p translation-origin=\"off\"><em>Example:</em></p>\n\n<code-example language=\"typescript\">\n  <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>('open =&gt; closed', <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('.5s ease-out', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ height: 0 }) ))\n</code-example>\n</li>\n<li>\n<p translation-result=\"on\"><code>fromState &lt;=&gt; toState</code>，這表明應該發生轉換的動畫，然後繫結到觸發器元素的表示式從 <code>fromState</code>\n變為 <code>toState</code>，反之亦然</p><p translation-origin=\"off\"><code>fromState &lt;=&gt; toState</code>, which indicates that the transition's animations should occur then\nthe expression bound to the trigger's element goes from <code>fromState</code> to <code>toState</code> or vice\nversa</p>\n\n<p translation-result=\"on\"><em> 範例：</em></p><p translation-origin=\"off\"><em>Example:</em></p>\n\n<code-example language=\"typescript\">\n  <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>('enabled &lt;=&gt; disabled', <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('1s cubic-bezier(0.8,0.3,0,1)'))\n</code-example>\n</li>\n<li>\n<p translation-result=\"on\"><code>:enter</code> / <code>:leave</code>，這表明轉換的動畫應該在元素進入或存在 DOM 時發生</p><p translation-origin=\"off\"><code>:enter</code>/<code>:leave</code>, which indicates that the transition's animations should occur when the\nelement enters or exists the DOM</p>\n\n<p translation-result=\"on\"><em> 範例：</em></p><p translation-origin=\"off\"><em>Example:</em></p>\n\n<code-example language=\"typescript\">\n  <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>(':enter', [\n    <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ opacity: 0 }),\n    <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('500ms', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ opacity: 1 }))\n  ])\n</code-example>\n</li>\n<li>\n<p translation-result=\"on\">  <code>:increment</code> / <code>:decrement</code>\n，表示當繫結到觸發器元素的數值表示式的值增加或減少時，應該發生轉換的動畫</p><p translation-origin=\"off\"><code>:increment</code>/<code>:decrement</code>, which indicates that the transition's animations should occur when\nthe numerical expression bound to the trigger's element has increased in value or decreased</p>\n\n<p translation-result=\"on\">  <em> 範例：</em></p><p translation-origin=\"off\">  <em>Example:</em></p>\n\n<code-example language=\"typescript\">\n  <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>(':increment', <a href=\"api/animations/query\" class=\"code-anchor\">query</a>('@counter', <a href=\"api/animations/animateChild\" class=\"code-anchor\">animateChild</a>()))\n</code-example>\n</li>\n<li>\n<p translation-result=\"on\">上述任何一項的序列除以逗號，這表明只要狀態更改表示式之一匹配，就應該發生轉換的動畫</p><p translation-origin=\"off\">a sequence of any of the above divided by commas, which indicates that transition's animations\nshould occur whenever one of the state change expressions matches</p>\n\n<p translation-result=\"on\"><em> 範例：</em></p><p translation-origin=\"off\"><em>Example:</em></p>\n\n<code-example language=\"typescript\">\n  <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>(':increment, * =&gt; enabled, :enter', <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('1s ease', <a href=\"api/animations/keyframes\" class=\"code-anchor\">keyframes</a>([\n    <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ transform: 'scale(1)', offset: 0}),\n    <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ transform: 'scale(1.1)', offset: 0.7}),\n    <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ transform: 'scale(1)', offset: 1})\n  ]))),\n</code-example>\n</li>\n</ul>\n<p translation-result=\"on\">另請注意，在這種情況下：</p><p translation-origin=\"off\">Also note that in such context:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\"><code>void</code> 可用於表明此元素的不存在</p><p translation-origin=\"off\"><code>void</code> can be used to indicate the absence of the element</p>\n\n</li>\n<li>\n<p translation-result=\"on\">星號可以作為匹配任何狀態的萬用字元</p><p translation-origin=\"off\">asterisks can be used as wildcards that match any state</p>\n\n</li>\n<li>\n<p translation-result=\"on\">（由於上述原因，<code>void =&gt; *</code> 等效於 <code>:enter</code>，並且 <code>* =&gt; void</code> 等效於 <code>:leave</code> ）</p><p translation-origin=\"off\">(as a consequence of the above, <code>void =&gt; *</code> is equivalent to <code>:enter</code> and <code>* =&gt; void</code> is\nequivalent to <code>:leave</code>)</p>\n\n</li>\n<li>\n<p translation-result=\"on\"><code>true</code> 和 <code>false</code> 也分別匹配表示式值 <code>1</code> 和 <code>0</code> （但不匹配 <em>truthy</em> 和 <em>falsy</em> 值）</p><p translation-origin=\"off\"><code>true</code> and <code>false</code> also match expression values of <code>1</code> and <code>0</code> respectively (but do not match\n<em>truthy</em> and <em>falsy</em> values)</p>\n\n</li>\n</ul>\n<div class=\"alert is-helpful\">\n<p> Be careful about entering end leaving elements as their transitions present a common\npitfall for developers.</p>\n<p> Note that when an element with a trigger enters the DOM its <code>:enter</code> transition always\ngets executed, but its <code>:leave</code> transition will not be executed if the element is removed\nalongside its parent (as it will be removed \"without warning\" before its transition has\na chance to be executed, the only way that such transition can occur is if the element\nis exiting the DOM on its own).</p>\n</div>\n<h3 id=\"animating-to-a-final-state\" translation-result=\"on\">把動畫播放到最終狀態<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/animations/transition#animating-to-a-final-state\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">Animating to a Final State<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/animations/transition#animating-to-a-final-state\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">如果轉換中的最後一步是對使用不帶 <code><a href=\"api/animations/style\" class=\"code-anchor\">style</a></code> 資料的計時值的 <code><a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>()</code>\n的呼叫，則該步驟會自動被認為是最終動畫弧，以使元素達到最終狀態，在這種情況下，Angular\n會自動新增或刪除 CSS 樣式以確保元素處於正確的最終狀態。</p><p translation-origin=\"off\">If the final step in a transition is a call to <code><a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>()</code> that uses a timing value\nwith no <code><a href=\"api/animations/style\" class=\"code-anchor\">style</a></code> data, that step is automatically considered the final animation arc,\nfor the element to reach the final state, in such case Angular automatically adds or removes\nCSS styles to ensure that the element is in the correct final state.</p>\n\n<h3 id=\"usage-examples\" translation-result=\"on\">使用範例<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/animations/transition#usage-examples\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">Usage Examples<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/animations/transition#usage-examples\"><i class=\"material-icons\">link</i></a></h3>\n\n<ul>\n<li>\n<p translation-result=\"on\">根據觸發器的表示式值應用的過渡動畫</p><p translation-origin=\"off\">Transition animations applied based on\nthe trigger's expression value</p>\n\n<code-example language=\"HTML\">\n&lt;div [@myAnimationTrigger]=\"myStatusExp\"&gt;\n ...\n&lt;/div&gt;\n</code-example>\n<code-example language=\"typescript\">\n<a href=\"api/animations/trigger\" class=\"code-anchor\">trigger</a>(\"myAnimationTrigger\", [\n  ..., // states\n  <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>(\"on =&gt; off, open =&gt; closed\", <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>(500)),\n  <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>(\"* &lt;=&gt; error\", <a href=\"api/animations/query\" class=\"code-anchor\">query</a>('.indicator', <a href=\"api/animations/animateChild\" class=\"code-anchor\">animateChild</a>()))\n])\n</code-example>\n</li>\n<li>\n<p translation-result=\"on\">根據自訂邏輯應用的過渡動畫，具體取決於觸發器的表示式值和提供的引數</p><p translation-origin=\"off\">Transition animations applied based on custom logic dependent\non the trigger's expression value and provided parameters</p>\n\n<code-example language=\"HTML\">\n&lt;div [@myAnimationTrigger]=\"{\n value: stepName,\n params: { target: currentTarget }\n}\"&gt;\n ...\n&lt;/div&gt;\n</code-example>\n<code-example language=\"typescript\">\n<a href=\"api/animations/trigger\" class=\"code-anchor\">trigger</a>(\"myAnimationTrigger\", [\n  ..., // states\n  <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>(\n    (fromState, toState, _element, params) =&gt;\n      ['firststep', 'laststep'].includes(fromState.toLowerCase())\n      &amp;&amp; toState === params?.['target'],\n    <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('1s')\n  )\n])\n</code-example>\n</li>\n</ul>\n\n</section></div>\n</article>\n\n<!-- links to this doc:\n - api/animations\n - api/animations/AnimationMetadataType\n - api/animations/AnimationOptions\n - api/animations/AnimationTransitionMetadata\n - api/animations/animate\n - api/animations/group\n - api/animations/query\n - api/animations/sequence\n - api/animations/stagger\n - api/animations/state\n - api/animations/trigger\n - api/core/Component\n - guide/add-an-animation\n - guide/animation-api-summary\n - guide/animation-transition-timing\n - guide/animations\n - guide/animations-attach-to-html-template\n - guide/complex-animation-sequences\n - guide/elements\n - guide/reusable-animations\n - guide/route-animations\n - guide/router-tutorial-toh\n - guide/transition-and-triggers\n-->\n<!-- links from this doc:\n - /api\n - api/animations\n - api/animations/AnimationMetadata\n - api/animations/AnimationOptions\n - api/animations/AnimationTransitionMetadata\n - api/animations/animate\n - api/animations/animateChild\n - api/animations/keyframes\n - api/animations/query\n - api/animations/style\n - api/animations/transition#animating-to-a-final-state\n - api/animations/transition#state-change-expression\n - api/animations/transition#transition\n - api/animations/transition#usage-examples\n - api/animations/transition#usage-notes\n - api/animations/transition#使用範例\n - api/animations/transition#把動畫播放到最終狀態\n - api/animations/transition#狀態更改表示式\n - api/animations/trigger\n - https://github.com/ng-docs/angular-cn/edit/cn/packages/animations/src/animation_metadata.ts?message=docs(animations)%3A%20請簡述你的修改...#L1296-L1523\n - https://github.com/ng-docs/angular-cn/tree/16.1.0-next.3/packages/animations/src/animation_metadata.ts#L1296-L1523\n-->"}
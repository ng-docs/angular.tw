{"id":"guide/migration-dynamic-flag","title":"Dynamic queries flag migration","contents":"\n\n\n<div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/edit/cn/aio/content/guide/migration-dynamic-flag.md?message=docs%3A%20請簡述你的修改...\" aria-label=\"提供編輯建議\" title=\"提供編輯建議\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n</div>\n\n\n<div class=\"content\">\n  <h1 id=\"dynamic-queries-flag-migration\" translation-result=\"on\">動態查詢標誌的遷移<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-dynamic-flag#dynamic-queries-flag-migration\"><i class=\"material-icons\">link</i></a></h1><h1 translation-origin=\"off\">Dynamic queries flag migration<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-dynamic-flag#dynamic-queries-flag-migration\"><i class=\"material-icons\">link</i></a></h1>\n\n<h2 id=\"what-does-this-migration-do\" translation-result=\"on\">這種遷移是做什麼的？<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-dynamic-flag#what-does-this-migration-do\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">What does this migration do?<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-dynamic-flag#what-does-this-migration-do\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">在 Angular 的 8 版本中，升級原理圖為所有 <code>@<a href=\"api/core/ViewChild\" class=\"code-anchor\">ViewChild</a>()</code> 和 <code>@<a href=\"api/core/ContentChild\" class=\"code-anchor\">ContentChild</a>()</code> 查詢都添加了 <code><a href=\"api/upgrade/static\" class=\"code-anchor\">static</a></code> 標誌。這是改變預設行為的第一步。在版本 9 中，預設值變成了 <code><a href=\"api/upgrade/static\" class=\"code-anchor\">static</a>: false</code>，該標誌變為可選的。</p><p translation-origin=\"off\">In Angular version 8, a schematic added <code><a href=\"api/upgrade/static\" class=\"code-anchor\">static</a></code> flags to all <code>@<a href=\"api/core/ViewChild\" class=\"code-anchor\">ViewChild</a>()</code> and <code>@<a href=\"api/core/ContentChild\" class=\"code-anchor\">ContentChild</a>()</code> queries.\nThis was the first step towards changing the default behavior.\nWith version 9, the default value changes to <code><a href=\"api/upgrade/static\" class=\"code-anchor\">static</a>: false</code> and the flag becomes optional.</p>\n\n<p translation-result=\"on\">該原理圖掃描了編譯中的類，併為每個類檢查這些成員是否有 <code><a href=\"api/upgrade/static\" class=\"code-anchor\">static</a></code> 標誌設定為 <code>false</code> 的 <code>@<a href=\"api/core/ViewChild\" class=\"code-anchor\">ViewChild</a>()</code> 或 <code>@<a href=\"api/core/ContentChild\" class=\"code-anchor\">ContentChild</a>()</code> 查詢。如果是這樣，該原理圖會移除該標誌，因為它現在是預設值了。</p><p translation-origin=\"off\">This schematic scans classes in the compilation and for each class, checks if the members have a <code>@<a href=\"api/core/ViewChild\" class=\"code-anchor\">ViewChild</a>()</code> or <code>@<a href=\"api/core/ContentChild\" class=\"code-anchor\">ContentChild</a>()</code> query with the <code><a href=\"api/upgrade/static\" class=\"code-anchor\">static</a></code> flag set to <code>false</code>.\nIf so, the schematic removes the flag, as it now matches the default.</p>\n\n<p translation-result=\"on\"><strong>之前</strong>：</p><p translation-origin=\"off\"><strong>Before</strong>:</p>\n\n<code-example format=\"typescript\" language=\"typescript\">\n\n@<a href=\"api/core/ViewChild\" class=\"code-anchor\">ViewChild</a>('foo', {<a href=\"api/upgrade/static\" class=\"code-anchor\">static</a>: false}) foo: <a href=\"api/core/ElementRef\" class=\"code-anchor\">ElementRef</a>;\n\n@<a href=\"api/core/ViewChild\" class=\"code-anchor\">ViewChild</a>('bar', {<a href=\"api/upgrade/static\" class=\"code-anchor\">static</a>: true}) bar: <a href=\"api/core/ElementRef\" class=\"code-anchor\">ElementRef</a>;\n\n</code-example>\n<p translation-result=\"on\"><strong>之後</strong>：</p><p translation-origin=\"off\"><strong>After</strong>:</p>\n\n<code-example format=\"typescript\" language=\"typescript\">\n\n@<a href=\"api/core/ViewChild\" class=\"code-anchor\">ViewChild</a>('foo') foo: <a href=\"api/core/ElementRef\" class=\"code-anchor\">ElementRef</a>;\n\n// this <a href=\"api/animations/query\" class=\"code-anchor\">query</a> doesn't change because the <a href=\"api/upgrade/static\" class=\"code-anchor\">static</a> value is true\n@<a href=\"api/core/ViewChild\" class=\"code-anchor\">ViewChild</a>('bar', {<a href=\"api/upgrade/static\" class=\"code-anchor\">static</a>: true}) bar: <a href=\"api/core/ElementRef\" class=\"code-anchor\">ElementRef</a>;\n\n</code-example>\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\"><strong>注意</strong>：<br>\n<code>@<a href=\"api/core/ViewChildren\" class=\"code-anchor\">ViewChildren</a>()</code> 或 <code>@<a href=\"api/core/ContentChildren\" class=\"code-anchor\">ContentChildren</a>()</code> 查詢中不支援該標誌，因此該原理圖不會檢查這些屬性。</p><p translation-origin=\"off\"><strong>NOTE</strong>: <br>\nThe flag is not supported in <code>@<a href=\"api/core/ViewChildren\" class=\"code-anchor\">ViewChildren</a>()</code> or <code>@<a href=\"api/core/ContentChildren\" class=\"code-anchor\">ContentChildren</a>()</code> queries, so the schematic will not check these properties.</p>\n\n</div>\n<h2 id=\"why-is-this-migration-necessary\" translation-result=\"on\">為何這次遷移必不可少？<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-dynamic-flag#why-is-this-migration-necessary\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Why is this migration necessary?<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-dynamic-flag#why-is-this-migration-necessary\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">這個原理圖執行程式碼清理工作來移除與預設值相匹配的 <code><a href=\"api/upgrade/static\" class=\"code-anchor\">static</a></code> 標誌，因為它們不再是必需的。從功能上講，這種程式碼更改應該沒有影響。</p><p translation-origin=\"off\">This schematic performs a code cleanup to remove <code><a href=\"api/upgrade/static\" class=\"code-anchor\">static</a></code> flags that match the default, as they are no longer necessary.\nFunctionally, the code change should be a noop.</p>\n\n<table>\n<thead>\n<tr>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">版本</nt-wrapper><nt-wrapper translation-origin=\"off\">Versions</nt-wrapper></th>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">詳情</nt-wrapper><nt-wrapper translation-origin=\"off\">Details</nt-wrapper></th>\n</tr>\n</thead>\n<tbody>\n\n<tr>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">版本 9 之前</nt-wrapper><nt-wrapper translation-origin=\"off\">Before version 9</nt-wrapper></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">Angular 會根據範本的編寫方式來自動判定查詢應該是靜態的還是動態的。然而，以這種方式處理範本會導致錯誤和意外行為（請參閱<a href=\"guide/static-query-migration#what-does-this-flag-mean\">靜態查詢遷移指南</a>中的更多內容）</nt-wrapper><nt-wrapper translation-origin=\"off\">Angular figured out the static or dynamic nature of a query automatically, based on how the template was written. Looking at templates in this way, however, caused buggy and surprising behavior (see more about that in the <a href=\"guide/static-query-migration#what-does-this-flag-mean\">Static Query Migration Guide</a>).</nt-wrapper></td>\n</tr>\n\n<tr>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">從版本 9 開始</nt-wrapper><nt-wrapper translation-origin=\"off\">As of version 9</nt-wrapper></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">Angular 預設使用動態查詢（<code><a href=\"api/upgrade/static\" class=\"code-anchor\">static</a>: false</code>），簡化了查詢過程。開發人員仍然可以把查詢顯式設定為 <code><a href=\"api/upgrade/static\" class=\"code-anchor\">static</a>: true</code>。</nt-wrapper><nt-wrapper translation-origin=\"off\">Angular uses dynamic queries (<code><a href=\"api/upgrade/static\" class=\"code-anchor\">static</a>: false</code>) by default, which simplifies queries. Developers can still explicitly set a query to <code><a href=\"api/upgrade/static\" class=\"code-anchor\">static</a>: true</code> if necessary.</nt-wrapper></td>\n</tr>\n\n</tbody>\n</table>\n<div class=\"alert is-helpful\">\n<h3 id=\"what-is-the-difference-between-static-and-dynamic-queries\" translation-result=\"on\">靜態查詢和動態查詢有什麼區別？<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-dynamic-flag#what-is-the-difference-between-static-and-dynamic-queries\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">What is the difference between static and dynamic queries?<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-dynamic-flag#what-is-the-difference-between-static-and-dynamic-queries\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\"><code>@<a href=\"api/core/ViewChild\" class=\"code-anchor\">ViewChild</a>()</code> 和 <code>@<a href=\"api/core/ContentChild\" class=\"code-anchor\">ContentChild</a>()</code> 查詢的 <code><a href=\"api/upgrade/static\" class=\"code-anchor\">static</a></code> 選項決定了其查詢結果何時可用。</p><p translation-origin=\"off\">The <code><a href=\"api/upgrade/static\" class=\"code-anchor\">static</a></code> option for <code>@<a href=\"api/core/ViewChild\" class=\"code-anchor\">ViewChild</a>()</code> and <code>@<a href=\"api/core/ContentChild\" class=\"code-anchor\">ContentChild</a>()</code> queries determines when the query results become available.</p>\n\n<table>\n<thead>\n<tr>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">查詢</nt-wrapper><nt-wrapper translation-origin=\"off\">Queries</nt-wrapper></th>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">詳情</nt-wrapper><nt-wrapper translation-origin=\"off\">Details</nt-wrapper></th>\n</tr>\n</thead>\n<tbody>\n\n<tr>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">靜態查詢 (<code><a href=\"api/upgrade/static\" class=\"code-anchor\">static</a>: true</code>)</nt-wrapper><nt-wrapper translation-origin=\"off\">Static queries (<code><a href=\"api/upgrade/static\" class=\"code-anchor\">static</a>: true</code>)</nt-wrapper></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">檢視剛剛被建立，還沒有執行變更檢測之前，此查詢就會解析。但是，其結果永遠不會更新，以反映對檢視的更改，比如對 <code><a href=\"api/common/NgIf\" class=\"code-anchor\">ngIf</a></code> 和 <code><a href=\"api/common/NgFor\" class=\"code-anchor\">ngFor</a></code> 塊的更改。</nt-wrapper><nt-wrapper translation-origin=\"off\">The query resolves once the view has been created, but before change detection runs. The result, though, will never be updated to reflect changes to your view, such as changes to <code><a href=\"api/common/NgIf\" class=\"code-anchor\">ngIf</a></code> and <code><a href=\"api/common/NgFor\" class=\"code-anchor\">ngFor</a></code> blocks.</nt-wrapper></td>\n</tr>\n\n<tr>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">動態查詢 (<code><a href=\"api/upgrade/static\" class=\"code-anchor\">static</a>: false</code>)</nt-wrapper><nt-wrapper translation-origin=\"off\">Dynamic queries (<code><a href=\"api/upgrade/static\" class=\"code-anchor\">static</a>: false</code>)</nt-wrapper></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">此查詢會分別在 <code>ngAfterViewInit()</code> 或 <code>ngAfterContentInit()</code> 之後進行解析。此結果將隨著對檢視的更改而更新，比如對 <code><a href=\"api/common/NgIf\" class=\"code-anchor\">ngIf</a></code> 和 <code><a href=\"api/common/NgFor\" class=\"code-anchor\">ngFor</a></code> 塊的更改。</nt-wrapper><nt-wrapper translation-origin=\"off\">The query resolves after either <code>ngAfterViewInit()</code> or <code>ngAfterContentInit()</code> for <code>@<a href=\"api/core/ViewChild\" class=\"code-anchor\">ViewChild</a>()</code> and <code>@<a href=\"api/core/ContentChild\" class=\"code-anchor\">ContentChild</a>()</code> respectively. The result will be updated for changes to your view, such as changes to <code><a href=\"api/common/NgIf\" class=\"code-anchor\">ngIf</a></code> and <code><a href=\"api/common/NgFor\" class=\"code-anchor\">ngFor</a></code> blocks.</nt-wrapper></td>\n</tr>\n\n</tbody>\n</table>\n<p translation-result=\"on\">要了解更多資訊，請參閱<a href=\"guide/static-query-migration\">靜態查詢遷移指南</a>中的以下條目：</p><p translation-origin=\"off\">For more information, see the following entries in the <a href=\"guide/static-query-migration\">Static Query Migration Guide</a>:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\"><a href=\"guide/static-query-migration#how-do-i-choose-which-static-flag-value-to-use-true-or-false\">如何選擇使用哪個 <code>static</code> 標誌值：<code>true</code> 還是 <code>false</code> ？</a></p><p translation-origin=\"off\"><a href=\"guide/static-query-migration#how-do-i-choose-which-static-flag-value-to-use-true-or-false\">How do I choose which <code>static</code> flag value to use: <code>true</code> or <code>false</code>?</a></p>\n\n</li>\n<li>\n<p translation-result=\"on\"><a href=\"guide/static-query-migration#is-there-a-case-where-i-should-use-static-true\">哪些情況下我應該使用 <code>{static: true}</code> ？</a></p><p translation-origin=\"off\"><a href=\"guide/static-query-migration#is-there-a-case-where-i-should-use-static-true\">Is there a case where I should use <code>{static: true}</code>?</a></p>\n\n</li>\n</ul>\n</div>\n<h2 id=\"what-does-this-mean-for-libraries\" translation-result=\"on\">這對庫來說意味著什麼？<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-dynamic-flag#what-does-this-mean-for-libraries\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">What does this mean for libraries?<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-dynamic-flag#what-does-this-mean-for-libraries\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">為了支援那些仍在執行版本 8 的應用，庫中最安全的選項是保留 <code><a href=\"api/upgrade/static\" class=\"code-anchor\">static</a></code> 標誌，以保持解析時序的一致性。</p><p translation-origin=\"off\">In order to support applications that are still running with version 8, the safest option for libraries is to retain the <code><a href=\"api/upgrade/static\" class=\"code-anchor\">static</a></code> flag to keep the resolution timing consistent.</p>\n\n<table>\n<thead>\n<tr>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">庫和應用的組合</nt-wrapper><nt-wrapper translation-origin=\"off\">Library and application combination</nt-wrapper></th>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">詳情</nt-wrapper><nt-wrapper translation-origin=\"off\">Details</nt-wrapper></th>\n</tr>\n</thead>\n<tbody>\n\n<tr>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">版本 9 的函式庫和版本 8 的應用</nt-wrapper><nt-wrapper translation-origin=\"off\">Libraries on version 9 with applications running version 8</nt-wrapper></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">該原理圖不會在函式庫中執行。只要庫從版本 8 開始就保留了 <code><a href=\"api/upgrade/static\" class=\"code-anchor\">static</a></code> 標誌，就同樣可以在 8 上執行。</nt-wrapper><nt-wrapper translation-origin=\"off\">The schematic won't run on libraries. As long as libraries retain their <code><a href=\"api/upgrade/static\" class=\"code-anchor\">static</a></code> flags from version 8, they should work with apps on 8.</nt-wrapper></td>\n</tr>\n\n<tr>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">版本 8 的函式庫和版本 9 的應用</nt-wrapper><nt-wrapper translation-origin=\"off\">Libraries on version 8 with applications running version 9</nt-wrapper></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">庫中中會定義顯式的標誌。只要帶有顯式標誌，其行為就不會改變。</nt-wrapper><nt-wrapper translation-origin=\"off\">Libraries will have explicit flags defined. The behavior with explicit flags has not changed.</nt-wrapper></td>\n</tr>\n\n</tbody>\n</table>\n<h3 id=\"what-about-applications-using-non-migrated-libraries\" translation-result=\"on\">那些使用未遷移庫的應用呢？<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-dynamic-flag#what-about-applications-using-non-migrated-libraries\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">What about applications using non-migrated libraries?<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-dynamic-flag#what-about-applications-using-non-migrated-libraries\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">因為這只是一個什麼也不做的程式碼清理工作，所以未遷移的函式庫也同樣可以工作。</p><p translation-origin=\"off\">Because this is a code cleanup that is a noop, non-migrated libraries will work the same either way.</p>\n\n<!-- links -->\n<!-- external links -->\n<!-- end links -->\n\n  <div class=\"reviewed\">最後複查時間：2/28/2022</div>\n</div>\n\n\n<!-- links to this doc:\n-->\n<!-- links from this doc:\n - api/animations/query\n - api/common/NgFor\n - api/common/NgIf\n - api/core/ContentChild\n - api/core/ContentChildren\n - api/core/ElementRef\n - api/core/ViewChild\n - api/core/ViewChildren\n - api/upgrade/static\n - guide/migration-dynamic-flag#dynamic-queries-flag-migration\n - guide/migration-dynamic-flag#what-about-applications-using-non-migrated-libraries\n - guide/migration-dynamic-flag#what-does-this-mean-for-libraries\n - guide/migration-dynamic-flag#what-does-this-migration-do\n - guide/migration-dynamic-flag#what-is-the-difference-between-static-and-dynamic-queries\n - guide/migration-dynamic-flag#why-is-this-migration-necessary\n - guide/migration-dynamic-flag#為何這次遷移必不可少\n - guide/migration-dynamic-flag#動態查詢標誌的遷移\n - guide/migration-dynamic-flag#這對庫來說意味著什麼\n - guide/migration-dynamic-flag#這種遷移是做什麼的\n - guide/migration-dynamic-flag#那些使用未遷移庫的應用呢\n - guide/migration-dynamic-flag#靜態查詢和動態查詢有什麼區別\n - guide/static-query-migration\n - guide/static-query-migration#how-do-i-choose-which-static-flag-value-to-use-true-or-false\n - guide/static-query-migration#is-there-a-case-where-i-should-use-static-true\n - guide/static-query-migration#what-does-this-flag-mean\n - https://github.com/ng-docs/angular-cn/edit/cn/aio/content/guide/migration-dynamic-flag.md?message=docs%3A%20請簡述你的修改...\n-->"}
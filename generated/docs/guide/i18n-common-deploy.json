{"id":"guide/i18n-common-deploy","title":"Deploy multiple locales","contents":"\n\n\n<div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/edit/cn/aio/content/guide/i18n-common-deploy.md?message=docs%3A%20請簡述你的修改...\" aria-label=\"提供編輯建議\" title=\"提供編輯建議\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n</div>\n\n\n<div class=\"content\">\n  <h1 id=\"deploy-multiple-locales\" translation-result=\"on\">部署多個語言環境<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/i18n-common-deploy#deploy-multiple-locales\"><i class=\"material-icons\">link</i></a></h1><h1 translation-origin=\"off\">Deploy multiple locales<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/i18n-common-deploy#deploy-multiple-locales\"><i class=\"material-icons\">link</i></a></h1>\n\n<p translation-result=\"on\">如果 <code>myapp</code> 是包含專案可分發檔案的目錄，你通常會在語言環境目錄中為不同的語言環境提供不同的版本，比如法語版的 <code>myapp/fr</code> 和西班牙語版的 <code>myapp/es</code>。</p><p translation-origin=\"off\">If <code>myapp</code> is the directory that contains the distributable files of your project, you typically make different versions available for different locales in locale directories.\nFor example, your French version is located in the <code>myapp/fr</code> directory and the Spanish version is located in the <code>myapp/es</code> directory.</p>\n\n<p translation-result=\"on\">帶有 <code>href</code> 屬性的 HTML <code>base</code> 標籤指定了相對連結的基本 URI 或 URL。如果你將工作空間建構配置檔案 <a href=\"guide/workspace-config\" title=\"Angular workspace configuration | Angular\"><code>angular.json</code></a> 中的 <code>\"localize\"</code> 選項設定為 <code>true</code> 或語言環境 ID 陣列，CLI 會為應用程式的每個版本調整 base <code>href</code>。要為應用程式的每個版本調整 base <code>href</code>，CLI 會將語言環境新增到配置的 <code>\"baseHref\"</code> 中。在工作區配置檔案 <a href=\"guide/workspace-config\" title=\"Angular workspace configuration | Angular\"><code>angular.json</code></a> 中為每個語言環境指定 <code>\"baseHref\"</code>。以下範例展示了設定為空字串的 <code>\"baseHref\"</code>。</p><p translation-origin=\"off\">The HTML <code>base</code> tag with the <code>href</code> attribute specifies the base URI, or URL, for relative links.\nIf you set the <code>\"localize\"</code> option in <a href=\"guide/workspace-config\" title=\"Angular workspace configuration | Angular\"><code>angular.json</code></a> workspace build configuration file to <code>true</code> or to an array of locale IDs, the CLI adjusts the base <code>href</code> for each version of the application.\nTo adjust the base <code>href</code> for each version of the application, the CLI adds the locale to the configured <code>\"baseHref\"</code>.\nSpecify the <code>\"baseHref\"</code> for each locale in your <a href=\"guide/workspace-config\" title=\"Angular workspace configuration | Angular\"><code>angular.json</code></a> workspace build configuration file.\nThe following example displays <code>\"baseHref\"</code> set to an empty string.</p>\n\n<code-example header=\"angular.json\" path=\"i18n/angular.json\" region=\"i18n-baseHref\">\n  \"projects\": {\n    \"angular.io-example\": {\n      // ...\n      \"i18n\": {\n        \"sourceLocale\": \"en-US\",\n        \"locales\": {\n          \"fr\": {\n            \"translation\": \"src/locale/messages.fr.xlf\",\n            \"baseHref\": \"\"\n          }\n        }\n      },\n      \"architect\": {\n        // ...\n      }\n    }\n  }\n  // ...\n}\n\n</code-example>\n<p translation-result=\"on\">此外，要在編譯時宣告 base <code>href</code>，請將在 CLI 中使用帶有 <code>--baseHref</code> 選項的 <a href=\"cli/build\" title=\"ng build | CLI | Angular\"> <code>ng build</code> </a>。</p><p translation-origin=\"off\">Also, to declare the base <code>href</code> at compile time, use the CLI <code>--baseHref</code> option with <a href=\"cli/build\" title=\"ng build | CLI | Angular\"><code>ng build</code></a>.</p>\n\n<h2 id=\"configure-a-server\" translation-result=\"on\">配置伺服器<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/i18n-common-deploy#configure-a-server\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Configure a server<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/i18n-common-deploy#configure-a-server\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">多語言的典型部署方式是為來自不同子目錄的每種語言提供服務。使用 <code>Accept-Language</code> HTTP 標頭將使用者重新導向到瀏覽器中定義的首選語言。如果使用者未定義首選語言，或者首選語言不可用，則伺服器將回退到預設語言。要更改語言，就轉到另一個子目錄。\n子目錄的更改通常使用應用程式中實現的選單進行。</p><p translation-origin=\"off\">Typical deployment of multiple languages serve each language from a different subdirectory.\nUsers are redirected to the preferred language defined in the browser using the <code>Accept-Language</code> HTTP header.\nIf the user has not defined a preferred language, or if the preferred language is not available, then the server falls back to the default language.\nTo change the language, change your current location to another subdirectory.\nThe change of subdirectory often occurs using a menu implemented in the application.</p>\n\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\">有關如何將應用程式部署到遠端伺服器的更多資訊，請參閱<a href=\"guide/deployment\" title=\"Deployment | Angular\">部署</a>。</p><p translation-origin=\"off\">For more information on how to deploy apps to a remote server, see <a href=\"guide/deployment\" title=\"Deployment | Angular\">Deployment</a>.</p>\n\n</div>\n<h3 id=\"nginx-example\" translation-result=\"on\">Nginx 範例<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/i18n-common-deploy#nginx-example\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">Nginx example<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/i18n-common-deploy#nginx-example\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">以下範例展示了 Nginx 配置。</p><p translation-origin=\"off\">The following example displays an Nginx configuration.</p>\n\n<code-example path=\"i18n/doc-files/nginx.conf\" language=\"nginx\">\n<a href=\"api/common/http\" class=\"code-anchor\">http</a> {\n    # Browser preferred language detection (does NOT require\n    # AcceptLanguageModule)\n    map $http_accept_language $accept_language {\n        ~*^de de;\n        ~*^fr fr;\n        ~*^en en;\n    }\n    # ...\n}\n\nserver {\n    listen 80;\n    server_name localhost;\n    root /www/data;\n\n    # Fallback to default language if no preference defined by <a href=\"api/animations/browser\" class=\"code-anchor\">browser</a>\n    if ($accept_language ~ \"^$\") {\n        set $accept_language \"fr\";\n    }\n\n    # Redirect \"/\" to Angular application in the preferred language of the <a href=\"api/animations/browser\" class=\"code-anchor\">browser</a>\n    rewrite ^/$ /$accept_language permanent;\n\n    # Everything under the Angular application is always redirected to Angular in the\n    # correct language\n    location ~ ^/(fr|de|en) {\n        try_files $uri /$1/index.html?$args;\n    }\n    # ...\n}\n\n\n</code-example>\n<h3 id=\"apache-example\" translation-result=\"on\">Apache 範例<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/i18n-common-deploy#apache-example\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">Apache example<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/i18n-common-deploy#apache-example\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">以下範例展示了 Apache 配置。</p><p translation-origin=\"off\">The following example displays an Apache configuration.</p>\n\n<code-example path=\"i18n/doc-files/apache2.conf\" language=\"apache\">\n&lt;VirtualHost *:80&gt;\n    ServerName localhost\n    DocumentRoot /www/data\n    &lt;Directory \"/www/data\"&gt;\n        RewriteEngine on\n        RewriteBase /\n        RewriteRule ^../index\\.html$ - [L]\n\n        RewriteCond %{REQUEST_FILENAME} !-f\n        RewriteCond %{REQUEST_FILENAME} !-d\n        RewriteRule (..) $1/index.html [L]\n\n        RewriteCond %{HTTP:Accept-Language} ^de [NC]\n        RewriteRule ^$ /de/ [R]\n\n        RewriteCond %{HTTP:Accept-Language} ^en [NC]\n        RewriteRule ^$ /en/ [R]\n\n        RewriteCond %{HTTP:Accept-Language} !^en [NC]\n        RewriteCond %{HTTP:Accept-Language} !^de [NC]\n        RewriteRule ^$ /fr/ [R]\n    &lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n\n\n</code-example>\n<!-- links -->\n<!-- external links -->\n<!-- end links -->\n\n  <div class=\"reviewed\">最後複查時間：2/28/2022</div>\n</div>\n\n\n<!-- links to this doc:\n - guide/i18n-common-merge\n - guide/i18n-common-overview\n-->\n<!-- links from this doc:\n - api/animations/browser\n - api/common/http\n - cli/build\n - guide/deployment\n - guide/i18n-common-deploy#apache-example\n - guide/i18n-common-deploy#apache-範例\n - guide/i18n-common-deploy#configure-a-server\n - guide/i18n-common-deploy#deploy-multiple-locales\n - guide/i18n-common-deploy#nginx-example\n - guide/i18n-common-deploy#nginx-範例\n - guide/i18n-common-deploy#部署多個語言環境\n - guide/i18n-common-deploy#配置伺服器\n - guide/workspace-config\n - https://github.com/ng-docs/angular-cn/edit/cn/aio/content/guide/i18n-common-deploy.md?message=docs%3A%20請簡述你的修改...\n-->"}
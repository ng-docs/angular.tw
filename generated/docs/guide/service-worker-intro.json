{"id":"guide/service-worker-intro","title":"Angular service worker introduction","contents":"\n\n\n<div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/edit/cn/aio/content/guide/service-worker-intro.md?message=docs%3A%20請簡述你的修改...\" aria-label=\"提供編輯建議\" title=\"提供編輯建議\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n</div>\n\n\n<div class=\"content\">\n  <h1 id=\"angular-service-worker-introduction\" translation-result=\"on\">Angular 的 Service Worker 簡介<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-intro#angular-service-worker-introduction\"><i class=\"material-icons\">link</i></a></h1><h1 translation-origin=\"off\">Angular service worker introduction<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-intro#angular-service-worker-introduction\"><i class=\"material-icons\">link</i></a></h1>\n\n<p translation-result=\"on\">Service Worker 可以增強傳統的 Web 釋出模式，並使應用程式能夠提供可與原生程式碼（它執行在你的作業系統和硬體層面）媲美的高可靠、高效能的使用者體驗。為 Angular 應用新增 Service Worker 是把應用轉換成<a href=\"https://web.dev/progressive-web-apps/\">漸進式應用（PWA）</a>的步驟之一。</p><p translation-origin=\"off\">Service workers augment the traditional web deployment model and empower applications to deliver a user experience with the reliability and performance on par with code that is written to run on your operating system and hardware.\nAdding a service worker to an Angular application is one of the steps for turning an application into a <a href=\"https://web.dev/progressive-web-apps/\">Progressive Web App</a> (also known as a PWA).</p>\n\n<p translation-result=\"on\">簡單來說，Service Worker 就是一段執行在 Web 瀏覽器中，併為應用管理快取的指令碼。</p><p translation-origin=\"off\">At its simplest, a service worker is a script that runs in the web browser and manages caching for an application.</p>\n\n<p translation-result=\"on\">Service Worker 的功能就像一個網路代理。它們會攔截所有由應用發出的 HTTP 請求，並選擇如何給出響應。比如，它們可以查詢區域性快取，如果有快取的響應資料，就用它做出響應。這種代理行為不會侷限於透過程式呼叫 API（比如 <code>fetch</code>）發起的請求，還包括 HTML 中對資源的參考，甚至對 <code>index.html</code> 的首次請求。基於 Service Worker 的快取是完全可程式設計的，並且不依賴於伺服器端指定的那些控制快取策略的頭。</p><p translation-origin=\"off\">Service workers function as a network proxy.\nThey intercept all outgoing HTTP requests made by the application and can choose how to respond to them.\nFor example, they can query a local cache and deliver a cached response if one is available.\nProxying isn't limited to requests made through programmatic APIs, such as <code>fetch</code>; it also includes resources referenced in HTML and even the initial request to <code>index.html</code>.\nService worker-based caching is thus completely programmable and doesn't rely on server-specified caching headers.</p>\n\n<p translation-result=\"on\">不像應用中的其它指令碼（如 Angular 的應用包），Service Worker 在使用者關閉瀏覽器頁標籤時仍然會被保留。下次瀏覽器載入本應用時，Service Worker 會首先載入，然後攔截載入本應用時的對每一項資源的請求。如果這個 Service Worker 就是為此而設計的，它就能<em>完全滿足應用載入時的需求，而不需要依賴網路</em>。</p><p translation-origin=\"off\">Unlike the other scripts that make up an application, such as the Angular application bundle, the service worker is preserved after the user closes the tab.\nThe next time that browser loads the application, the service worker loads first, and can intercept every request for resources to load the application.\nIf the service worker is designed to do so, it can <em>completely satisfy the loading of the application, without the need for the network</em>.</p>\n\n<p translation-result=\"on\">即使在快速可靠的網路中，往返延遲也可能在載入應用程式時產生顯著的延遲。使用 Service Worker 來減少對網路的依賴可以顯著改善使用者體驗。</p><p translation-origin=\"off\">Even across a fast reliable network, round-trip delays can introduce significant latency when loading the application.\nUsing a service worker to reduce dependency on the network can significantly improve the user experience.</p>\n\n<h2 id=\"service-workers-in-angular\" translation-result=\"on\">Angular 中的 Service Worker<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-intro#service-workers-in-angular\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Service workers in Angular<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-intro#service-workers-in-angular\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">作為單頁面應用，Angular 應用可以受益於 Service Worker 的優勢。從版本 5.0.0 開始，Angular 提供了一份 Service Worker 的實現。Angular 開發人員可以利用 Service Worker，並受益於其增強的可靠性和效能，而無需再針對底層 API 寫程式碼。</p><p translation-origin=\"off\">Angular applications, as single-page applications, are in a prime position to benefit from the advantages of service workers.\nStarting with version 5.0.0, Angular ships with a service worker implementation.\nAngular developers can take advantage of this service worker and benefit from the increased reliability and performance it provides, without needing to code against low-level APIs.</p>\n\n<p translation-result=\"on\">Angular 的 Service Worker 的設計目標是最佳化那些使用慢速、不可靠網路的終端使用者的體驗，同時還要儘可能減小提供過期內容的風險。</p><p translation-origin=\"off\">Angular's service worker is designed to optimize the end user experience of using an application over a slow or unreliable network connection, while also minimizing the risks of serving outdated content.</p>\n\n<p translation-result=\"on\">為了達成此目標，Angular Service Worker 的行為遵循下列設計原則：</p><p translation-origin=\"off\">To achieve this, the Angular service worker follows these guidelines:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\">像安裝原生應用一樣快取應用。該應用作為整體被快取，它的所有檔案作為整體進行更新。</p><p translation-origin=\"off\">Caching an application is like installing a native application.\nThe application is cached as one unit, and all files update together.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">正在執行的應用使用所有檔案的同一版本繼續執行。不要突然開始接收來自新版本的、可能不相容的快取檔案。</p><p translation-origin=\"off\">A running application continues to run with the same version of all files.\nIt does not suddenly start receiving cached files from a newer version, which are likely incompatible.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">當用戶重新整理本應用時，他們會看到最新的被完全快取的版本。新的頁標籤中會載入最新的快取程式碼。</p><p translation-origin=\"off\">When users refresh the application, they see the latest fully cached version.\nNew tabs load the latest cached code.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">在更改釋出之後，相對較快的在後台進行更新。在一次完整的更新完成之前，仍然使用應用的上一個版本。</p><p translation-origin=\"off\">Updates happen in the background, relatively quickly after changes are published.\nThe previous version of the application is served until an update is installed and ready.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">只要有可能，Service Worker 就會盡量節省頻寬。它只會下載那些發生了變化的資源。</p><p translation-origin=\"off\">The service worker conserves bandwidth when possible.\nResources are only downloaded if they've changed.</p>\n\n</li>\n</ul>\n<p translation-result=\"on\">要支援這些行為，Angular 的 Service Worker 會從伺服器上下載一個 <code>manifest</code> 檔案。\n這個 <code>manifest</code> 檔案（不同於 <a href=\"https://developer.mozilla.org/docs/Web/Manifest\">web 應用的 manifest</a>）描述要快取的資源，幷包含每個檔案內容的雜湊值。\n當釋出了應用的一個新版本時，<code>manifest</code> 的內容就會改變，通知 Service Worker 應該下載並快取應用的一個新版本了。\n這個 manifest 是從 CLI 產生的一個名叫 <code>ngsw-config.json</code> 的檔案中產生的。</p><p translation-origin=\"off\">To support these behaviors, the Angular service worker loads a <em>manifest</em> file from the server.\nThe file, called <code>ngsw.json</code> (not to be confused with the <a href=\"https://developer.mozilla.org/docs/Web/Manifest\">web app manifest</a>), describes the resources to cache and includes hashes of every file's contents.\nWhen an update to the application is deployed, the contents of the manifest change, informing the service worker that a new version of the application should be downloaded and cached.\nThis manifest is generated from a CLI-generated configuration file called <code>ngsw-config.json</code>.</p>\n\n<p translation-result=\"on\">安裝 Angular 的 Service Worker 就像引入一個 <code><a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a></code> 一樣簡單。除了使用瀏覽器註冊 Angular 的 Service Worker 之外，還要製作一些可供注入的服務，它們可以與 Service Worker 互動，並控制它。比如，應用可以要求當新的更新已經就緒時通知自己，或要求 Service Worker 檢查伺服器，看是否有可用的更新。</p><p translation-origin=\"off\">Installing the Angular service worker is as straightforward as including an <code><a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a></code>.\nIn addition to registering the Angular service worker with the browser, this also makes a few services available for injection which interact with the service worker and can be used to control it.\nFor example, an application can ask to be notified when a new update becomes available, or an application can ask the service worker to check the server for available updates.</p>\n\n<h2 id=\"prerequisites\" translation-result=\"on\">前提條件<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-intro#prerequisites\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Prerequisites<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-intro#prerequisites\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">要使用 Angular Service Worker 的所有功能，請使用最新版本的 Angular 和 Angular CLI。</p><p translation-origin=\"off\">To make use of all the features of Angular service workers, use the latest versions of Angular and the Angular CLI.</p>\n\n<p translation-result=\"on\">要註冊 Service Worker，必須透過 HTTPS 而非 HTTP 存取該應用程式。瀏覽器會忽略透過不安全連線存取的頁面上的 Service Worker。原因是 Service Worker 非常強大，因此需要格外小心，以確保 Service Worker 的指令碼未被篡改。</p><p translation-origin=\"off\">For service workers to be registered, the application must be accessed over HTTPS, not HTTP.\nBrowsers ignore service workers on pages that are served over an insecure connection.\nThe reason is that service workers are quite powerful, so extra care is needed to ensure the service worker script has not been tampered with.</p>\n\n<p translation-result=\"on\">這條規則有一個例外：為了方便本地開發，當存取 <code>localhost</code> 上的應用時，瀏覽器<em>不</em>要求安全連線。</p><p translation-origin=\"off\">There is one exception to this rule: to make local development more straightforward, browsers do <em>not</em> require a secure connection when accessing an application on <code>localhost</code>.</p>\n\n<h3 id=\"browser-support\" translation-result=\"on\">瀏覽器支援<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-intro#browser-support\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">Browser support<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-intro#browser-support\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">要從 Angular Service Worker 中受益，你的應用必須在支援 Service Worker 的 Web 瀏覽器中執行。當前，最新版本的 Chrome，Firefox，Edge，Safari，Opera，UC 瀏覽器（Android 版）和 Samsung Internet 支援 Service Worker。而 IE 和 Opera Mini 等瀏覽器不支援 Service Worker。</p><p translation-origin=\"off\">To benefit from the Angular service worker, your application must run in a web browser that supports service workers in general.\nCurrently, service workers are supported in the latest versions of Chrome, Firefox, Edge, Safari, Opera, UC Browser (Android version) and Samsung Internet.\nBrowsers like IE and Opera Mini do not support service workers.</p>\n\n<p translation-result=\"on\">如果使用者透過不支援 Service Worker 的瀏覽器存取你的應用程式，則該 Service Worker 不會註冊，並且不會發生相關行為，比如離線快取管理和推送通知。進一步來說：</p><p translation-origin=\"off\">If the user is accessing your application with a browser that does not support service workers, the service worker is not registered and related behavior such as offline cache management and push notifications does not happen.\nMore specifically:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\">瀏覽器不會下載 Service Worker 指令碼和 <code>ngsw.json</code> 清單檔案。</p><p translation-origin=\"off\">The browser does not download the service worker script and the <code>ngsw.json</code> manifest file</p>\n\n</li>\n<li>\n<p translation-result=\"on\">主動嘗試與 Service Worker 進行互動，比如呼叫 <code><a href=\"api/service-worker/SwUpdate#checkForUpdate\" class=\"code-anchor\">SwUpdate.checkForUpdate()</a></code>，會返回被拒絕的承諾（Promise）</p><p translation-origin=\"off\">Active attempts to interact with the service worker, such as calling <code><a href=\"api/service-worker/SwUpdate#checkForUpdate\" class=\"code-anchor\">SwUpdate.checkForUpdate()</a></code>, return rejected promises</p>\n\n</li>\n<li>\n<p translation-result=\"on\">相關服務（比如 <code><a href=\"api/service-worker/SwUpdate#available\" class=\"code-anchor\">SwUpdate.available</a></code>）的可觀察事件不會觸發</p><p translation-origin=\"off\">The observable events of related services, such as <code><a href=\"api/service-worker/SwUpdate#available\" class=\"code-anchor\">SwUpdate.available</a></code>, are not triggered</p>\n\n</li>\n</ul>\n<p translation-result=\"on\">強烈建議你確保即使在瀏覽器中沒有 Service Worker 支援的情況下，你的應用也可以正常執行。儘管不受支援的瀏覽器會忽略 Service Worker 快取，但如果應用程式嘗試與 Service Worker 進行互動，它將仍然會報告錯誤。比如，呼叫 <code><a href=\"api/service-worker/SwUpdate#checkForUpdate\" class=\"code-anchor\">SwUpdate.checkForUpdate()</a></code> 將返回被拒絕的 Promise。為避免此類錯誤，你可以使用 <code><a href=\"api/service-worker/SwUpdate#isEnabled\" class=\"code-anchor\">SwUpdate.isEnabled</a>()</code> 檢查是否啟用了 Angular Service Worker。</p><p translation-origin=\"off\">It is highly recommended that you ensure that your application works even without service worker support in the browser.\nAlthough an unsupported browser ignores service worker caching, it still reports errors if the application attempts to interact with the service worker.\nFor example, calling <code><a href=\"api/service-worker/SwUpdate#checkForUpdate\" class=\"code-anchor\">SwUpdate.checkForUpdate()</a></code> returns rejected promises.\nTo avoid such an error, check whether the Angular service worker is enabled using <code><a href=\"api/service-worker/SwUpdate#isEnabled\" class=\"code-anchor\">SwUpdate.isEnabled</a></code>.</p>\n\n<p translation-result=\"on\">要了解關於其它支援 Service Worker 的瀏覽器的更多資訊，請參閱 <a href=\"https://caniuse.com/#feat=serviceworkers\">Can I Use</a> 頁面和 <a href=\"https://developer.mozilla.org/docs/Web/API/Service_Worker_API\">MDN 文件</a>。</p><p translation-origin=\"off\">To learn more about other browsers that are service worker ready, see the <a href=\"https://caniuse.com/#feat=serviceworkers\">Can I Use</a> page and <a href=\"https://developer.mozilla.org/docs/Web/API/Service_Worker_API\">MDN docs</a>.</p>\n\n<h2 id=\"related-resources\" translation-result=\"on\">相關資源<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-intro#related-resources\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Related resources<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-intro#related-resources\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">本節中的其餘文章專門針對 Service Worker 的 Angular 實現。</p><p translation-origin=\"off\">The rest of the articles in this section specifically address the Angular implementation of service workers.</p>\n\n<ul>\n<li>\n<p translation-result=\"on\"><a href=\"guide/app-shell\">應用外殼</a></p><p translation-origin=\"off\"><a href=\"guide/app-shell\">App Shell</a></p>\n\n</li>\n<li>\n<p translation-result=\"on\"><a href=\"guide/service-worker-communications\">與 Service Worker 通訊</a>.</p><p translation-origin=\"off\"><a href=\"guide/service-worker-communications\">Service Worker Communication</a></p>\n\n</li>\n<li>\n<p translation-result=\"on\"><a href=\"guide/service-worker-notifications\">Service Worker 通知</a></p><p translation-origin=\"off\"><a href=\"guide/service-worker-notifications\">Service Worker Notifications</a></p>\n\n</li>\n<li>\n<p translation-result=\"on\"><a href=\"guide/service-worker-devops\">生產環境下的 Service Worker</a>。</p><p translation-origin=\"off\"><a href=\"guide/service-worker-devops\">Service Worker in Production</a></p>\n\n</li>\n<li>\n<p translation-result=\"on\"><a href=\"guide/service-worker-config\">Service Worker 配置</a>。</p><p translation-origin=\"off\"><a href=\"guide/service-worker-config\">Service Worker Configuration</a></p>\n\n</li>\n</ul>\n<p translation-result=\"on\">要了解更多關於 Service Worker 的普遍性資訊，參閱 <a href=\"https://developers.google.com/web/fundamentals/primers/service-workers\">Service Worker 簡介</a>。</p><p translation-origin=\"off\">For more information about service workers in general, see <a href=\"https://developers.google.com/web/fundamentals/primers/service-workers\">Service Workers: an Introduction</a>.</p>\n\n<p translation-result=\"on\">要了解關於瀏覽器支援度的更多資訊，參閱 <a href=\"https://developers.google.com/web/fundamentals/primers/service-workers\">Service Worker 簡介</a> 中的<a href=\"https://developers.google.com/web/fundamentals/primers/service-workers/#browser_support\">瀏覽器支援</a>部分、Jake Archibald 寫的<a href=\"https://jakearchibald.github.io/isserviceworkerready\">Serviceworker 好了嗎？</a>和 <a href=\"https://caniuse.com/serviceworkers\">Can I Use</a>。</p><p translation-origin=\"off\">For more information about browser support, see the <a href=\"https://developers.google.com/web/fundamentals/primers/service-workers/#browser_support\">browser support</a> section of <a href=\"https://developers.google.com/web/fundamentals/primers/service-workers\">Service Workers: an Introduction</a>, Jake Archibald's <a href=\"https://jakearchibald.github.io/isserviceworkerready\">Is Serviceworker ready?</a>, and <a href=\"https://caniuse.com/serviceworkers\">Can I Use</a>.</p>\n\n<p translation-result=\"on\">關於其它建議和範例，請參閱：</p><p translation-origin=\"off\">For additional recommendations and examples, see:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\"><a href=\"https://web.dev/precaching-with-the-angular-service-worker\">使用 Angular Service Worker 進行預快取</a></p><p translation-origin=\"off\"><a href=\"https://web.dev/precaching-with-the-angular-service-worker\">Precaching with Angular Service Worker</a></p>\n\n</li>\n<li>\n<p translation-result=\"on\"><a href=\"https://web.dev/creating-pwa-with-angular-cli\">使用 Angular CLI 建立 PWA</a></p><p translation-origin=\"off\"><a href=\"https://web.dev/creating-pwa-with-angular-cli\">Creating a PWA with Angular CLI</a></p>\n\n</li>\n</ul>\n<h2 id=\"next-steps\" translation-result=\"on\">下一步<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-intro#next-steps\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Next steps<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-intro#next-steps\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">要開始使用 Angular service Worker，參閱 <a href=\"guide/service-worker-getting-started\">Service Worker 快速上手</a>。</p><p translation-origin=\"off\">To begin using Angular service workers, see <a href=\"guide/service-worker-getting-started\">Getting Started with service workers</a>.</p>\n\n<!-- links -->\n<!-- external links -->\n<!-- end links -->\n\n  <div class=\"reviewed\">最後複查時間：2/28/2022</div>\n</div>\n\n\n<!-- links to this doc:\n - api/service-worker\n - guide/architecture-next-steps\n - guide/developer-guide-overview\n - guide/glossary\n - guide/libraries\n - guide/service-worker-getting-started\n - guide/what-is-angular\n-->\n<!-- links from this doc:\n - api/core/NgModule\n - api/service-worker/SwUpdate#available\n - api/service-worker/SwUpdate#checkForUpdate\n - api/service-worker/SwUpdate#isEnabled\n - guide/app-shell\n - guide/service-worker-communications\n - guide/service-worker-config\n - guide/service-worker-devops\n - guide/service-worker-getting-started\n - guide/service-worker-intro#angular-service-worker-introduction\n - guide/service-worker-intro#angular-中的-service-worker\n - guide/service-worker-intro#angular-的-service-worker-簡介\n - guide/service-worker-intro#browser-support\n - guide/service-worker-intro#next-steps\n - guide/service-worker-intro#prerequisites\n - guide/service-worker-intro#related-resources\n - guide/service-worker-intro#service-workers-in-angular\n - guide/service-worker-intro#下一步\n - guide/service-worker-intro#前提條件\n - guide/service-worker-intro#瀏覽器支援\n - guide/service-worker-intro#相關資源\n - guide/service-worker-notifications\n - https://caniuse.com/#feat=serviceworkers\n - https://caniuse.com/serviceworkers\n - https://developer.mozilla.org/docs/Web/API/Service_Worker_API\n - https://developer.mozilla.org/docs/Web/Manifest\n - https://developers.google.com/web/fundamentals/primers/service-workers\n - https://developers.google.com/web/fundamentals/primers/service-workers/#browser_support\n - https://github.com/ng-docs/angular-cn/edit/cn/aio/content/guide/service-worker-intro.md?message=docs%3A%20請簡述你的修改...\n - https://jakearchibald.github.io/isserviceworkerready\n - https://web.dev/creating-pwa-with-angular-cli\n - https://web.dev/precaching-with-the-angular-service-worker\n - https://web.dev/progressive-web-apps/\n-->"}
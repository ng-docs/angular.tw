{"id":"guide/hierarchical-dependency-injection","title":"Hierarchical injectors","contents":"\n\n\n<div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/edit/cn/aio/content/guide/hierarchical-dependency-injection.md?message=docs%3A%20è«‹ç°¡è¿°ä½ çš„ä¿®æ”¹...\" aria-label=\"æä¾›ç·¨è¼¯å»ºè­°\" title=\"æä¾›ç·¨è¼¯å»ºè­°\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n</div>\n\n\n<div class=\"content\">\n  <h1 id=\"hierarchical-injectors\" translation-result=\"on\">å¤šç´šæ³¨å…¥å™¨<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#hierarchical-injectors\"><i class=\"material-icons\">link</i></a></h1><h1 translation-origin=\"off\">Hierarchical injectors<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#hierarchical-injectors\"><i class=\"material-icons\">link</i></a></h1>\n\n<p translation-result=\"on\">Angular ä¸­çš„æ³¨å…¥å™¨æœ‰ä¸€äº›è¦å‰‡ï¼Œä½ å¯ä»¥åˆ©ç”¨é€™äº›è¦å‰‡ä¾†åœ¨æ‡‰ç”¨ç¨‹å¼ä¸­ç²å¾—æ‰€éœ€çš„å¯æ³¨å…¥ç‰©ä»¶å¯è¦‹æ€§ã€‚é€šéäº†è§£é€™äº›è¦å‰‡ï¼Œå¯ä»¥ç¢ºå®šæ‡‰åœ¨å“ªå€‹ NgModuleã€å…ƒä»¶æˆ–æŒ‡ä»¤ä¸­å®£å‘Šæœå‹™æä¾›è€…ã€‚</p><p translation-origin=\"off\">Injectors in Angular have rules that you can leverage to achieve the desired visibility of injectables in your applications.\nBy understanding these rules, you can determine in which NgModule, Component, or Directive you should declare a provider.</p>\n\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\"><strong>æ³¨æ„</strong>ï¼š<br>\næœ¬ä¸»é¡Œä½¿ç”¨ä»¥ä¸‹è±¡å½¢åœ–ã€‚</p><p translation-origin=\"off\"><strong>NOTE</strong>:<br>\nThis topic uses the following pictographs.</p>\n\n<table>\n<thead>\n<tr>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">html å¯¦é«”</nt-wrapper><nt-wrapper translation-origin=\"off\">html entities</nt-wrapper></th>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">è±¡å½¢æ–‡å­—</nt-wrapper><nt-wrapper translation-origin=\"off\">pictographs</nt-wrapper></th>\n</tr>\n</thead>\n<tbody>\n\n<tr>\n<td align=\"left\"><code>ğŸŒº</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">ç´…èŠ™è“‰ï¼ˆ<code>ğŸŒº</code>ï¼‰</nt-wrapper><nt-wrapper translation-origin=\"off\">red hibiscus (<code>ğŸŒº</code>)</nt-wrapper></td>\n</tr>\n\n<tr>\n<td align=\"left\"><code>ğŸŒ»</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">å‘æ—¥è‘µï¼ˆ<code>ğŸŒ»</code>ï¼‰</nt-wrapper><nt-wrapper translation-origin=\"off\">sunflower (<code>ğŸŒ»</code>)</nt-wrapper></td>\n</tr>\n\n<tr>\n<td align=\"left\"><code>ğŸŒ·</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">é¬±é‡‘é¦™ (<code>ğŸŒ·</code>)</nt-wrapper><nt-wrapper translation-origin=\"off\">tulip (<code>ğŸŒ·</code>)</nt-wrapper></td>\n</tr>\n\n<tr>\n<td align=\"left\"><code>ğŸŒ¿</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">è•¨é¡ ( <code>ğŸŒ¿</code> )</nt-wrapper><nt-wrapper translation-origin=\"off\">fern (<code>ğŸŒ¿</code>)</nt-wrapper></td>\n</tr>\n\n<tr>\n<td align=\"left\"><code>ğŸ</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">æ¥“è‘‰ï¼ˆ<code>ğŸ</code>ï¼‰</nt-wrapper><nt-wrapper translation-origin=\"off\">maple leaf (<code>ğŸ</code>)</nt-wrapper></td>\n</tr>\n\n<tr>\n<td align=\"left\"><code>ğŸ³</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">é¯¨é­š ( <code>ğŸ³</code> )</nt-wrapper><nt-wrapper translation-origin=\"off\">whale (<code>ğŸ³</code>)</nt-wrapper></td>\n</tr>\n\n<tr>\n<td align=\"left\"><code>ğŸ¶</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">ç‹— ( <code>ğŸ¶</code> )</nt-wrapper><nt-wrapper translation-origin=\"off\">dog (<code>ğŸ¶</code>)</nt-wrapper></td>\n</tr>\n\n<tr>\n<td align=\"left\"><code>ğŸ¦”</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">åˆºèŸ ( <code>ğŸ¦”</code> )</nt-wrapper><nt-wrapper translation-origin=\"off\">hedgehog (<code>ğŸ¦”</code>)</nt-wrapper></td>\n</tr>\n\n</tbody>\n</table>\n</div>\n<p translation-result=\"on\">ä½ ä½¿ç”¨ Angular å»ºæ§‹çš„æ‡‰ç”¨ç¨‹å¼å¯èƒ½æœƒè®Šå¾—éå¸¸å¤§ï¼Œç®¡ç†é€™ç¨®è¤‡é›œæ€§çš„æ–¹æ³•ä¹‹ä¸€æ˜¯å°‡æ‡‰ç”¨ç¨‹å¼æ‹†åˆ†ç‚ºè¨±å¤šå°è£è‰¯å¥½çš„å°æ¨¡çµ„ï¼Œé€™äº›æ¨¡çµ„æœ¬èº«ä¹Ÿæœƒæ‹†åˆ†ç‚ºå®šç¾©æ˜ç¢ºçš„å…ƒä»¶æ¨¹ã€‚</p><p translation-origin=\"off\">The applications you build with Angular can become quite large, and one way to manage this complexity is to split up the application into many small well-encapsulated modules, that are by themselves split up into a well-defined tree of components.</p>\n\n<p translation-result=\"on\">ä½ çš„é é¢ä¸­å¯èƒ½æœƒæœ‰æŸäº›éƒ¨åˆ†æœƒèˆ‡æ‡‰ç”¨ç¨‹å¼çš„å…¶é¤˜éƒ¨åˆ†å®Œå…¨ç¨ç«‹åœ°å·¥ä½œï¼Œå®ƒå…·æœ‰è‡ªå·±çš„æœå‹™æœ¬åœ°å‰¯æœ¬å’Œæ‰€éœ€çš„å…¶å®ƒä¾è³´é …ã€‚åœ¨æ‡‰ç”¨ç¨‹å¼ä¸­ï¼Œé€™äº›éƒ¨åˆ†ä½¿ç”¨çš„æŸäº›æœå‹™å¯èƒ½æœƒèˆ‡å…¶å®ƒéƒ¨åˆ†å…±äº«ï¼Œæˆ–è€…èˆ‡å…ƒä»¶æ¨¹ä¸­æ›´æ·±å±¤çš„çˆ¶å…ƒä»¶å…±äº«ï¼Œè€Œå…¶å®ƒä¾è³´é …å‰‡æ‡‰è©²æ˜¯ç§æœ‰çš„ã€‚</p><p translation-origin=\"off\">There can be sections of your page that works in a completely independent way than the rest of the application, with its own local copies of the services and other dependencies that it needs. Some of the services that these sections of the application use might be shared with other parts of the application, or with parent components that are further up in the component tree, while other dependencies are meant to be private.</p>\n\n<p translation-result=\"on\">ä½¿ç”¨å¤šç´šä¾è³´æ³¨å…¥ï¼Œä½ å¯ä»¥éš”é›¢æ‡‰ç”¨ç¨‹å¼çš„å„å€‹éƒ¨åˆ†ï¼Œä¸¦å…è¨±å®ƒå€‘ä¿æœ‰è‡ªå·±çš„ç§æœ‰ä¾è³´é …ï¼Œä¸èˆ‡æ‡‰ç”¨ç¨‹å¼çš„å…¶é¤˜éƒ¨åˆ†å…±äº«ï¼Œæˆ–è€…è®“çˆ¶å…ƒä»¶åƒ…èˆ‡å…¶å­å…ƒä»¶å…±äº«æŸäº›ä¾è³´é …ï¼Œè€Œä¸èˆ‡å…ƒä»¶æ¨¹çš„å…¶é¤˜éƒ¨åˆ†å…±äº«ç­‰ã€‚å¤šç´šä¾è³´æ³¨å…¥èƒ½è®“ä½ åƒ…åœ¨éœ€è¦æ™‚æ‰åœ¨æ‡‰ç”¨ç¨‹å¼çš„ä¸åŒéƒ¨åˆ†ä¹‹é–“å…±äº«ä¾è³´é …ã€‚</p><p translation-origin=\"off\">With hierarchical dependency injection, you can isolate sections of the application and give them their own private dependencies not shared with the rest of the application, or have parent components share certain dependencies with its child components only but not with the rest of the component tree, and so on. Hierarchical dependency injection enables you to share dependencies between different parts of the application only when and if you need to.</p>\n\n<h2 id=\"types-of-injector-hierarchies\" translation-result=\"on\">æ³¨å…¥å™¨å±¤æ¬¡çµæ§‹çš„å‹åˆ¥<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#types-of-injector-hierarchies\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Types of injector hierarchies<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#types-of-injector-hierarchies\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">Angular ä¸­çš„æ³¨å…¥å™¨æœ‰ä¸€äº›è¦å‰‡ï¼Œä½ å¯ä»¥åˆ©ç”¨é€™äº›è¦å‰‡ä¾†åœ¨æ‡‰ç”¨ç¨‹å¼ä¸­ç²å¾—æ‰€éœ€çš„å¯æ³¨å…¥ç‰©ä»¶çš„å¯è¦‹æ€§ã€‚é€šéäº†è§£é€™äº›è¦å‰‡ï¼Œå¯ä»¥ç¢ºå®šæ‡‰åœ¨å“ªå€‹ NgModuleã€å…ƒä»¶æˆ–æŒ‡ä»¤ä¸­å®£å‘Šæœå‹™æä¾›è€…ã€‚</p><p translation-origin=\"off\">Injectors in Angular have rules that you can leverage to\nachieve the desired visibility of injectables in your applications.\nBy understanding these rules, you can determine in which\nNgModule, Component, or Directive you should declare a provider.</p>\n\n<p translation-result=\"on\">Angular ä¸­æœ‰å…©å€‹æ³¨å…¥å™¨å±¤æ¬¡çµæ§‹ï¼š</p><p translation-origin=\"off\">Angular has two injector hierarchies:</p>\n\n<table>\n<thead>\n<tr>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">æ³¨å…¥å™¨å±¤æ¬¡çµæ§‹</nt-wrapper><nt-wrapper translation-origin=\"off\">Injector hierarchies</nt-wrapper></th>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">è©³æƒ…</nt-wrapper><nt-wrapper translation-origin=\"off\">Details</nt-wrapper></th>\n</tr>\n</thead>\n<tbody>\n\n<tr>\n<td align=\"left\"><nt-wrapper translation-result=\"on\"><code>ModuleInjector</code> å±¤æ¬¡çµæ§‹</nt-wrapper><nt-wrapper translation-origin=\"off\"><code>ModuleInjector</code> hierarchy</nt-wrapper></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">ä½¿ç”¨ <code>@<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>()</code> æˆ– <code>@<a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a>()</code> è¨»è§£åœ¨æ­¤å±¤æ¬¡çµæ§‹ä¸­é…ç½® <code>ModuleInjector</code>ã€‚</nt-wrapper><nt-wrapper translation-origin=\"off\">Configure a <code>ModuleInjector</code> in this hierarchy using an <code>@<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>()</code> or <code>@<a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a>()</code> annotation.</nt-wrapper></td>\n</tr>\n\n<tr>\n<td align=\"left\"><nt-wrapper translation-result=\"on\"><code>ElementInjector</code> å±¤æ¬¡çµæ§‹</nt-wrapper><nt-wrapper translation-origin=\"off\"><code>ElementInjector</code> hierarchy</nt-wrapper></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">åœ¨æ¯å€‹ DOM å…ƒç´ ä¸Šéš±å«å»ºç«‹ã€‚é è¨­æƒ…æ³ä¸‹ï¼Œ<code>ElementInjector</code> æ˜¯ç©ºçš„ï¼Œé™¤éä½ åœ¨ <code>@<a href=\"api/core/Directive\" class=\"code-anchor\">Directive</a>()</code> æˆ– <code>@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>()</code> çš„ <code>providers</code> å±¬æ€§ä¸­é…ç½®å®ƒã€‚</nt-wrapper><nt-wrapper translation-origin=\"off\">Created implicitly at each DOM element. An <code>ElementInjector</code> is empty by default unless you configure it in the <code>providers</code> property on <code>@<a href=\"api/core/Directive\" class=\"code-anchor\">Directive</a>()</code> or <code>@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>()</code>.</nt-wrapper></td>\n</tr>\n\n</tbody>\n</table>\n<p><a id=\"register-providers-injectable\"></a></p>\n<h3 id=\"moduleinjector\"><code>ModuleInjector</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#moduleinjector\"><i class=\"material-icons\">link</i></a></h3>\n<p translation-result=\"on\">å¯ä»¥é€éä»¥ä¸‹å…©ç¨®æ–¹å¼ä¹‹ä¸€é…ç½® <code>ModuleInjector</code>ï¼š</p><p translation-origin=\"off\">The <code>ModuleInjector</code> can be configured in one of two ways by using:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\">ä½¿ç”¨ <code>@<a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a>()</code> çš„ <code>providedIn</code> å±¬æ€§åƒè€ƒ <code>@<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>()</code> æˆ– <code>root</code></p><p translation-origin=\"off\">The <code>@<a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a>()</code> <code>providedIn</code> property to refer to <code>@<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>()</code>, or <code>root</code></p>\n\n</li>\n<li>\n<p translation-result=\"on\">ä½¿ç”¨ <code>@<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>()</code> çš„ <code>providers</code> é™£åˆ—</p><p translation-origin=\"off\">The <code>@<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>()</code> <code>providers</code> array</p>\n\n</li>\n</ul>\n<div class=\"callout is-helpful\">\n<header ng-should-translate=\"\">Tree-shaking and @Injectable()</header>\n<h4 id=\"æ–æ¨¹æœ€ä½³åŒ–èˆ‡-injectable\">æ–æ¨¹æœ€ä½³åŒ–èˆ‡ <code>@<a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a>()</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#æ–æ¨¹æœ€ä½³åŒ–èˆ‡-injectable\"><i class=\"material-icons\">link</i></a></h4>\n<p translation-result=\"on\">ä½¿ç”¨ <code>@<a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a>()</code> çš„ <code>providedIn</code> å±¬æ€§å„ªæ–¼ <code>@<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>()</code> çš„ <code>providers</code> é™£åˆ—ã€‚ä½¿ç”¨ <code>@<a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a>()</code> çš„ <code>providedIn</code> æ™‚ï¼Œæœ€ä½³åŒ–å·¥å…·å¯ä»¥é€²è¡Œæ–æ¨¹æœ€ä½³åŒ–ï¼Œå¾è€Œåˆªé™¤ä½ çš„æ‡‰ç”¨ç¨‹å¼ä¸­æœªä½¿ç”¨çš„æœå‹™ï¼Œä»¥æ¸›å°æ†ç¶å¥—ä»¶å°ºå¯¸ã€‚</p><p translation-origin=\"off\">Using the <code>@<a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a>()</code> <code>providedIn</code> property is preferable to using the <code>@<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>()</code> <code>providers</code> array. With <code>@<a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a>()</code> <code>providedIn</code>, optimization tools can perform tree-shaking, which removes services that your application isn't using. This results in smaller bundle sizes.</p>\n\n<p translation-result=\"on\">æ–æ¨¹æœ€ä½³åŒ–å°æ–¼åº«ç‰¹åˆ¥æœ‰ç”¨ï¼Œå› ç‚ºä½¿ç”¨è©²å‡½å¼åº«çš„æ‡‰ç”¨ç¨‹å¼ä¸éœ€è¦æ³¨å…¥å®ƒã€‚åœ¨ <a href=\"guide/architecture-services\">æœå‹™èˆ‡ä¾è³´æ³¨å…¥ç°¡ä»‹</a>ç­è§£é—œæ–¼<a href=\"guide/architecture-services#providing-services\">å¯æ–æ¨¹æœ€ä½³åŒ–çš„æä¾›è€…</a>çš„æ›´å¤šè³‡è¨Šã€‚</p><p translation-origin=\"off\">Tree-shaking is especially useful for a library because the application which uses the library may not have a need to inject it.\nRead more about <a href=\"guide/architecture-services#providing-services\">tree-shakable providers</a> in <a href=\"guide/architecture-services\">Introduction to services and dependency injection</a>.</p>\n\n</div>\n<p translation-result=\"on\"><code>ModuleInjector</code> ç”± <code>@<a href=\"api/core/NgModule#providers\" class=\"code-anchor\">NgModule.providers</a></code> å’Œ <code><a href=\"api/core/NgModule#imports\" class=\"code-anchor\">NgModule.imports</a></code> å±¬æ€§é…ç½®ã€‚<code>ModuleInjector</code> æ˜¯å¯ä»¥é€é <code><a href=\"api/core/NgModule#imports\" class=\"code-anchor\">NgModule.imports</a></code> éè¿´æ‰¾åˆ°çš„æ‰€æœ‰ providers é™£åˆ—çš„æ‰å¹³åŒ–ã€‚</p><p translation-origin=\"off\"><code>ModuleInjector</code> is configured by the <code>@<a href=\"api/core/NgModule#providers\" class=\"code-anchor\">NgModule.providers</a></code> and <code><a href=\"api/core/NgModule#imports\" class=\"code-anchor\">NgModule.imports</a></code> property.\n<code>ModuleInjector</code> is a flattening of all the providers arrays that can be reached by following the <code><a href=\"api/core/NgModule#imports\" class=\"code-anchor\">NgModule.imports</a></code> recursively.</p>\n\n<p translation-result=\"on\">å­ <code>ModuleInjector</code> æ˜¯åœ¨å»¶é²è¼‰å…¥å…¶å®ƒ <code>@NgModules</code> æ™‚å»ºç«‹çš„ã€‚</p><p translation-origin=\"off\">Child <code>ModuleInjector</code> hierarchies are created when lazy loading other <code>@NgModules</code>.</p>\n\n<p translation-result=\"on\">ä½¿ç”¨ <code>@<a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a>()</code> çš„ <code>providedIn</code> å±¬æ€§æä¾›æœå‹™çš„æ–¹å¼å¦‚ä¸‹ï¼š</p><p translation-origin=\"off\">Provide services with the <code>providedIn</code> property of <code>@<a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a>()</code> as follows:</p>\n\n<code-example format=\"typescript\" language=\"typescript\">\n\nimport { <a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a> } from '@angular/core';\n\n@<a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a>({\n  providedIn: 'root'  // &lt;--provides this service in the root ModuleInjector\n})\nexport class ItemService {\n  name = 'telephone';\n}\n\n</code-example>\n<p translation-result=\"on\"><code>@<a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a>()</code> è£é£¾å™¨æ¨™è­˜æœå‹™é¡åˆ¥ã€‚è©² <code>providedIn</code> å±¬æ€§é…ç½®æŒ‡å®šçš„ <code>ModuleInjector</code>ï¼Œé€™è£¡çš„ <code>root</code> æœƒæŠŠè®“è©²æœå‹™åœ¨ <code>root</code> <code>ModuleInjector</code> ä¸Šå¯ç”¨ã€‚</p><p translation-origin=\"off\">The <code>@<a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a>()</code> decorator identifies a service class.\nThe <code>providedIn</code> property configures a specific <code>ModuleInjector</code>, here <code>root</code>, which makes the service available in the <code>root</code> <code>ModuleInjector</code>.</p>\n\n<h4 id=\"platform-injector\" translation-result=\"on\">å¹³å°æ³¨å…¥å™¨<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#platform-injector\"><i class=\"material-icons\">link</i></a></h4><h4 translation-origin=\"off\">Platform injector<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#platform-injector\"><i class=\"material-icons\">link</i></a></h4>\n\n<p translation-result=\"on\">åœ¨ <code>root</code> ä¹‹ä¸Šé‚„æœ‰å…©å€‹æ³¨å…¥å™¨ï¼Œä¸€å€‹æ˜¯é¡å¤–çš„ <code>ModuleInjector</code>ï¼Œä¸€å€‹æ˜¯ <code>NullInjector()</code>ã€‚</p><p translation-origin=\"off\">There are two more injectors above <code>root</code>, an additional <code>ModuleInjector</code> and <code>NullInjector()</code>.</p>\n\n<p translation-result=\"on\">æ€è€ƒä¸‹ Angular è¦å¦‚ä½•é€é <code>main.ts</code> ä¸­çš„å¦‚ä¸‹ç¨‹å¼ç¢¼å¼•å°æ‡‰ç”¨ç¨‹å¼ï¼š</p><p translation-origin=\"off\">Consider how Angular bootstraps the application with the following in <code>main.ts</code>:</p>\n\n<code-example format=\"javascript\" language=\"javascript\">\n\n<a href=\"api/platform-browser-dynamic/platformBrowserDynamic\" class=\"code-anchor\">platformBrowserDynamic</a>().bootstrapModule(AppModule).then(ref =&gt; {â€¦})\n\n</code-example>\n<p translation-result=\"on\"><code>bootstrapModule()</code> æ–¹æ³•æœƒå»ºç«‹ä¸€å€‹ç”± <code>AppModule</code> é…ç½®çš„æ³¨å…¥å™¨ä½œç‚ºå¹³å°æ³¨å…¥å™¨çš„å­æ³¨å…¥å™¨ã€‚ä¹Ÿå°±æ˜¯ <code>root</code> <code>ModuleInjector</code>ã€‚</p><p translation-origin=\"off\">The <code>bootstrapModule()</code> method creates a child injector of the platform injector which is configured by the <code>AppModule</code>.\nThis is the <code>root</code> <code>ModuleInjector</code>.</p>\n\n<p translation-result=\"on\"><code><a href=\"api/platform-browser-dynamic/platformBrowserDynamic\" class=\"code-anchor\">platformBrowserDynamic</a>()</code> æ–¹æ³•å»ºç«‹ä¸€å€‹ç”± <code>PlatformModule</code> é…ç½®çš„æ³¨å…¥å™¨ï¼Œè©²æ³¨å…¥å™¨åŒ…å«ç‰¹å®šå¹³å°çš„ä¾è³´é …ã€‚é€™å…è¨±å¤šå€‹æ‡‰ç”¨å…±äº«åŒä¸€å¥—å¹³å°é…ç½®ã€‚æ¯”å¦‚ï¼Œç„¡è«–ä½ åŸ·è¡Œå¤šå°‘å€‹æ‡‰ç”¨ç¨‹å¼ï¼Œç€è¦½å™¨éƒ½åªæœ‰ä¸€å€‹ URL æ¬„ã€‚ä½ å¯ä»¥ä½¿ç”¨ <code><a href=\"api/platform-browser/platformBrowser\" class=\"code-anchor\">platformBrowser</a>()</code> å‡½å¼æä¾› <code>extraProviders</code>ï¼Œå¾è€Œåœ¨å¹³å°ç´šåˆ¥é…ç½®ç‰¹å®šå¹³å°çš„é¡å¤–æä¾›è€…ã€‚</p><p translation-origin=\"off\">The <code><a href=\"api/platform-browser-dynamic/platformBrowserDynamic\" class=\"code-anchor\">platformBrowserDynamic</a>()</code> method creates an injector configured by a <code>PlatformModule</code>, which contains platform-specific dependencies.\nThis allows multiple applications to share a platform configuration.\nFor example, a browser has only one URL bar, no matter how many applications you have running.\nYou can configure additional platform-specific providers at the platform level by supplying <code>extraProviders</code> using the <code><a href=\"api/platform-browser/platformBrowser\" class=\"code-anchor\">platformBrowser</a>()</code> function.</p>\n\n<p translation-result=\"on\">å±¤æ¬¡çµæ§‹ä¸­çš„ä¸‹ä¸€å€‹çˆ¶æ³¨å…¥å™¨æ˜¯ <code>NullInjector()</code>ï¼Œå®ƒæ˜¯æ¨¹çš„é ‚éƒ¨ã€‚å¦‚æœä½ åœ¨æ¨¹ä¸­å‘ä¸Šèµ°äº†å¾ˆé ï¼Œä»¥è‡³æ–¼è¦åœ¨ <code>NullInjector()</code> ä¸­å°‹æ‰¾æœå‹™ï¼Œé‚£éº¼é™¤éä½¿ç”¨ <code>@<a href=\"api/core/Optional\" class=\"code-anchor\">Optional</a>()</code>ï¼Œå¦å‰‡å°‡æ”¶åˆ°éŒ¯èª¤è¨Šæ¯ï¼Œå› ç‚ºæœ€çµ‚æ‰€æœ‰æ±è¥¿éƒ½å°‡ä»¥ <code>NullInjector()</code> çµæŸä¸¦è¿”å›éŒ¯èª¤ï¼Œæˆ–è€…å°æ–¼ <code>@<a href=\"api/core/Optional\" class=\"code-anchor\">Optional</a>()</code>ï¼Œè¿”å› <code>null</code>ã€‚é—œæ–¼ <code>@<a href=\"api/core/Optional\" class=\"code-anchor\">Optional</a>()</code> çš„æ›´å¤šè³‡è¨Šï¼Œè«‹åƒé–±æœ¬æŒ‡å—çš„ <a href=\"guide/hierarchical-dependency-injection#optional\"><code>@Optional()</code> éƒ¨åˆ†</a>ã€‚</p><p translation-origin=\"off\">The next parent injector in the hierarchy is the <code>NullInjector()</code>, which is the top of the tree.\nIf you've gone so far up the tree that you are looking for a service in the <code>NullInjector()</code>, you'll get an error unless you've used <code>@<a href=\"api/core/Optional\" class=\"code-anchor\">Optional</a>()</code> because ultimately, everything ends at the <code>NullInjector()</code> and it returns an error or, in the case of <code>@<a href=\"api/core/Optional\" class=\"code-anchor\">Optional</a>()</code>, <code>null</code>.\nFor more information on <code>@<a href=\"api/core/Optional\" class=\"code-anchor\">Optional</a>()</code>, see the <a href=\"guide/hierarchical-dependency-injection#optional\"><code>@Optional()</code> section</a> of this guide.</p>\n\n<p translation-result=\"on\">ä¸‹åœ–å±•ç¤ºäº†å‰é¢å„æ®µè½æè¿°çš„ <code>root</code> <code>ModuleInjector</code> åŠå…¶çˆ¶æ³¨å…¥å™¨ä¹‹é–“çš„é—œä¿‚ã€‚</p><p translation-origin=\"off\">The following diagram represents the relationship between the <code>root</code> <code>ModuleInjector</code> and its parent injectors as the previous paragraphs describe.</p>\n\n<div class=\"lightbox\">\n<img alt=\"NullInjector, ModuleInjector, root injector\" src=\"generated/images/guide/dependency-injection/injectors.svg\" width=\"600\" height=\"445\">\n</div>\n<p translation-result=\"on\">é›–ç„¶ <code>root</code> æ˜¯ä¸€å€‹ç‰¹æ®Šçš„åˆ¥åï¼Œä½†å…¶å®ƒ <code>ModuleInjector</code> éƒ½æ²’æœ‰åˆ¥åã€‚æ¯ç•¶å»ºç«‹å‹•æ…‹è¼‰å…¥å…ƒä»¶æ™‚ï¼Œä½ é‚„æœƒå»ºç«‹ <code>ModuleInjector</code>ï¼Œæ¯”å¦‚è·¯ç”±å™¨ï¼Œå®ƒé‚„æœƒå»ºç«‹å­ <code>ModuleInjector</code>ã€‚</p><p translation-origin=\"off\">While the name <code>root</code> is a special alias, other <code>ModuleInjector</code> hierarchies don't have aliases.\nYou have the option to create <code>ModuleInjector</code> hierarchies whenever a dynamically loaded component is created, such as with the Router, which will create child <code>ModuleInjector</code> hierarchies.</p>\n\n<p translation-result=\"on\">ç„¡è«–æ˜¯ä½¿ç”¨ <code>bootstrapModule()</code> çš„æ–¹æ³•é…ç½®å®ƒï¼Œé‚„æ˜¯å°‡æ‰€æœ‰æä¾›è€…éƒ½ç”¨ <code>root</code> è¨»å†Šåˆ°å…¶è‡ªå·±çš„æœå‹™ä¸­ï¼Œæ‰€æœ‰è«‹æ±‚æœ€çµ‚éƒ½æœƒè½‰ç™¼åˆ° <code>root</code> æ³¨å…¥å™¨ã€‚</p><p translation-origin=\"off\">All requests forward up to the root injector, whether you configured it with the <code>bootstrapModule()</code> method, or registered all providers with <code>root</code> in their own services.</p>\n\n<div class=\"callout is-helpful\">\n<header ng-should-translate=\"\">@Injectable() vs. @NgModule()</header>\n<p translation-result=\"on\">å¦‚æœä½ åœ¨ <code>AppModule</code> çš„ <code>@<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>()</code> ä¸­é…ç½®æ‡‰ç”¨ç´šæä¾›è€…ï¼Œå®ƒå°±æœƒè¦†è“‹ä¸€å€‹åœ¨ <code>@<a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a>()</code> çš„ <code>root</code> å…ƒè³‡æ–™ä¸­é…ç½®çš„æä¾›è€…ã€‚ä½ å¯ä»¥ç”¨é€™ç¨®æ–¹å¼ï¼Œä¾†é…ç½®ä¾›å¤šå€‹æ‡‰ç”¨å…±äº«çš„æœå‹™çš„éé è¨­æä¾›è€…ã€‚</p><p translation-origin=\"off\">If you configure an app-wide provider in the <code>@<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>()</code> of <code>AppModule</code>, it overrides one configured for <code>root</code> in the <code>@<a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a>()</code> metadata.\nYou can do this to configure a non-default provider of a service that is shared with multiple applications.</p>\n\n<p translation-result=\"on\">ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œé€éæŠŠ <a href=\"guide/router#location-strategy\">location ç­–ç•¥</a> çš„æä¾›è€…æ–°å¢åˆ° <code>AppModule</code> çš„ <code>providers</code> åˆ—è¡¨ä¸­ï¼Œç‚ºè·¯ç”±å™¨é…ç½®äº†éé è¨­çš„ <a href=\"guide/router#location-strategy\">location ç­–ç•¥</a>ã€‚</p><p translation-origin=\"off\">Here is an example of the case where the component router configuration includes a non-default <a href=\"guide/router#location-strategy\">location strategy</a> by listing its provider in the <code>providers</code> list of the <code>AppModule</code>.</p>\n\n<code-example header=\"src/app/app.module.ts (providers)\" path=\"dependency-injection-in-action/src/app/app.module.ts\" region=\"providers\">\nproviders: [\n  { provide: <a href=\"api/common/LocationStrategy\" class=\"code-anchor\">LocationStrategy</a>, useClass: <a href=\"api/common/HashLocationStrategy\" class=\"code-anchor\">HashLocationStrategy</a> }\n]\n\n</code-example>\n</div>\n<h3 id=\"elementinjector\"><code>ElementInjector</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#elementinjector\"><i class=\"material-icons\">link</i></a></h3>\n<p translation-result=\"on\">Angular æœƒç‚ºæ¯å€‹ DOM å…ƒç´ éš±å«å»ºç«‹ <code>ElementInjector</code>ã€‚</p><p translation-origin=\"off\">Angular creates <code>ElementInjector</code> hierarchies implicitly for each DOM element.</p>\n\n<p translation-result=\"on\">å¯ä»¥ç”¨ <code>@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>()</code> è£é£¾å™¨ä¸­çš„ <code>providers</code> æˆ– <code>viewProviders</code> å±¬æ€§ä¾†é…ç½® <code>ElementInjector</code> ä»¥æä¾›æœå‹™ã€‚æ¯”å¦‚ï¼Œä¸‹é¢çš„ <code>TestComponent</code> é€éæä¾›æ­¤æœå‹™ä¾†é…ç½® <code>ElementInjector</code>ï¼š</p><p translation-origin=\"off\">Providing a service in the <code>@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>()</code> decorator using its <code>providers</code> or <code>viewProviders</code> property configures an <code>ElementInjector</code>.\nFor example, the following <code>TestComponent</code> configures the <code>ElementInjector</code> by providing the service as follows:</p>\n\n<code-example format=\"typescript\" language=\"typescript\">\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  â€¦\n  providers: [{ provide: ItemService, useValue: { name: 'lamp' } }]\n})\nexport class TestComponent\n\n</code-example>\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\"><strong>æ³¨æ„</strong>ï¼š<br>\nåƒé–±<a href=\"guide/hierarchical-dependency-injection#resolution-rules\">è§£æè¦å‰‡</a>éƒ¨åˆ†ä»¥ç­è§£ <code>ModuleInjector</code> æ¨¹å’Œ <code>ElementInjector</code> æ¨¹ä¹‹é–“çš„é—œä¿‚ã€‚</p><p translation-origin=\"off\"><strong>NOTE</strong>: <br>\nSee the <a href=\"guide/hierarchical-dependency-injection#resolution-rules\">resolution rules</a> section to understand the relationship between the <code>ModuleInjector</code> tree and the <code>ElementInjector</code> tree.</p>\n\n</div>\n<p translation-result=\"on\">åœ¨å…ƒä»¶ä¸­æä¾›æœå‹™æ™‚ï¼Œå¯ä»¥é€é <code>ElementInjector</code> åœ¨è©²å…ƒä»¶ä¾‹é …è™•ä½¿ç”¨è©²æœå‹™ã€‚æ ¹æ“š<a href=\"guide/hierarchical-dependency-injection#resolution-rules\">è§£æè¦å‰‡</a>éƒ¨åˆ†æè¿°çš„å¯è¦‹æ€§è¦å‰‡ï¼Œå®ƒä¹ŸåŒæ¨£åœ¨å­å…ƒä»¶/æŒ‡ä»¤è™•å¯è¦‹ã€‚</p><p translation-origin=\"off\">When you provide services in a component, that service is available by way of the <code>ElementInjector</code> at that component instance.\nIt may also be visible at child component/directives based on visibility rules described in the <a href=\"guide/hierarchical-dependency-injection#resolution-rules\">resolution rules</a> section.</p>\n\n<p translation-result=\"on\">ç•¶å…ƒä»¶ä¾‹é …è¢«éŠ·ç‡¬æ™‚ï¼Œè©²æœå‹™ä¾‹é …ä¹Ÿå°‡è¢«éŠ·ç‡¬ã€‚</p><p translation-origin=\"off\">When the component instance is destroyed, so is that service instance.</p>\n\n<h4 id=\"directive-and-component\" translation-result=\"on\"><code>@<a href=\"api/core/Directive\" class=\"code-anchor\">Directive</a>()</code> å’Œ <code>@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>()</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#directive-å’Œ-component\"><i class=\"material-icons\">link</i></a></h4><h4 translation-origin=\"off\"><code>@<a href=\"api/core/Directive\" class=\"code-anchor\">Directive</a>()</code> and <code>@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>()</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#directive-and-component\"><i class=\"material-icons\">link</i></a></h4>\n\n<p translation-result=\"on\">å…ƒä»¶æ˜¯ä¸€ç¨®ç‰¹æ®Šå‹åˆ¥çš„æŒ‡ä»¤ï¼Œé€™æ„å‘³è‘— <code>@<a href=\"api/core/Directive\" class=\"code-anchor\">Directive</a>()</code> å…·æœ‰ <code>providers</code> å±¬æ€§ï¼Œ<code>@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>()</code> ä¹ŸåŒæ¨£å¦‚æ­¤ã€‚é€™æ„å‘³è‘—æŒ‡ä»¤å’Œå…ƒä»¶éƒ½å¯ä»¥ä½¿ç”¨ <code>providers</code> å±¬æ€§ä¾†é…ç½®æä¾›è€…ã€‚ç•¶ä½¿ç”¨ <code>providers</code> å±¬æ€§ç‚ºå…ƒä»¶æˆ–æŒ‡ä»¤é…ç½®æä¾›è€…æ™‚ï¼Œè©²æä¾›ç¨‹å•†å°±å±¬æ–¼è©²å…ƒä»¶æˆ–æŒ‡ä»¤çš„ <code>ElementInjector</code>ã€‚åŒä¸€å…ƒç´ ä¸Šçš„å…ƒä»¶å’ŒæŒ‡ä»¤å…±äº«åŒä¸€å€‹æ³¨å…¥å™¨ã€‚</p><p translation-origin=\"off\">A component is a special type of directive, which means that just as <code>@<a href=\"api/core/Directive\" class=\"code-anchor\">Directive</a>()</code> has a <code>providers</code> property, <code>@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>()</code> does too.\nThis means that directives as well as components can configure providers, using the <code>providers</code> property.\nWhen you configure a provider for a component or directive using the <code>providers</code> property, that provider belongs to the <code>ElementInjector</code> of that component or directive.\nComponents and directives on the same element share an injector.</p>\n\n<p><a id=\"resolution-rules\"></a></p>\n<h2 id=\"resolution-rules\" translation-result=\"on\">è§£æè¦å‰‡<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#resolution-rules\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Resolution rules<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#resolution-rules\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">ç•¶ç‚ºå…ƒä»¶/æŒ‡ä»¤è§£æä»¤ç‰Œæ™‚ï¼ŒAngular åˆ†ç‚ºå…©å€‹éšæ®µä¾†è§£æå®ƒï¼š</p><p translation-origin=\"off\">When resolving a token for a component/directive, Angular resolves it in two phases:</p>\n\n<ol>\n<li>\n<p translation-result=\"on\">é‡å° <code>ElementInjector</code> å±¤æ¬¡çµæ§‹ä¸­å®ƒçš„çˆ¶ç´šã€‚</p><p translation-origin=\"off\">Against its parents in the <code>ElementInjector</code> hierarchy.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">é‡å° <code>ModuleInjector</code> å±¤æ¬¡çµæ§‹ä¸­å®ƒçš„çˆ¶ç´šã€‚</p><p translation-origin=\"off\">Against its parents in the <code>ModuleInjector</code> hierarchy.</p>\n\n</li>\n</ol>\n<p translation-result=\"on\">ç•¶å…ƒä»¶å®£å‘Šä¾è³´é …æ™‚ï¼ŒAngular æœƒå˜—è©¦ä½¿ç”¨å®ƒè‡ªå·±çš„ <code>ElementInjector</code> ä¾†æ»¿è¶³è©²ä¾è³´ã€‚å¦‚æœå…ƒä»¶çš„æ³¨å…¥å™¨ç¼ºå°‘æä¾›è€…ï¼Œå®ƒå°‡æŠŠè«‹æ±‚å‚³çµ¦å…¶çˆ¶å…ƒä»¶çš„ <code>ElementInjector</code>ã€‚</p><p translation-origin=\"off\">When a component declares a dependency, Angular tries to satisfy that dependency with its own <code>ElementInjector</code>.\nIf the component's injector lacks the provider, it passes the request up to its parent component's <code>ElementInjector</code>.</p>\n\n<p translation-result=\"on\">é€™äº›è«‹æ±‚å°‡ç¹¼çºŒè½‰ç™¼ï¼Œç›´åˆ° Angular æ‰¾åˆ°å¯ä»¥è™•ç†è©²è«‹æ±‚çš„æ³¨å…¥å™¨æˆ–ç”¨å®Œç¥–å…ˆ <code>ElementInjector</code>ã€‚</p><p translation-origin=\"off\">The requests keep forwarding up until Angular finds an injector that can handle the request or runs out of ancestor <code>ElementInjector</code> hierarchies.</p>\n\n<p translation-result=\"on\">å¦‚æœ Angular åœ¨ä»»ä½• <code>ElementInjector</code> ä¸­éƒ½æ‰¾ä¸åˆ°æä¾›è€…ï¼Œå®ƒå°‡è¿”å›åˆ°ç™¼èµ·è«‹æ±‚çš„å…ƒç´ ï¼Œä¸¦åœ¨ <code>ModuleInjector</code> å±¤æ¬¡çµæ§‹ä¸­é€²è¡ŒæŸ¥è©¢ã€‚å¦‚æœ Angular ä»ç„¶æ‰¾ä¸åˆ°æä¾›è€…ï¼Œå®ƒå°‡å¼•ç™¼éŒ¯èª¤ã€‚</p><p translation-origin=\"off\">If Angular doesn't find the provider in any <code>ElementInjector</code> hierarchies, it goes back to the element where the request originated and looks in the <code>ModuleInjector</code> hierarchy.\nIf Angular still doesn't find the provider, it throws an error.</p>\n\n<p translation-result=\"on\">å¦‚æœä½ å·²åœ¨ä¸åŒç´šåˆ¥è¨»å†Šäº†ç›¸åŒ DI ä»¤ç‰Œçš„æä¾›è€…ï¼Œå‰‡ Angular æœƒç”¨é‡åˆ°çš„ç¬¬ä¸€å€‹ä¾†è§£æè©²ä¾è³´ã€‚æ¯”å¦‚ï¼Œå¦‚æœæä¾›è€…å·²ç¶“åœ¨éœ€è¦æ­¤æœå‹™çš„å…ƒä»¶ä¸­æœ¬åœ°è¨»å†Šäº†ï¼Œå‰‡ Angular ä¸æœƒå†å°‹æ‰¾åŒä¸€æœå‹™çš„å…¶å®ƒæä¾›è€…ã€‚</p><p translation-origin=\"off\">If you have registered a provider for the same DI token at different levels, the first one Angular encounters is the one it uses to resolve the dependency.\nIf, for example, a provider is registered locally in the component that needs a service,\nAngular doesn't look for another provider of the same service.</p>\n\n<h2 id=\"resolution-modifiers\" translation-result=\"on\">è§£æä¿®é£¾ç¬¦<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#resolution-modifiers\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Resolution modifiers<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#resolution-modifiers\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">å¯ä»¥ä½¿ç”¨ <code>@<a href=\"api/core/Optional\" class=\"code-anchor\">Optional</a>()</code>ï¼Œ<code>@<a href=\"api/core/Self\" class=\"code-anchor\">Self</a>()</code>ï¼Œ<code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code> å’Œ <code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code> ä¾†ä¿®é£¾ Angular çš„è§£æè¡Œç‚ºã€‚å¾ <code>@angular/core</code> åŒ¯å…¥å®ƒå€‘ï¼Œä¸¦åœ¨æ³¨å…¥æœå‹™æ™‚åœ¨å…ƒä»¶é¡å»ºæ§‹å‡½å¼ä¸­ä½¿ç”¨å®ƒå€‘ã€‚</p><p translation-origin=\"off\">Angular's resolution behavior can be modified with <code>@<a href=\"api/core/Optional\" class=\"code-anchor\">Optional</a>()</code>, <code>@<a href=\"api/core/Self\" class=\"code-anchor\">Self</a>()</code>, <code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code> and <code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code>.\nImport each of them from <code>@angular/core</code> and use each in the component class constructor when you inject your service.</p>\n\n<p translation-result=\"on\">é—œæ–¼å±•ç¤ºæœ¬ç¯€ä»‹ç´¹çš„è§£æä¿®é£¾ç¬¦çš„å¯åŸ·è¡Œæ‡‰ç”¨ï¼Œè«‹åƒé–±<live-example name=\"resolution-modifiers\">è§£æä¿®é£¾ç¬¦ç¯„ä¾‹</live-example>ã€‚</p><p translation-origin=\"off\">For a working application showcasing the resolution modifiers that this section covers, see the <live-example name=\"resolution-modifiers\">resolution modifiers example</live-example>.</p>\n\n<h3 id=\"types-of-modifiers\" translation-result=\"on\">ä¿®é£¾ç¬¦çš„å‹åˆ¥<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#types-of-modifiers\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">Types of modifiers<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#types-of-modifiers\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">è§£æä¿®é£¾ç¬¦åˆ†ç‚ºä¸‰é¡ï¼š</p><p translation-origin=\"off\">Resolution modifiers fall into three categories:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\">å¦‚æœ Angular æ‰¾ä¸åˆ°ä½ è¦çš„æ±è¥¿è©²æ€éº¼è¾¦ï¼Œç”¨ <code>@<a href=\"api/core/Optional\" class=\"code-anchor\">Optional</a>()</code></p><p translation-origin=\"off\">What to do if Angular doesn't find what you're looking for, that is <code>@<a href=\"api/core/Optional\" class=\"code-anchor\">Optional</a>()</code></p>\n\n</li>\n<li>\n<p translation-result=\"on\">å¾å“ªè£¡é–‹å§‹å°‹æ‰¾ï¼Œç”¨ <code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code></p><p translation-origin=\"off\">Where to start looking, that is <code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code></p>\n\n</li>\n<li>\n<p translation-result=\"on\">åˆ°å“ªè£¡åœæ­¢å°‹æ‰¾ï¼Œç”¨ <code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code> å’Œ <code>@<a href=\"api/core/Self\" class=\"code-anchor\">Self</a>()</code></p><p translation-origin=\"off\">Where to stop looking, <code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code> and <code>@<a href=\"api/core/Self\" class=\"code-anchor\">Self</a>()</code></p>\n\n</li>\n</ul>\n<p translation-result=\"on\">é è¨­æƒ…æ³ä¸‹ï¼ŒAngular å§‹çµ‚å¾ç•¶å‰çš„ <code><a href=\"api/core/Injector\" class=\"code-anchor\">Injector</a></code> é–‹å§‹ï¼Œä¸¦ä¸€ç›´å‘ä¸Šæœå°‹ã€‚ä¿®é£¾ç¬¦ä½¿ä½ å¯ä»¥æ›´æ”¹é–‹å§‹ï¼ˆé è¨­æ˜¯è‡ªå·±ï¼‰æˆ–çµæŸä½ç½®ã€‚</p><p translation-origin=\"off\">By default, Angular always starts at the current <code><a href=\"api/core/Injector\" class=\"code-anchor\">Injector</a></code> and keeps searching all the way up.\nModifiers allow you to change the starting, or <em>self</em>, location and the ending location.</p>\n\n<p translation-result=\"on\">å¦å¤–ï¼Œä½ å¯ä»¥çµ„åˆé™¤ <code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code> å’Œ <code>@<a href=\"api/core/Self\" class=\"code-anchor\">Self</a>()</code> ä¹‹å¤–çš„æ‰€æœ‰ä¿®é£¾ç¬¦ï¼Œç•¶ç„¶é‚„æœ‰ <code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code> å’Œ <code>@<a href=\"api/core/Self\" class=\"code-anchor\">Self</a>()</code>ã€‚</p><p translation-origin=\"off\">Additionally, you can combine all of the modifiers except <code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code> and <code>@<a href=\"api/core/Self\" class=\"code-anchor\">Self</a>()</code> and of course <code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code> and <code>@<a href=\"api/core/Self\" class=\"code-anchor\">Self</a>()</code>.</p>\n\n<p><a id=\"optional\"></a></p>\n<h3 id=\"optional\"><code>@<a href=\"api/core/Optional\" class=\"code-anchor\">Optional</a>()</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#optional\"><i class=\"material-icons\">link</i></a></h3>\n<p translation-result=\"on\"><code>@<a href=\"api/core/Optional\" class=\"code-anchor\">Optional</a>()</code> å…è¨± Angular å°‡ä½ æ³¨å…¥çš„æœå‹™è¦–ç‚ºå¯é¸æœå‹™ã€‚é€™æ¨£ï¼Œå¦‚æœç„¡æ³•åœ¨åŸ·è¡Œæ™‚è§£æå®ƒï¼ŒAngular åªæœƒå°‡æœå‹™è§£æç‚º <code>null</code>ï¼Œè€Œä¸æœƒä¸Ÿæ“²éŒ¯èª¤ã€‚åœ¨ä¸‹é¢çš„ç¯„ä¾‹ä¸­ï¼Œæœå‹™ <code>OptionalService</code> æ²’æœ‰åœ¨ <code>@<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>()</code> æˆ–å…ƒä»¶é¡ä¸­æä¾›ï¼Œæ‰€ä»¥å®ƒæ²’æœ‰åœ¨æ‡‰ç”¨ä¸­çš„ä»»ä½•åœ°æ–¹ã€‚</p><p translation-origin=\"off\"><code>@<a href=\"api/core/Optional\" class=\"code-anchor\">Optional</a>()</code> allows Angular to consider a service you inject to be optional.\nThis way, if it can't be resolved at runtime, Angular resolves the service as <code>null</code>, rather than throwing an error.\nIn the following example, the service, <code>OptionalService</code>, isn't provided in the service, <code>@<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>()</code>, or component class, so it isn't available anywhere in the app.</p>\n\n<code-example header=\"src/app/optional/optional.component.ts\" path=\"resolution-modifiers/src/app/optional/optional.component.ts\" region=\"optional-component\">\nexport class OptionalComponent {\n  constructor(@<a href=\"api/core/Optional\" class=\"code-anchor\">Optional</a>() public optional?: OptionalService) {}\n}\n\n</code-example>\n<h3 id=\"self\"><code>@<a href=\"api/core/Self\" class=\"code-anchor\">Self</a>()</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#self\"><i class=\"material-icons\">link</i></a></h3>\n<p translation-result=\"on\">ä½¿ç”¨ <code>@<a href=\"api/core/Self\" class=\"code-anchor\">Self</a>()</code> è®“ Angular åƒ…æª¢è¦–ç•¶å‰å…ƒä»¶æˆ–æŒ‡ä»¤çš„ <code>ElementInjector</code>ã€‚</p><p translation-origin=\"off\">Use <code>@<a href=\"api/core/Self\" class=\"code-anchor\">Self</a>()</code> so that Angular will only look at the <code>ElementInjector</code> for the current component or directive.</p>\n\n<p translation-result=\"on\"><code>@<a href=\"api/core/Self\" class=\"code-anchor\">Self</a>()</code> çš„ä¸€å€‹å¥½ä¾‹å­æ˜¯è¦æ³¨å…¥æŸå€‹æœå‹™ï¼Œä½†åªæœ‰ç•¶è©²æœå‹™åœ¨ç•¶å‰å®¿ä¸»å…ƒç´ ä¸Šå¯ç”¨æ™‚æ‰è¡Œã€‚ç‚ºäº†é¿å…é€™ç¨®æƒ…æ³ä¸‹å‡ºéŒ¯ï¼Œè«‹å°‡ <code>@<a href=\"api/core/Self\" class=\"code-anchor\">Self</a>()</code> èˆ‡ <code>@<a href=\"api/core/Optional\" class=\"code-anchor\">Optional</a>()</code> çµåˆä½¿ç”¨ã€‚</p><p translation-origin=\"off\">A good use case for <code>@<a href=\"api/core/Self\" class=\"code-anchor\">Self</a>()</code> is to inject a service but only if it is available on the current host element.\nTo avoid errors in this situation, combine <code>@<a href=\"api/core/Self\" class=\"code-anchor\">Self</a>()</code> with <code>@<a href=\"api/core/Optional\" class=\"code-anchor\">Optional</a>()</code>.</p>\n\n<p translation-result=\"on\">æ¯”å¦‚ï¼Œåœ¨ä¸‹é¢çš„ <code>SelfComponent</code> ä¸­ã€‚è«‹æ³¨æ„åœ¨å»ºæ§‹å‡½å¼ä¸­æ³¨å…¥çš„ <code>LeafService</code>ã€‚</p><p translation-origin=\"off\">For example, in the following <code>SelfComponent</code>, notice the injected <code>LeafService</code> in the constructor.</p>\n\n<code-example header=\"src/app/self-no-data/self-no-data.component.ts\" path=\"resolution-modifiers/src/app/self-no-data/self-no-data.component.ts\" region=\"self-no-data-component\">\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app-self-no-data',\n  templateUrl: './self-no-data.component.html',\n  styleUrls: ['./self-no-data.component.css']\n})\nexport class SelfNoDataComponent {\n  constructor(@<a href=\"api/core/Self\" class=\"code-anchor\">Self</a>() @<a href=\"api/core/Optional\" class=\"code-anchor\">Optional</a>() public leaf?: LeafService) { }\n}\n\n\n</code-example>\n<p translation-result=\"on\">åœ¨é€™å€‹ä¾‹å­ä¸­ï¼Œæœ‰ä¸€å€‹çˆ¶æä¾›è€…ï¼Œæ³¨å…¥æœå‹™å°‡è¿”å›è©²å€¼ï¼Œä½†æ˜¯ï¼Œä½¿ç”¨ <code>@<a href=\"api/core/Self\" class=\"code-anchor\">Self</a>()</code> å’Œ <code>@<a href=\"api/core/Optional\" class=\"code-anchor\">Optional</a>()</code> æ³¨å…¥çš„æœå‹™å°‡è¿”å› <code>null</code> å› ç‚º <code>@<a href=\"api/core/Self\" class=\"code-anchor\">Self</a>()</code> å‘Šè¨´æ³¨å…¥å™¨åœ¨ç•¶å‰å®¿ä¸»å…ƒç´ ä¸Šå°±è¦åœæ­¢æœå°‹ã€‚</p><p translation-origin=\"off\">In this example, there is a parent provider and injecting the service will return the value, however, injecting the service with <code>@<a href=\"api/core/Self\" class=\"code-anchor\">Self</a>()</code> and <code>@<a href=\"api/core/Optional\" class=\"code-anchor\">Optional</a>()</code> will return <code>null</code> because <code>@<a href=\"api/core/Self\" class=\"code-anchor\">Self</a>()</code> tells the injector to stop searching in the current host element.</p>\n\n<p translation-result=\"on\">å¦ä¸€å€‹ç¯„ä¾‹é¡¯ç¤ºäº†å…·æœ‰ <code>FlowerService</code> æä¾›è€…çš„å…ƒä»¶é¡åˆ¥ã€‚åœ¨é€™å€‹ä¾‹å­ä¸­ï¼Œæ³¨å…¥å™¨æ²’æœ‰è¶…å‡ºç•¶å‰ <code>ElementInjector</code> å°±åœæ­¢äº†ï¼Œå› ç‚ºå®ƒå·²ç¶“æ‰¾åˆ°äº† <code>FlowerService</code> ä¸¦è¿”å›äº†é¬±é‡‘é¦™<code>ğŸŒ·</code>ã€‚</p><p translation-origin=\"off\">Another example shows the component class with a provider for <code>FlowerService</code>.\nIn this case, the injector looks no further than the current <code>ElementInjector</code> because it finds the <code>FlowerService</code> and returns the tulip <code>ğŸŒ·</code>.</p>\n\n<code-example header=\"src/app/self/self.component.ts\" path=\"resolution-modifiers/src/app/self/self.component.ts\" region=\"self-component\">\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app-self',\n  templateUrl: './self.component.html',\n  styleUrls: ['./self.component.css'],\n  providers: [{ provide: FlowerService, useValue: { emoji: 'ğŸŒ·' } }]\n\n})\nexport class SelfComponent {\n  constructor(@<a href=\"api/core/Self\" class=\"code-anchor\">Self</a>() public flower: FlowerService) {}\n}\n\n</code-example>\n<h3 id=\"skipself\"><code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#skipself\"><i class=\"material-icons\">link</i></a></h3>\n<p translation-result=\"on\"><code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code> èˆ‡ <code>@<a href=\"api/core/Self\" class=\"code-anchor\">Self</a>()</code> ç›¸åã€‚ä½¿ç”¨ <code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code>ï¼ŒAngular åœ¨çˆ¶ <code>ElementInjector</code> ä¸­è€Œä¸æ˜¯ç•¶å‰ <code>ElementInjector</code> ä¸­é–‹å§‹æœå°‹æœå‹™ã€‚å› æ­¤ï¼Œå¦‚æœçˆ¶ <code>ElementInjector</code> å° <code>emoji</code> ä½¿ç”¨äº†å€¼ <code>ğŸŒ¿</code>ï¼ˆè•¨é¡ï¼‰ï¼Œä½†å…ƒä»¶çš„ <code>providers</code> é™£åˆ—ä¸­æœ‰ <code>ğŸ</code>ï¼ˆæ¥“è‘‰ï¼‰ï¼Œå‰‡ Angular å°‡å¿½ç•¥ <code>ğŸ</code>ï¼ˆæ¥“è‘‰ï¼‰ï¼Œè€Œä½¿ç”¨ <code>ğŸŒ¿</code>ï¼ˆè•¨é¡ï¼‰ã€‚</p><p translation-origin=\"off\"><code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code> is the opposite of <code>@<a href=\"api/core/Self\" class=\"code-anchor\">Self</a>()</code>.\nWith <code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code>, Angular starts its search for a service in the parent <code>ElementInjector</code>, rather than in the current one.\nSo if the parent <code>ElementInjector</code> were using the fern <code>ğŸŒ¿</code> value for <code>emoji</code>, but you had maple leaf <code>ğŸ</code> in the component's <code>providers</code> array, Angular would ignore maple leaf <code>ğŸ</code> and use fern <code>ğŸŒ¿</code>.</p>\n\n<p translation-result=\"on\">è¦åœ¨ç¨‹å¼ç¢¼ä¸­çœ‹åˆ°é€™ä¸€é»ï¼Œè«‹å…ˆå‡å®š <code>emoji</code> çš„ä»¥ä¸‹å€¼å°±æ˜¯çˆ¶å…ƒä»¶æ­£åœ¨ä½¿ç”¨çš„å€¼ï¼Œå¦‚æœ¬æœå‹™æ‰€ç¤ºï¼š</p><p translation-origin=\"off\">To see this in code, assume that the following value for <code>emoji</code> is what the parent component were using, as in this service:</p>\n\n<code-example header=\"src/app/leaf.service.ts\" path=\"resolution-modifiers/src/app/leaf.service.ts\" region=\"leafservice\">\nexport class LeafService {\n  emoji = 'ğŸŒ¿';\n}\n\n</code-example>\n<p translation-result=\"on\">æƒ³è±¡ä¸€ä¸‹ï¼Œåœ¨å­å…ƒä»¶ä¸­ï¼Œä½ æœ‰ä¸€å€‹ä¸åŒçš„å€¼ <code>ğŸ</code>ï¼ˆæ¥“è‘‰ï¼‰ï¼Œä½†ä½ æƒ³ä½¿ç”¨çˆ¶é …çš„å€¼ã€‚ä½ å°±è¦ä½¿ç”¨ <code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code>ï¼š</p><p translation-origin=\"off\">Imagine that in the child component, you had a different value, maple leaf <code>ğŸ</code> but you wanted to use the parent's value instead.\nThis is when you'd use <code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code>:</p>\n\n<code-example header=\"src/app/skipself/skipself.component.ts\" path=\"resolution-modifiers/src/app/skipself/skipself.component.ts\" region=\"skipself-component\">\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app-skipself',\n  templateUrl: './skipself.component.html',\n  styleUrls: ['./skipself.component.css'],\n  // Angular would ignore this LeafService instance\n  providers: [{ provide: LeafService, useValue: { emoji: 'ğŸ' } }]\n})\nexport class SkipselfComponent {\n  // Use @<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>() in the constructor\n  constructor(@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>() public leaf: LeafService) { }\n}\n\n</code-example>\n<p translation-result=\"on\">åœ¨é€™å€‹ä¾‹å­ä¸­ï¼Œä½ ç²å¾—çš„ <code>emoji</code> å€¼å°‡ç‚º <code>ğŸŒ¿</code>ï¼ˆè•¨é¡ï¼‰ï¼Œè€Œä¸æ˜¯ <code>ğŸ</code>ï¼ˆæ¥“è‘‰ï¼‰ã€‚</p><p translation-origin=\"off\">In this case, the value you'd get for <code>emoji</code> would be fern <code>ğŸŒ¿</code>, not maple leaf <code>ğŸ</code>.</p>\n\n<h4 id=\"skipself-with-optional\" translation-result=\"on\">åˆç”¨ <code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code> å’Œ <code>@<a href=\"api/core/Optional\" class=\"code-anchor\">Optional</a>()</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#åˆç”¨-skipself-å’Œ-optional\"><i class=\"material-icons\">link</i></a></h4><h4 translation-origin=\"off\"><code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code> with <code>@<a href=\"api/core/Optional\" class=\"code-anchor\">Optional</a>()</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#skipself-with-optional\"><i class=\"material-icons\">link</i></a></h4>\n\n<p translation-result=\"on\">å¦‚æœå€¼ç‚º <code>null</code> è«‹åŒæ™‚ä½¿ç”¨ <code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code> å’Œ <code>@<a href=\"api/core/Optional\" class=\"code-anchor\">Optional</a>()</code> ä¾†é˜²æ­¢éŒ¯èª¤ã€‚åœ¨ä¸‹é¢çš„ç¯„ä¾‹ä¸­ï¼Œå°‡ <code>Person</code> æœå‹™æ³¨å…¥åˆ°å»ºæ§‹å‡½å¼ä¸­ã€‚<code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code> å‘Šè¨´ Angular è·³éç•¶å‰çš„æ³¨å…¥å™¨ï¼Œå¦‚æœ <code>Person</code> æœå‹™ç‚º <code>null</code>ï¼Œå‰‡ <code>@<a href=\"api/core/Optional\" class=\"code-anchor\">Optional</a>()</code> å°‡é˜²æ­¢å ±éŒ¯ã€‚</p><p translation-origin=\"off\">Use <code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code> with <code>@<a href=\"api/core/Optional\" class=\"code-anchor\">Optional</a>()</code> to prevent an error if the value is <code>null</code>.\nIn the following example, the <code>Person</code> service is injected in the constructor.\n<code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code> tells Angular to skip the current injector and <code>@<a href=\"api/core/Optional\" class=\"code-anchor\">Optional</a>()</code> will prevent an error should the <code>Person</code> service be <code>null</code>.</p>\n\n<code-example format=\"typescript\" language=\"typescript\">\n\nclass Person {\n  constructor(@<a href=\"api/core/Optional\" class=\"code-anchor\">Optional</a>() @<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>() parent?: Person) {}\n}\n\n</code-example>\n<h3 id=\"host\"><code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#host\"><i class=\"material-icons\">link</i></a></h3>\n<p translation-result=\"on\"><code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code> ä½¿ä½ å¯ä»¥åœ¨æœå°‹æä¾›è€…æ™‚å°‡ç•¶å‰å…ƒä»¶æŒ‡å®šç‚ºæ³¨å…¥å™¨æ¨¹çš„æœ€å¾Œä¸€ç«™ã€‚å³ä½¿æ¨¹çš„æ›´ä¸Šç´šæœ‰ä¸€å€‹æœå‹™ä¾‹é …ï¼ŒAngular ä¹Ÿä¸æœƒç¹¼çºŒå°‹æ‰¾ã€‚ä½¿ç”¨ <code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code> çš„ä¾‹å­å¦‚ä¸‹ï¼š</p><p translation-origin=\"off\"><code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code> lets you designate a component as the last stop in the injector tree when searching for providers.\nEven if there is a service instance further up the tree, Angular won't continue looking\nUse <code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code> as follows:</p>\n\n<code-example header=\"src/app/host/host.component.ts\" path=\"resolution-modifiers/src/app/host/host.component.ts\" region=\"host-component\">\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app-host',\n  templateUrl: './host.component.html',\n  styleUrls: ['./host.component.css'],\n  //  provide the service\n  providers: [{ provide: FlowerService, useValue: { emoji: 'ğŸŒ·' } }]\n})\nexport class HostComponent {\n  // use @<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>() in the constructor when injecting the service\n  constructor(@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>() @<a href=\"api/core/Optional\" class=\"code-anchor\">Optional</a>() public flower?: FlowerService) { }\n\n}\n\n</code-example>\n<p translation-result=\"on\">ç”±æ–¼ <code>HostComponent</code> åœ¨å…¶å»ºæ§‹å‡½å¼ä¸­å…·æœ‰ <code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code>ï¼Œå› æ­¤ï¼Œç„¡è«– <code>HostComponent</code> çš„çˆ¶ç´šæ˜¯å¦å¯èƒ½æœ‰ <code>flower.emoji</code> å€¼ï¼Œè©² <code>HostComponent</code> éƒ½å°‡ä½¿ç”¨ <code>ğŸŒ·</code>ï¼ˆé¬±é‡‘é¦™ï¼‰ã€‚</p><p translation-origin=\"off\">Since <code>HostComponent</code> has <code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code> in its constructor, no matter what the parent of <code>HostComponent</code> might have as a <code>flower.emoji</code> value, the <code>HostComponent</code> will use tulip <code>ğŸŒ·</code>.</p>\n\n<h2 id=\"logical-structure-of-the-template\" translation-result=\"on\">ç¯„æœ¬çš„é‚è¼¯çµæ§‹<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#logical-structure-of-the-template\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Logical structure of the template<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#logical-structure-of-the-template\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">åœ¨å…ƒä»¶é¡ä¸­æä¾›æœå‹™æ™‚ï¼Œæœå‹™åœ¨ <code>ElementInjector</code> æ¨¹ä¸­çš„å¯è¦‹æ€§æ˜¯å–æ±ºæ–¼ä½ åœ¨ä½•è™•ä»¥åŠå¦‚ä½•æä¾›é€™äº›æœå‹™ã€‚</p><p translation-origin=\"off\">When you provide services in the component class, services are visible within the <code>ElementInjector</code> tree relative to where and how you provide those services.</p>\n\n<p translation-result=\"on\">ç­è§£ Angular ç¯„æœ¬çš„åŸºç¤é‚è¼¯çµæ§‹å°‡ç‚ºä½ é…ç½®æœå‹™ä¸¦é€²è€Œæ§åˆ¶å…¶å¯è¦‹æ€§å¥ å®šåŸºç¤ã€‚</p><p translation-origin=\"off\">Understanding the underlying logical structure of the Angular template will give you a foundation for configuring services and in turn control their visibility.</p>\n\n<p translation-result=\"on\">å…ƒä»¶åœ¨ç¯„æœ¬ä¸­ä½¿ç”¨ï¼Œå¦‚ä»¥ä¸‹ç¯„ä¾‹æ‰€ç¤ºï¼š</p><p translation-origin=\"off\">Components are used in your templates, as in the following example:</p>\n\n<code-example format=\"html\" language=\"html\">\n\n&lt;app-root&gt;\n  &lt;app-child&gt;&lt;/app-child&gt;\n&lt;/app-root&gt;\n\n</code-example>\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\"><strong>æ³¨æ„</strong>ï¼š<br>\né€šå¸¸ï¼Œä½ è¦åœ¨å–®ç¨çš„æª”æ¡ˆä¸­å®£å‘Šå…ƒä»¶åŠå…¶ç¯„æœ¬ã€‚ç‚ºäº†ç†è§£æ³¨å…¥ç³»çµ±çš„å·¥ä½œåŸç†ï¼Œå¾çµ„åˆé‚è¼¯æ¨¹çš„è¦–è§’ä¾†çœ‹å®ƒå€‘æ˜¯å¾ˆæœ‰å¹«åŠ©çš„ã€‚ä½¿ç”¨è¡“èª<em>â€œé‚è¼¯â€</em>å°‡å…¶èˆ‡æ¸²æŸ“æ¨¹ï¼ˆä½ çš„æ‡‰ç”¨ç¨‹å¼ DOM æ¨¹ï¼‰å€åˆ†é–‹ã€‚ç‚ºäº†æ¨™è¨˜å…ƒä»¶ç¯„æœ¬çš„ä½ç½®ï¼Œæœ¬æŒ‡å—ä½¿ç”¨ <code>&lt;#VIEW&gt;</code> å½å…ƒç´ ï¼Œè©²å…ƒç´ å¯¦éš›ä¸Šä¸å­˜åœ¨æ–¼æ¸²æŸ“æ¨¹ä¸­ï¼Œåƒ…ç”¨æ–¼å¿ƒæ™ºæ¨¡å‹ä¸­ã€‚</p><p translation-origin=\"off\"><strong>NOTE</strong>: <br>\nUsually, you declare the components and their templates in separate files.\nFor the purposes of understanding how the injection system works, it is useful to look at them from the point of view of a combined logical tree.\nThe term <em>logical</em> distinguishes it from the render tree, which is your application's DOM tree.\nTo mark the locations of where the component templates are located, this guide uses the <code>&lt;#VIEW&gt;</code> pseudo-element, which doesn't actually exist in the render tree and is present for mental model purposes only.</p>\n\n</div>\n<p translation-result=\"on\">ä¸‹é¢æ˜¯å¦‚ä½•å°‡ <code>&lt;app-root&gt;</code> å’Œ <code>&lt;app-child&gt;</code> æª¢è¦–æ¨¹çµ„åˆç‚ºå–®å€‹é‚è¼¯æ¨¹çš„ç¯„ä¾‹ï¼š</p><p translation-origin=\"off\">The following is an example of how the <code>&lt;app-root&gt;</code> and <code>&lt;app-child&gt;</code> view trees are combined into a single logical tree:</p>\n\n<code-example format=\"html\" language=\"html\">\n\n&lt;app-root&gt;\n  &lt;#VIEW&gt;\n    &lt;app-child&gt;\n     &lt;#VIEW&gt;\n       â€¦content goes hereâ€¦\n     &lt;/#VIEW&gt;\n    &lt;/app-child&gt;\n  &lt;/#VIEW&gt;\n&lt;/app-root&gt;\n\n</code-example>\n<p translation-result=\"on\">ç•¶ä½ åœ¨å…ƒä»¶é¡ä¸­é…ç½®æœå‹™æ™‚ï¼Œç­è§£é€™ç¨® <code>&lt;#VIEW&gt;</code> åŠƒç•Œçš„æ€æƒ³å°¤å…¶é‡è¦ã€‚</p><p translation-origin=\"off\">Understanding the idea of the <code>&lt;#VIEW&gt;</code> demarcation is especially significant when you configure services in the component class.</p>\n\n<h2 id=\"providing-services-in-component\" translation-result=\"on\">åœ¨ <code>@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>()</code> ä¸­æä¾›æœå‹™<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#åœ¨-component-ä¸­æä¾›æœå‹™\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Providing services in <code>@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>()</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#providing-services-in-component\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">ä½ å¦‚ä½•é€é <code>@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>()</code>ï¼ˆæˆ– <code>@<a href=\"api/core/Directive\" class=\"code-anchor\">Directive</a>()</code>ï¼‰è£é£¾å™¨æä¾›æœå‹™æ±ºå®šäº†å®ƒå€‘çš„å¯è¦‹æ€§ã€‚ä»¥ä¸‹å„ç¯€ç¤ºç¯„äº† <code>providers</code> å’Œ <code>viewProviders</code> ä»¥åŠä½¿ç”¨ <code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code> å’Œ <code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code> ä¿®æ”¹æœå‹™å¯è¦‹æ€§çš„æ–¹æ³•ã€‚</p><p translation-origin=\"off\">How you provide services using a <code>@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>()</code> (or <code>@<a href=\"api/core/Directive\" class=\"code-anchor\">Directive</a>()</code>) decorator determines their visibility.\nThe following sections demonstrate <code>providers</code> and <code>viewProviders</code> along with ways to modify service visibility with <code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code> and <code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code>.</p>\n\n<p translation-result=\"on\">å…ƒä»¶é¡å¯ä»¥é€éå…©ç¨®æ–¹å¼æä¾›æœå‹™ï¼š</p><p translation-origin=\"off\">A component class can provide services in two ways:</p>\n\n<table>\n<thead>\n<tr>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">é™£åˆ—</nt-wrapper><nt-wrapper translation-origin=\"off\">Arrays</nt-wrapper></th>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">è©³æƒ…</nt-wrapper><nt-wrapper translation-origin=\"off\">Details</nt-wrapper></th>\n</tr>\n</thead>\n<tbody>\n\n<tr>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">ä½¿ç”¨ <code>providers</code> é™£åˆ—</nt-wrapper><nt-wrapper translation-origin=\"off\">With a <code>providers</code> array</nt-wrapper></td>\n<td align=\"left\"><code-example format=\"typescript\" language=\"typescript\"> @<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({ \n&nbsp; â€¦ \n&nbsp; providers: [ \n&nbsp;&nbsp;&nbsp; {provide: FlowerService, useValue: {emoji: 'ğŸŒº'}} \n&nbsp; ] \n}) </code-example></td>\n</tr>\n\n<tr>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">ä½¿ç”¨ <code>viewProviders</code> é™£åˆ—</nt-wrapper><nt-wrapper translation-origin=\"off\">With a <code>viewProviders</code> array</nt-wrapper></td>\n<td align=\"left\"><code-example format=\"typescript\" language=\"typescript\"> @<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({ \n&nbsp; â€¦ \n&nbsp;viewProviders: [ \n&nbsp;&nbsp;&nbsp; {provide: AnimalService, useValue: {emoji: 'ğŸ¶'}} \n&nbsp; ] \n}) </code-example></td>\n</tr>\n\n</tbody>\n</table>\n<p translation-result=\"on\">ç‚ºäº†è§£ <code>providers</code> å’Œ <code>viewProviders</code> å°æœå‹™å¯è¦‹æ€§çš„å½±éŸ¿æœ‰ä½•å·®ç•°ï¼Œä»¥ä¸‹å„ç¯€å°‡é€æ­¥å»ºæ§‹ä¸€å€‹ <live-example name=\"providers-viewproviders\"></live-example> ä¸¦åœ¨ç¨‹å¼ç¢¼å’Œé‚è¼¯æ¨¹ä¸­æ¯”è¼ƒ <code>providers</code> å’Œ <code>viewProviders</code> çš„ä½œç”¨ã€‚</p><p translation-origin=\"off\">To understand how the <code>providers</code> and <code>viewProviders</code> influence service visibility differently, the following sections build a <live-example name=\"providers-viewproviders\"></live-example> step-by-step and compare the use of <code>providers</code> and <code>viewProviders</code> in code and a logical tree.</p>\n\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\"><strong>æ³¨æ„</strong>ï¼š<br>\nåœ¨é‚è¼¯æ¨¹ä¸­ï¼Œä½ æœƒçœ‹åˆ° <code>@Provide</code>ï¼Œ<code>@<a href=\"api/core/Inject\" class=\"code-anchor\">Inject</a></code> å’Œ <code>@<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a></code>ï¼Œé€™äº›ä¸æ˜¯çœŸæ­£çš„ HTML å±¬æ€§ï¼Œåªæ˜¯ç‚ºäº†åœ¨é€™è£¡è­‰æ˜å…¶å¹•å¾Œçš„åŸç†ã€‚</p><p translation-origin=\"off\"><strong>NOTE</strong>: <br>\nIn the logical tree, you'll see <code>@Provide</code>, <code>@<a href=\"api/core/Inject\" class=\"code-anchor\">Inject</a></code>, and <code>@<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a></code>, which are not real HTML attributes but are here to demonstrate what is going on under the hood.</p>\n\n<table>\n<thead>\n<tr>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">Angular æœå‹™å±¬æ€§</nt-wrapper><nt-wrapper translation-origin=\"off\">Angular service attribute</nt-wrapper></th>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">è©³ç´°è³‡è¨Š</nt-wrapper><nt-wrapper translation-origin=\"off\">Details</nt-wrapper></th>\n</tr>\n</thead>\n<tbody>\n\n<tr>\n<td align=\"left\"><code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> @<a href=\"api/core/Inject\" class=\"code-anchor\">Inject</a>(Token)=&gt;Value </code-example></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">ç¤ºç¯„å¦‚æœ <code>Token</code> åœ¨é‚è¼¯æ¨¹ä¸­çš„æ­¤ä½ç½®æ³¨å…¥ï¼Œå…¶å€¼å°‡æ˜¯ <code>Value</code>ã€‚</nt-wrapper><nt-wrapper translation-origin=\"off\">Demonstrates that if <code>Token</code> is injected at this location in the logical tree its value would be <code>Value</code>.</nt-wrapper></td>\n</tr>\n\n<tr>\n<td align=\"left\"><code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> @Provide(Token=Value) </code-example></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">ç¤ºç¯„åœ¨é‚è¼¯æ¨¹ä¸­çš„æ­¤ä½ç½®æœ‰ä¸€å€‹å€¼ç‚º <code>Value</code> çš„ <code>Token</code> provider å®£å‘Šã€‚</nt-wrapper><nt-wrapper translation-origin=\"off\">Demonstrates that there is a declaration of <code>Token</code> provider with value <code>Value</code> at this location in the logical tree.</nt-wrapper></td>\n</tr>\n\n<tr>\n<td align=\"left\"><code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> @<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>(Token) </code-example></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">ç¤ºç¯„æ‡‰è©²åœ¨æ­¤ä½ç½®ä½¿ç”¨å¾Œå‚™ <code><a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a></code> æ³¨å…¥å™¨ã€‚</nt-wrapper><nt-wrapper translation-origin=\"off\">Demonstrates that a fallback <code><a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a></code> injector should be used at this location.</nt-wrapper></td>\n</tr>\n\n</tbody>\n</table>\n</div>\n<h3 id=\"example-app-structure\" translation-result=\"on\">æ‡‰ç”¨ç¨‹å¼çµæ§‹ç¯„ä¾‹<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#example-app-structure\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">Example app structure<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#example-app-structure\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">ç¯„ä¾‹æ‡‰ç”¨ç¨‹å¼çš„ <code>root</code> æä¾›äº† <code>FlowerService</code>ï¼Œå…¶ <code>emoji</code> å€¼ç‚º <code>ğŸŒº</code>ï¼ˆç´…è‰²èŠ™è“‰ï¼‰ã€‚</p><p translation-origin=\"off\">The example application has a <code>FlowerService</code> provided in <code>root</code> with an <code>emoji</code> value of red hibiscus <code>ğŸŒº</code>.</p>\n\n<code-example header=\"src/app/flower.service.ts\" path=\"providers-viewproviders/src/app/flower.service.ts\" region=\"flowerservice\">\n@<a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a>({\n  providedIn: 'root'\n})\nexport class FlowerService {\n  emoji = 'ğŸŒº';\n}\n\n</code-example>\n<p translation-result=\"on\">è€ƒæ…®ä¸€å€‹åªæœ‰ <code>AppComponent</code> å’Œ <code>ChildComponent</code> çš„ç°¡å–®æ‡‰ç”¨ç¨‹å¼ã€‚æœ€åŸºæœ¬çš„æ¸²æŸ“æª¢è¦–çœ‹èµ·ä¾†å°±åƒå·¢ç‹€(Nesting)çš„ HTML å…ƒç´ ï¼Œæ¯”å¦‚ï¼š</p><p translation-origin=\"off\">Consider an application with only an <code>AppComponent</code> and a <code>ChildComponent</code>.\nThe most basic rendered view would look like nested HTML elements such as the following:</p>\n\n<code-example format=\"html\" language=\"html\">\n\n&lt;app-root&gt; &lt;!-- AppComponent selector --&gt;\n    &lt;app-child&gt; &lt;!-- ChildComponent selector --&gt;\n    &lt;/app-child&gt;\n&lt;/app-root&gt;\n\n</code-example>\n<p translation-result=\"on\">ä½†æ˜¯ï¼Œåœ¨å¹•å¾Œï¼ŒAngular åœ¨è§£ææ³¨å…¥è«‹æ±‚æ™‚ä½¿ç”¨å¦‚ä¸‹é‚è¼¯è¦–åœ–è¡¨ç¤ºå½¢å¼ï¼š</p><p translation-origin=\"off\">However, behind the scenes, Angular uses a logical view representation as follows when resolving injection requests:</p>\n\n<code-example format=\"html\" language=\"html\">\n\n&lt;app-root&gt; &lt;!-- AppComponent selector --&gt;\n    &lt;#VIEW&gt;\n        &lt;app-child&gt; &lt;!-- ChildComponent selector --&gt;\n            &lt;#VIEW&gt;\n            &lt;/#VIEW&gt;\n        &lt;/app-child&gt;\n    &lt;/#VIEW&gt;\n&lt;/app-root&gt;\n\n</code-example>\n<p translation-result=\"on\">æ­¤è™•çš„ <code>&lt;#VIEW&gt;</code> è¡¨ç¤ºç¯„æœ¬çš„ä¾‹é …ã€‚è«‹æ³¨æ„ï¼Œæ¯å€‹å…ƒä»¶éƒ½æœ‰è‡ªå·±çš„ <code>&lt;#VIEW&gt;</code>ã€‚</p><p translation-origin=\"off\">The <code>&lt;#VIEW&gt;</code> here represents an instance of a template.\nNotice that each component has its own <code>&lt;#VIEW&gt;</code>.</p>\n\n<p translation-result=\"on\">ç­è§£æ­¤çµæ§‹å¯ä»¥å‘ŠçŸ¥ä½ å¦‚ä½•æä¾›å’Œæ³¨å…¥æœå‹™ï¼Œä¸¦å®Œå…¨æ§åˆ¶æœå‹™çš„å¯è¦‹æ€§ã€‚</p><p translation-origin=\"off\">Knowledge of this structure can inform how you provide and inject your services, and give you complete control of service visibility.</p>\n\n<p translation-result=\"on\">ç¾åœ¨ï¼Œè€ƒæ…® <code>&lt;app-root&gt;</code> åªæ³¨å…¥äº† <code>FlowerService</code>ï¼š</p><p translation-origin=\"off\">Now, consider that <code>&lt;app-root&gt;</code> injects the <code>FlowerService</code>:</p>\n\n<code-example header=\"src/app/app.component.ts\" path=\"providers-viewproviders/src/app/app.component.1.ts\" region=\"injection\">\nexport class AppComponent  {\n  constructor(public flower: FlowerService) {}\n}\n\n</code-example>\n<p translation-result=\"on\">å°‡ç¹«çµæ–°å¢åˆ° <code>&lt;app-root&gt;</code> ç¯„æœ¬ä¾†å°‡çµæœè¦–è¦ºåŒ–ï¼š</p><p translation-origin=\"off\">Add a binding to the <code>&lt;app-root&gt;</code> template to visualize the result:</p>\n\n<code-example header=\"src/app/app.component.html\" path=\"providers-viewproviders/src/app/app.component.html\" region=\"binding-flower\">\n&lt;p&gt;Emoji from FlowerService: {{flower.emoji}}&lt;/p&gt;\n\n</code-example>\n<p translation-result=\"on\">è©²æª¢è¦–ä¸­çš„è¼¸å‡ºç‚ºï¼š</p><p translation-origin=\"off\">The output in the view would be:</p>\n\n<code-example format=\"output\" hidecopy=\"\" language=\"shell\">\n\nEmoji from FlowerService: ğŸŒº\n\n</code-example>\n<p translation-result=\"on\">åœ¨é‚è¼¯æ¨¹ä¸­ï¼Œå¯ä»¥æŠŠå®ƒè¡¨ç¤ºæˆé€™æ¨£ï¼š</p><p translation-origin=\"off\">In the logical tree, this would be represented as follows:</p>\n\n<code-example format=\"html\" language=\"html\">\n\n&lt;app-root @<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>(AppModule)\n        @<a href=\"api/core/Inject\" class=\"code-anchor\">Inject</a>(FlowerService) flower=&gt;\"ğŸŒº\"&gt;\n  &lt;#VIEW&gt;\n    &lt;p&gt;Emoji from FlowerService: {{flower.emoji}} (ğŸŒº)&lt;/p&gt;\n    &lt;app-child&gt;\n      &lt;#VIEW&gt;\n      &lt;/#VIEW&gt;\n    &lt;/app-child&gt;\n  &lt;/#VIEW&gt;\n&lt;/app-root&gt;\n\n</code-example>\n<p translation-result=\"on\">ç•¶ <code>&lt;app-root&gt;</code> è«‹æ±‚ <code>FlowerService</code> æ™‚ï¼Œæ³¨å…¥å™¨çš„å·¥ä½œå°±æ˜¯è§£æ <code>FlowerService</code> ä»¤ç‰Œã€‚ä»¤ç‰Œçš„è§£æåˆ†ç‚ºå…©å€‹éšæ®µï¼š</p><p translation-origin=\"off\">When <code>&lt;app-root&gt;</code> requests the <code>FlowerService</code>, it is the injector's job to resolve the <code>FlowerService</code> token.\nThe resolution of the token happens in two phases:</p>\n\n<ol>\n<li>\n<p translation-result=\"on\">æ³¨å…¥å™¨ç¢ºå®šé‚è¼¯æ¨¹ä¸­æœç´¢çš„é–‹å§‹ä½ç½®å’ŒçµæŸä½ç½®ã€‚æ³¨å…¥ç¨‹å¼å¾èµ·å§‹ä½ç½®é–‹å§‹ï¼Œä¸¦åœ¨é‚è¼¯æ¨¹çš„æ¯å€‹ç´šåˆ¥ä¸ŠæŸ¥è©¢ä»¤ç‰Œã€‚å¦‚æœæ‰¾åˆ°ä»¤ç‰Œï¼Œå‰‡å°‡å…¶è¿”å›ã€‚</p><p translation-origin=\"off\">The injector determines the starting location in the logical tree and an ending location of the search.\nThe injector begins with the starting location and looks for the token at each level in the logical tree.\nIf the token is found it is returned.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">å¦‚æœæœªæ‰¾åˆ°ä»¤ç‰Œï¼Œå‰‡æ³¨å…¥ç¨‹å¼å°‡å°‹æ‰¾æœ€æ¥è¿‘çš„çˆ¶ <code>@<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>()</code> å§”æ´¾è©²è«‹æ±‚ã€‚</p><p translation-origin=\"off\">If the token is not found, the injector looks for the closest parent <code>@<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>()</code> to delegate the request to.</p>\n\n</li>\n</ol>\n<p translation-result=\"on\">åœ¨é€™å€‹ä¾‹å­ä¸­ï¼Œç´„æŸç‚ºï¼š</p><p translation-origin=\"off\">In the example case, the constraints are:</p>\n\n<ol>\n<li>\n<p translation-result=\"on\">å¾å±¬æ–¼ <code>&lt;app-root&gt;</code> çš„ <code>&lt;#VIEW&gt;</code> é–‹å§‹ï¼Œä¸¦çµæŸæ–¼ <code>&lt;app-root&gt;</code>ã€‚</p><p translation-origin=\"off\">Start with <code>&lt;#VIEW&gt;</code> belonging to <code>&lt;app-root&gt;</code> and end with <code>&lt;app-root&gt;</code>.</p>\n\n<ul>\n<li>\n<p translation-result=\"on\">é€šå¸¸ï¼Œæœå°‹çš„èµ·é»å°±æ˜¯æ³¨å…¥é»ã€‚ä½†æ˜¯ï¼Œåœ¨é€™å€‹ä¾‹å­ä¸­ï¼Œ<code>&lt;app-root&gt;</code> <code>@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a></code> çš„ç‰¹æ®Šä¹‹è™•åœ¨æ–¼å®ƒå€‘é‚„åŒ…æ‹¬è‡ªå·±çš„ <code>viewProviders</code>ï¼Œé€™å°±æ˜¯ç‚ºä»€éº¼æœå°‹å¾ <code>&lt;app-root&gt;</code> çš„ <code>&lt;#VIEW&gt;</code> é–‹å§‹çš„åŸå› ã€‚å°æ–¼åŒ¹é…åŒä¸€ä½ç½®çš„æŒ‡ä»¤ï¼Œæƒ…æ³å»ä¸¦éå¦‚æ­¤ã€‚</p><p translation-origin=\"off\">Normally the starting point for search is at the point of injection.\nHowever, in this case <code>&lt;app-root&gt;</code> <code>@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a></code>s are special in that they also include their own <code>viewProviders</code>, which is why the search starts at <code>&lt;#VIEW&gt;</code> belonging to <code>&lt;app-root&gt;</code>.\nThis would not be the case for a directive matched at the same location.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">çµæŸä½ç½®æ°å¥½èˆ‡å…ƒä»¶æœ¬èº«ç›¸åŒï¼Œå› ç‚ºå®ƒå°±æ˜¯æ­¤æ‡‰ç”¨ç¨‹å¼ä¸­æœ€æœ€ä¸Šå±¤çš„å…ƒä»¶ã€‚</p><p translation-origin=\"off\">The ending location happens to be the same as the component itself, because it is the topmost component in this application.</p>\n\n</li>\n</ul>\n</li>\n<li>\n<p translation-result=\"on\">ç•¶åœ¨ <code>ElementInjector</code> ä¸­æ‰¾ä¸åˆ°æ³¨å…¥ä»¤ç‰Œæ™‚ï¼Œå°±ç”¨ <code>AppModule</code> å……ç•¶å¾Œå‚™æ³¨å…¥å™¨ã€‚</p><p translation-origin=\"off\">The <code>AppModule</code> acts as the fallback injector when the injection token can't be found in the <code>ElementInjector</code> hierarchies.</p>\n\n</li>\n</ol>\n<h3 id=\"using-the-providers-array\" translation-result=\"on\">ä½¿ç”¨ <code>providers</code> é™£åˆ—<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#using-the-providers-array\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">Using the <code>providers</code> array<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#using-the-providers-array\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">ç¾åœ¨ï¼Œåœ¨ <code>ChildComponent</code> é¡ä¸­ï¼Œç‚º <code>FlowerService</code> æ–°å¢ä¸€å€‹æä¾›è€…ï¼Œä»¥ä¾¿åœ¨æ¥ä¸‹ä¾†çš„å°ç¯€ä¸­ç¤ºç¯„æ›´å¾©é›œçš„è§£æè¦å‰‡ï¼š</p><p translation-origin=\"off\">Now, in the <code>ChildComponent</code> class, add a provider for <code>FlowerService</code> to demonstrate more complex resolution rules in the upcoming sections:</p>\n\n<code-example header=\"src/app/child.component.ts\" path=\"providers-viewproviders/src/app/child/child.component.1.ts\" region=\"flowerservice\">\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app-child',\n  templateUrl: './child.component.html',\n  styleUrls: ['./child.component.css'],\n  // use the providers array to provide a service\n  providers: [{ provide: FlowerService, useValue: { emoji: 'ğŸŒ»' } }]\n})\n\nexport class ChildComponent {\n  // inject the service\n  constructor( public flower: FlowerService) { }\n}\n\n\n</code-example>\n<p translation-result=\"on\">ç¾åœ¨ï¼Œåœ¨ <code>@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>()</code> è£é£¾å™¨ä¸­æä¾›äº† <code>FlowerService</code>ï¼Œç•¶ <code>&lt;app-child&gt;</code> è«‹æ±‚è©²æœå‹™æ™‚ï¼Œæ³¨å…¥å™¨åƒ…éœ€è¦æŸ¥è©¢ <code>&lt;app-child&gt;</code> ä¸­çš„ <code>ElementInjector</code>ã€‚ä¸å¿…å†é€éæ³¨å…¥å™¨æ¨¹ç¹¼çºŒæœå°‹ã€‚</p><p translation-origin=\"off\">Now that the <code>FlowerService</code> is provided in the <code>@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>()</code> decorator, when the <code>&lt;app-child&gt;</code> requests the service, the injector has only to look as far as the <code>ElementInjector</code> in the <code>&lt;app-child&gt;</code>.\nIt won't have to continue the search any further through the injector tree.</p>\n\n<p translation-result=\"on\">ä¸‹ä¸€æ­¥æ˜¯å°‡ç¹«çµæ–°å¢åˆ° <code>ChildComponent</code> ç¯„æœ¬ã€‚</p><p translation-origin=\"off\">The next step is to add a binding to the <code>ChildComponent</code> template.</p>\n\n<code-example header=\"src/app/child.component.html\" path=\"providers-viewproviders/src/app/child/child.component.html\" region=\"flower-binding\">\n&lt;p&gt;Emoji from FlowerService: {{flower.emoji}}&lt;/p&gt;\n\n</code-example>\n<p translation-result=\"on\">è¦æ¸²æŸ“æ–°çš„å€¼ï¼Œè«‹åœ¨ <code>AppComponent</code> ç¯„æœ¬çš„åº•éƒ¨æ–°å¢ <code>&lt;app-child&gt;</code>ï¼Œä»¥ä¾¿å…¶æª¢è¦–ä¹Ÿé¡¯ç¤ºå‘æ—¥è‘µï¼š</p><p translation-origin=\"off\">To render the new values, add <code>&lt;app-child&gt;</code> to the bottom of the <code>AppComponent</code> template so the view also displays the sunflower:</p>\n\n<code-example format=\"output\" hidecopy=\"\" language=\"shell\">\n\nChild Component\nEmoji from FlowerService: ğŸŒ»\n\n</code-example>\n<p translation-result=\"on\">åœ¨é‚è¼¯æ¨¹ä¸­ï¼Œå¯ä»¥æŠŠå®ƒè¡¨ç¤ºæˆé€™æ¨£ï¼š</p><p translation-origin=\"off\">In the logical tree, this is represented as follows:</p>\n\n<code-example format=\"html\" language=\"html\">\n\n&lt;app-root @<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>(AppModule)\n        @<a href=\"api/core/Inject\" class=\"code-anchor\">Inject</a>(FlowerService) flower=&gt;\"ğŸŒº\"&gt;\n  &lt;#VIEW&gt;\n    &lt;p&gt;Emoji from FlowerService: {{flower.emoji}} (ğŸŒº)&lt;/p&gt;\n    &lt;app-child @Provide(FlowerService=\"ğŸŒ»\")\n               @<a href=\"api/core/Inject\" class=\"code-anchor\">Inject</a>(FlowerService)=&gt;\"ğŸŒ»\"&gt; &lt;!-- search ends here --&gt;\n      &lt;#VIEW&gt; &lt;!-- search starts here --&gt;\n        &lt;h2&gt;Parent <a href=\"api/core/Component\" class=\"code-anchor\">Component</a>&lt;/h2&gt;\n        &lt;p&gt;Emoji from FlowerService: {{flower.emoji}} (ğŸŒ»)&lt;/p&gt;\n      &lt;/#VIEW&gt;\n    &lt;/app-child&gt;\n  &lt;/#VIEW&gt;\n&lt;/app-root&gt;\n\n</code-example>\n<p translation-result=\"on\">ç•¶ <code>&lt;app-child&gt;</code> è«‹æ±‚ <code>FlowerService</code> æ™‚ï¼Œæ³¨å…¥å™¨å¾ <code>&lt;app-child&gt;</code> çš„ <code>&lt;#VIEW&gt;</code> é–‹å§‹æœå°‹ï¼ˆåŒ…æ‹¬ <code>&lt;#VIEW&gt;</code>ï¼Œå› ç‚ºå®ƒæ˜¯å¾ <code>@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>()</code> æ³¨å…¥çš„ï¼‰ï¼Œä½µåˆ° <code>&lt;app-child&gt;</code> çµæŸã€‚åœ¨é€™å€‹ä¾‹å­ä¸­ï¼Œ<code>FlowerService</code> åœ¨ <code>&lt;app-child&gt;</code> çš„ <code>providers</code> é™£åˆ—ä¸­è§£æç‚ºå‘æ—¥è‘µğŸŒ»ã€‚æ³¨å…¥å™¨ä¸å¿…åœ¨æ³¨å…¥å™¨æ¨¹ä¸­é€²ä¸€æ­¥æŸ¥è©¢ã€‚ä¸€æ—¦æ‰¾åˆ° <code>FlowerService</code>ï¼Œå®ƒä¾¿åœæ­¢åŸ·è¡Œï¼Œå†ä¹Ÿçœ‹ä¸åˆ°ğŸŒºï¼ˆç´…èŠ™è“‰ï¼‰ã€‚</p><p translation-origin=\"off\">When <code>&lt;app-child&gt;</code> requests the <code>FlowerService</code>, the injector begins its search at the <code>&lt;#VIEW&gt;</code> belonging to <code>&lt;app-child&gt;</code> (<code>&lt;#VIEW&gt;</code> is included because it is injected from <code>@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>()</code>) and ends with <code>&lt;app-child&gt;</code>.\nIn this case, the <code>FlowerService</code> is resolved in the <code>providers</code> array with sunflower <code>ğŸŒ»</code> of the <code>&lt;app-child&gt;</code>.\nThe injector doesn't have to look any further in the injector tree.\nIt stops as soon as it finds the <code>FlowerService</code> and never sees the red hibiscus <code>ğŸŒº</code>.</p>\n\n<p><a id=\"use-view-providers\"></a></p>\n<h3 id=\"using-the-viewproviders-array\" translation-result=\"on\">ä½¿ç”¨ <code>viewProviders</code> é™£åˆ—<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#using-the-viewproviders-array\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">Using the <code>viewProviders</code> array<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#using-the-viewproviders-array\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">ä½¿ç”¨ <code>viewProviders</code> é™£åˆ—æ˜¯åœ¨ <code>@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>()</code> è£é£¾å™¨ä¸­æä¾›æœå‹™çš„å¦ä¸€ç¨®æ–¹æ³•ã€‚ä½¿ç”¨ <code>viewProviders</code> ä½¿æœå‹™åœ¨ <code>&lt;#VIEW&gt;</code> ä¸­å¯è¦‹ã€‚</p><p translation-origin=\"off\">Use the <code>viewProviders</code> array as another way to provide services in the <code>@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>()</code> decorator.\nUsing <code>viewProviders</code> makes services visible in the <code>&lt;#VIEW&gt;</code>.</p>\n\n<div class=\"is-helpful alert\">\n<p translation-result=\"on\">é™¤äº†ä½¿ç”¨ <code>viewProviders</code> é™£åˆ—å¤–ï¼Œå…¶å®ƒæ­¥é©Ÿèˆ‡ä½¿ç”¨ <code>providers</code> é™£åˆ—ç›¸åŒã€‚</p><p translation-origin=\"off\">The steps are the same as using the <code>providers</code> array, with the exception of using the <code>viewProviders</code> array instead.</p>\n\n<p translation-result=\"on\">é—œæ–¼é€™äº›æ­¥é©Ÿçš„èªªæ˜ï¼Œè«‹ç¹¼çºŒæœ¬ç¯€ã€‚å¦‚æœä½ å¯ä»¥è‡ªè¡Œè¨­å®šï¼Œè«‹è·³è‡³<a href=\"guide/hierarchical-dependency-injection#modify-visibility\">ä¿®æ”¹æœå‹™å¯ç”¨æ€§</a> ä¸€ç¯€ã€‚</p><p translation-origin=\"off\">For step-by-step instructions, continue with this section.\nIf you can set it up on your own, skip ahead to <a href=\"guide/hierarchical-dependency-injection#modify-visibility\">Modifying service availability</a>.</p>\n\n</div>\n<p translation-result=\"on\">è©²ç¯„ä¾‹æ‡‰ç”¨ç¨‹å¼å…·æœ‰ç¬¬äºŒå€‹æœå‹™ <code>AnimalService</code> ä¾†ç¤ºç¯„ <code>viewProviders</code>ã€‚</p><p translation-origin=\"off\">The example application features a second service, the <code>AnimalService</code> to demonstrate <code>viewProviders</code>.</p>\n\n<p translation-result=\"on\">é¦–å…ˆï¼Œå»ºç«‹ä¸€å€‹ <code>AnimalService</code> èˆ‡ <code>emoji</code> çš„ğŸ³ï¼ˆé¯¨é­šï¼‰å±¬æ€§ï¼š</p><p translation-origin=\"off\">First, create an <code>AnimalService</code> with an <code>emoji</code> property of whale <code>ğŸ³</code>:</p>\n\n<code-example header=\"src/app/animal.service.ts\" path=\"providers-viewproviders/src/app/animal.service.ts\" region=\"animal-service\">\nimport { <a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a> } from '@angular/core';\n\n@<a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a>({\n  providedIn: 'root'\n})\nexport class AnimalService {\n  emoji = 'ğŸ³';\n}\n\n</code-example>\n<p translation-result=\"on\">éµå¾ªèˆ‡ <code>FlowerService</code> ç›¸åŒçš„æ¨¡å¼ï¼Œå°‡ <code>AnimalService</code> æ³¨å…¥ <code>AppComponent</code> é¡ï¼š</p><p translation-origin=\"off\">Following the same pattern as with the <code>FlowerService</code>, inject the <code>AnimalService</code> in the <code>AppComponent</code> class:</p>\n\n<code-example header=\"src/app/app.component.ts\" path=\"providers-viewproviders/src/app/app.component.ts\" region=\"inject-animal-service\">\nexport class AppComponent  {\n  constructor(public flower: FlowerService, public animal: AnimalService) {}\n}\n\n</code-example>\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\"><strong>æ³¨æ„</strong>ï¼š<br>\nä½ å¯ä»¥ä¿ç•™æ‰€æœ‰èˆ‡ <code>FlowerService</code> ç›¸é—œçš„ç¨‹å¼ç¢¼ï¼Œå› ç‚ºå®ƒå¯ä»¥èˆ‡ <code>AnimalService</code> é€²è¡Œæ¯”è¼ƒã€‚</p><p translation-origin=\"off\"><strong>NOTE</strong>: <br>\nYou can leave all the <code>FlowerService</code> related code in place as it will allow a comparison with the <code>AnimalService</code>.</p>\n\n</div>\n<p translation-result=\"on\">æ–°å¢ä¸€å€‹ <code>viewProviders</code> é™£åˆ—ï¼Œä¸¦å°‡ <code>AnimalService</code> ä¹Ÿæ³¨å…¥åˆ° <code>&lt;app-child&gt;</code> é¡ä¸­ï¼Œä½†æ˜¯çµ¦ <code>emoji</code> ä¸€å€‹ä¸åŒçš„å€¼ã€‚åœ¨é€™è£¡ï¼Œå®ƒçš„å€¼ç‚ºğŸ¶ï¼ˆå°ç‹—ï¼‰ã€‚</p><p translation-origin=\"off\">Add a <code>viewProviders</code> array and inject the <code>AnimalService</code> in the <code>&lt;app-child&gt;</code> class, too, but give <code>emoji</code> a different value.\nHere, it has a value of dog <code>ğŸ¶</code>.</p>\n\n<code-example header=\"src/app/child.component.ts\" path=\"providers-viewproviders/src/app/child/child.component.ts\" region=\"provide-animal-service\">\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app-child',\n  templateUrl: './child.component.html',\n  styleUrls: ['./child.component.css'],\n  // provide services\n  providers: [{ provide: FlowerService, useValue: { emoji: 'ğŸŒ»' } }],\n  viewProviders: [{ provide: AnimalService, useValue: { emoji: 'ğŸ¶' } }]\n})\n\nexport class ChildComponent {\n  // inject service\n  constructor( public flower: FlowerService, public animal: AnimalService) { }\n}\n\n</code-example>\n<p translation-result=\"on\">å°‡ç¹«çµæ–°å¢åˆ° <code>ChildComponent</code> å’Œ <code>AppComponent</code> ç¯„æœ¬ã€‚åœ¨ <code>ChildComponent</code> ç¯„æœ¬ä¸­ï¼Œæ–°å¢ä»¥ä¸‹ç¹«çµï¼š</p><p translation-origin=\"off\">Add bindings to the <code>ChildComponent</code> and the <code>AppComponent</code> templates.\nIn the <code>ChildComponent</code> template, add the following binding:</p>\n\n<code-example header=\"src/app/child.component.html\" path=\"providers-viewproviders/src/app/child/child.component.html\" region=\"animal-binding\">\n&lt;p&gt;Emoji from AnimalService: {{animal.emoji}}&lt;/p&gt;\n\n</code-example>\n<p translation-result=\"on\">æ­¤å¤–ï¼Œå°‡å…¶æ–°å¢åˆ° <code>AppComponent</code> ç¯„æœ¬ï¼š</p><p translation-origin=\"off\">Additionally, add the same to the <code>AppComponent</code> template:</p>\n\n<code-example header=\"src/app/app.component.html\" path=\"providers-viewproviders/src/app/app.component.html\" region=\"binding-animal\">\n&lt;p&gt;Emoji from AnimalService: {{animal.emoji}}&lt;/p&gt;\n\n</code-example>\n<p translation-result=\"on\">ç¾åœ¨ï¼Œä½ æ‡‰è©²åœ¨ç€è¦½å™¨ä¸­çœ‹åˆ°å…©å€‹å€¼ï¼š</p><p translation-origin=\"off\">Now you should see both values in the browser:</p>\n\n<code-example format=\"output\" hidecopy=\"\" language=\"shell\">\n\nAppComponent\nEmoji from AnimalService: ğŸ³\n\nChild Component\nEmoji from AnimalService: ğŸ¶\n\n</code-example>\n<p translation-result=\"on\">æ­¤ <code>viewProviders</code> ç¯„ä¾‹çš„é‚è¼¯æ¨¹å¦‚ä¸‹ï¼š</p><p translation-origin=\"off\">The logic tree for this example of <code>viewProviders</code> is as follows:</p>\n\n<code-example format=\"html\" language=\"html\">\n\n&lt;app-root @<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>(AppModule)\n         @<a href=\"api/core/Inject\" class=\"code-anchor\">Inject</a>(AnimalService) animal=&gt;\"ğŸ³\"&gt;\n  &lt;#VIEW&gt;\n    &lt;app-child&gt;\n      &lt;#VIEW @Provide(AnimalService=\"ğŸ¶\")\n            @<a href=\"api/core/Inject\" class=\"code-anchor\">Inject</a>(AnimalService=&gt;\"ğŸ¶\")&gt;\n       &lt;!-- ^^using viewProviders means AnimalService is available in &lt;#VIEW&gt;--&gt;\n       &lt;p&gt;Emoji from AnimalService: {{animal.emoji}} (ğŸ¶)&lt;/p&gt;\n      &lt;/#VIEW&gt;\n    &lt;/app-child&gt;\n  &lt;/#VIEW&gt;\n&lt;/app-root&gt;\n\n</code-example>\n<p translation-result=\"on\">èˆ‡ <code>FlowerService</code> ç¯„ä¾‹ä¸€æ¨£ï¼Œ<code>&lt;app-child&gt;</code> <code>@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>()</code> è£é£¾å™¨ä¸­æä¾›äº† <code>AnimalService</code>ã€‚é€™æ„å‘³è‘—ï¼Œç”±æ–¼æ³¨å…¥å™¨é¦–å…ˆåœ¨å…ƒä»¶çš„ <code>ElementInjector</code> ä¸­æŸ¥è©¢ï¼Œå› æ­¤å®ƒå°‡æ‰¾åˆ° <code>AnimalService</code> çš„å€¼ ğŸ¶ï¼ˆå°ç‹—ï¼‰ã€‚å®ƒä¸éœ€è¦ç¹¼çºŒæœå°‹ <code>ElementInjector</code> æ¨¹ï¼Œä¹Ÿä¸éœ€è¦æœå°‹ <code>ModuleInjector</code>ã€‚</p><p translation-origin=\"off\">Just as with the <code>FlowerService</code> example, the <code>AnimalService</code> is provided in the <code>&lt;app-child&gt;</code> <code>@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>()</code> decorator.\nThis means that since the injector first looks in the <code>ElementInjector</code> of the component, it finds the <code>AnimalService</code> value of dog <code>ğŸ¶</code>.\nIt doesn't need to continue searching the <code>ElementInjector</code> tree, nor does it need to search the <code>ModuleInjector</code>.</p>\n\n<h3 id=\"providers-vs-viewproviders\" translation-result=\"on\"><code>providers</code> èˆ‡ <code>viewProviders</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#providers-vs-viewproviders\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\"><code>providers</code> vs. <code>viewProviders</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#providers-vs-viewproviders\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">ç‚ºäº†çœ‹æ¸… <code>providers</code> å’Œ <code>viewProviders</code> çš„å·®ç•°ï¼Œè«‹åœ¨ç¯„ä¾‹ä¸­æ–°å¢å¦ä¸€å€‹å…ƒä»¶ï¼Œä¸¦å°‡å…¶å‘½åç‚º <code>InspectorComponent</code>ã€‚<code>InspectorComponent</code> å°‡æ˜¯ <code>ChildComponent</code> çš„å­ <code>ChildComponent</code>ã€‚åœ¨ <code>inspector.component.ts</code> ä¸­ï¼Œå°‡ <code>FlowerService</code> å’Œ <code>AnimalService</code> æ³¨å…¥å»ºæ§‹å‡½å¼ä¸­ï¼š</p><p translation-origin=\"off\">To see the difference between using <code>providers</code> and <code>viewProviders</code>, add another component to the example and call it <code>InspectorComponent</code>.\n<code>InspectorComponent</code> will be a child of the <code>ChildComponent</code>.\nIn <code>inspector.component.ts</code>, inject the <code>FlowerService</code> and <code>AnimalService</code> in the constructor:</p>\n\n<code-example header=\"src/app/inspector/inspector.component.ts\" path=\"providers-viewproviders/src/app/inspector/inspector.component.ts\" region=\"injection\">\nexport class InspectorComponent {\n  constructor(public flower: FlowerService, public animal: AnimalService) { }\n}\n\n</code-example>\n<p translation-result=\"on\">ä½ ä¸éœ€è¦ <code>providers</code> æˆ– <code>viewProviders</code> é™£åˆ—ã€‚æ¥ä¸‹ä¾†ï¼Œåœ¨ <code>inspector.component.html</code> ä¸­ï¼Œå¾ä»¥å‰çš„å…ƒä»¶ä¸­æ–°å¢ç›¸åŒçš„ htmlï¼š</p><p translation-origin=\"off\">You do not need a <code>providers</code> or <code>viewProviders</code> array.\nNext, in <code>inspector.component.html</code>, add the same markup from previous components:</p>\n\n<code-example header=\"src/app/inspector/inspector.component.html\" path=\"providers-viewproviders/src/app/inspector/inspector.component.html\" region=\"binding\">\n&lt;p&gt;Emoji from FlowerService: {{flower.emoji}}&lt;/p&gt;\n&lt;p&gt;Emoji from AnimalService: {{animal.emoji}}&lt;/p&gt;\n\n</code-example>\n<p translation-result=\"on\">åˆ¥å¿˜äº†å°‡ <code>InspectorComponent</code> æ–°å¢åˆ° <code>AppModule</code> <code>declarations</code> é™£åˆ—ã€‚</p><p translation-origin=\"off\">Remember to add the <code>InspectorComponent</code> to the <code>AppModule</code> <code>declarations</code> array.</p>\n\n<code-example header=\"src/app/app.module.ts\" path=\"providers-viewproviders/src/app/app.module.ts\" region=\"appmodule\">\n@<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>({\n  imports:      [ <a href=\"api/platform-browser/BrowserModule\" class=\"code-anchor\">BrowserModule</a>, <a href=\"api/forms/FormsModule\" class=\"code-anchor\">FormsModule</a> ],\n  declarations: [ AppComponent, ChildComponent, InspectorComponent ],\n  bootstrap:    [ AppComponent ],\n  providers: []\n})\nexport class AppModule { }\n\n</code-example>\n<p translation-result=\"on\">æ¥ä¸‹ä¾†ï¼Œç¢ºä¿ä½ çš„ <code>child.component.html</code> åŒ…å«ä»¥ä¸‹å…§å®¹ï¼š</p><p translation-origin=\"off\">Next, make sure your <code>child.component.html</code> contains the following:</p>\n\n<code-example header=\"src/app/child/child.component.html\" path=\"providers-viewproviders/src/app/child/child.component.html\" region=\"child-component\">\n&lt;p&gt;Emoji from FlowerService: {{flower.emoji}}&lt;/p&gt;\n&lt;p&gt;Emoji from AnimalService: {{animal.emoji}}&lt;/p&gt;\n\n&lt;div class=\"container\"&gt;\n  &lt;h3&gt;Content projection&lt;/h3&gt;\n\t&lt;ng-content&gt;&lt;/ng-content&gt;\n&lt;/div&gt;\n\n&lt;h3&gt;Inside the view&lt;/h3&gt;\n&lt;app-inspector&gt;&lt;/app-inspector&gt;\n\n</code-example>\n<p translation-result=\"on\">å‰å…©è¡Œå¸¶æœ‰ç¹«çµï¼Œä¾†è‡ªä¹‹å‰çš„æ­¥é©Ÿã€‚æ–°çš„éƒ¨åˆ†æ˜¯ <code><a href=\"api/core/ng-content\" class=\"code-anchor\">&lt;ng-content&gt;</a></code> å’Œ <code>&lt;app-inspector&gt;</code>ã€‚<code><a href=\"api/core/ng-content\" class=\"code-anchor\">&lt;ng-content&gt;</a></code> å…è¨±ä½ æŠ•å½±å…§å®¹ï¼Œ<code>ChildComponent</code> ç¯„æœ¬ä¸­çš„ <code>&lt;app-inspector&gt;</code> ä½¿ <code>InspectorComponent</code> æˆç‚º <code>ChildComponent</code> çš„å­å…ƒä»¶ã€‚</p><p translation-origin=\"off\">The first two lines, with the bindings, are there from previous steps.\nThe new parts are  <code><a href=\"api/core/ng-content\" class=\"code-anchor\">&lt;ng-content&gt;</a></code> and <code>&lt;app-inspector&gt;</code>.\n<code><a href=\"api/core/ng-content\" class=\"code-anchor\">&lt;ng-content&gt;</a></code> allows you to project content, and <code>&lt;app-inspector&gt;</code> inside the <code>ChildComponent</code> template makes the <code>InspectorComponent</code> a child component of <code>ChildComponent</code>.</p>\n\n<p translation-result=\"on\">æ¥ä¸‹ä¾†ï¼Œå°‡ä»¥ä¸‹å…§å®¹æ–°å¢åˆ° <code>app.component.html</code> ä¸­ä»¥åˆ©ç”¨å…§å®¹æŠ•å½±çš„å„ªå‹¢ã€‚</p><p translation-origin=\"off\">Next, add the following to <code>app.component.html</code> to take advantage of content projection.</p>\n\n<code-example header=\"src/app/app.component.html\" path=\"providers-viewproviders/src/app/app.component.html\" region=\"content-projection\">\n&lt;app-child&gt;&lt;app-inspector&gt;&lt;/app-inspector&gt;&lt;/app-child&gt;\n\n</code-example>\n<p translation-result=\"on\">ç¾åœ¨ï¼Œç€è¦½å™¨å°‡æ¸²æŸ“ä»¥ä¸‹å…§å®¹ï¼Œç‚ºç°¡æ½”èµ·è¦‹ï¼Œçœç•¥äº†å‰é¢çš„ç¯„ä¾‹ï¼š</p><p translation-origin=\"off\">The browser now renders the following, omitting the previous examples for brevity:</p>\n\n<code-example format=\"output\" hidecopy=\"\" language=\"shell\">\n\n//â€¦Omitting previous examples. The following applies to this section.\n\nContent projection: this is coming from content. Doesn't get to see\npuppy because the puppy is declared inside the view only.\n\nEmoji from FlowerService: ğŸŒ»\nEmoji from AnimalService: ğŸ³\n\nEmoji from FlowerService: ğŸŒ»\nEmoji from AnimalService: ğŸ¶\n\n</code-example>\n<p translation-result=\"on\">é€™å››å€‹ç¹«çµèªªæ˜äº† <code>providers</code> å’Œ <code>viewProviders</code> ä¹‹é–“çš„å€åˆ¥ã€‚ç”±æ–¼ğŸ¶ï¼ˆå°ç‹—ï¼‰åœ¨ <code>&lt;#VIEW&gt;</code> ä¸­å®£å‘Šï¼Œå› æ­¤æŠ•å½±å…§å®¹ä¸å¯è¦‹ã€‚æŠ•å½±çš„å…§å®¹ä¸­æœƒçœ‹åˆ°ğŸ³ï¼ˆé¯¨é­šï¼‰ã€‚</p><p translation-origin=\"off\">These four bindings demonstrate the difference between <code>providers</code> and <code>viewProviders</code>.\nSince the dog <code>ğŸ¶</code> is declared inside the <code>&lt;#VIEW&gt;</code>, it isn't visible to the projected content.\nInstead, the projected content sees the whale <code>ğŸ³</code>.</p>\n\n<p translation-result=\"on\">ä½†æ˜¯ä¸‹ä¸€éƒ¨åˆ†ï¼Œ<code>InspectorComponent</code> æ˜¯ <code>ChildComponent</code> çš„å­å…ƒä»¶ï¼Œ<code>InspectorComponent</code> åœ¨ <code>&lt;#VIEW&gt;</code> å…§éƒ¨ï¼Œå› æ­¤ç•¶å®ƒè«‹æ±‚ <code>AnimalService</code> æ™‚ï¼Œå®ƒæœƒçœ‹åˆ°ğŸ¶ï¼ˆå°ç‹—ï¼‰ã€‚</p><p translation-origin=\"off\">The next section though, where <code>InspectorComponent</code> is a child component of <code>ChildComponent</code>, <code>InspectorComponent</code> is inside the <code>&lt;#VIEW&gt;</code>, so when it asks for the <code>AnimalService</code>, it sees the dog <code>ğŸ¶</code>.</p>\n\n<p translation-result=\"on\">é‚è¼¯æ¨¹ä¸­çš„ <code>AnimalService</code> å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p translation-origin=\"off\">The <code>AnimalService</code> in the logical tree would look like this:</p>\n\n<code-example format=\"html\" language=\"html\">\n\n&lt;app-root @<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>(AppModule)\n         @<a href=\"api/core/Inject\" class=\"code-anchor\">Inject</a>(AnimalService) animal=&gt;\"ğŸ³\"&gt;\n  &lt;#VIEW&gt;\n    &lt;app-child&gt;\n      &lt;#VIEW @Provide(AnimalService=\"ğŸ¶\")\n            @<a href=\"api/core/Inject\" class=\"code-anchor\">Inject</a>(AnimalService=&gt;\"ğŸ¶\")&gt;\n        &lt;!-- ^^using viewProviders means AnimalService is available in &lt;#VIEW&gt;--&gt;\n        &lt;p&gt;Emoji from AnimalService: {{animal.emoji}} (ğŸ¶)&lt;/p&gt;\n  \n        &lt;div class=\"container\"&gt;\n          &lt;h3&gt;Content projection&lt;/h3&gt;\n          &lt;app-inspector @<a href=\"api/core/Inject\" class=\"code-anchor\">Inject</a>(AnimalService) animal=&gt;\"ğŸ³\"&gt;\n            &lt;p&gt;Emoji from AnimalService: {{animal.emoji}} (ğŸ³)&lt;/p&gt;\n          &lt;/app-inspector&gt;\n        &lt;/div&gt;\n  \n      &lt;/#VIEW&gt;\n      &lt;app-inspector&gt;\n        &lt;#VIEW&gt;\n          &lt;p&gt;Emoji from AnimalService: {{animal.emoji}} (ğŸ¶)&lt;/p&gt;\n        &lt;/#VIEW&gt;\n      &lt;/app-inspector&gt;\n    &lt;/app-child&gt;\n  &lt;/#VIEW&gt;\n&lt;/app-root&gt;\n\n</code-example>\n<p translation-result=\"on\"><code>&lt;app-inspector&gt;</code> çš„æŠ•å½±å…§å®¹ä¸­çœ‹åˆ°äº†ğŸ³ï¼ˆé¯¨é­šï¼‰ï¼Œè€Œä¸æ˜¯ğŸ¶ï¼ˆå°ç‹—ï¼‰ï¼Œå› ç‚ºğŸ¶ï¼ˆå°ç‹—ï¼‰åœ¨ <code>&lt;app-child&gt;</code> çš„ <code>&lt;#VIEW&gt;</code> ä¸­ã€‚å¦‚æœ <code>&lt;app-inspector&gt;</code> ä¹Ÿä½æ–¼ <code>&lt;#VIEW&gt;</code> å‰‡åªèƒ½çœ‹åˆ°ğŸ¶ï¼ˆå°ç‹—ï¼‰ã€‚</p><p translation-origin=\"off\">The projected content of <code>&lt;app-inspector&gt;</code> sees the whale <code>ğŸ³</code>, not the dog <code>ğŸ¶</code>, because the dog <code>ğŸ¶</code> is inside the <code>&lt;app-child&gt;</code> <code>&lt;#VIEW&gt;</code>.\nThe <code>&lt;app-inspector&gt;</code> can only see the dog <code>ğŸ¶</code> if it is also within the <code>&lt;#VIEW&gt;</code>.</p>\n\n<p><a id=\"modify-visibility\"></a></p>\n<h2 id=\"modifying-service-visibility\" translation-result=\"on\">ä¿®æ”¹æœå‹™å¯è¦‹æ€§<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#modifying-service-visibility\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Modifying service visibility<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#modifying-service-visibility\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">æœ¬ç¯€è¬›çš„æ˜¯å¦‚ä½•ä½¿ç”¨å¯è¦‹æ€§ä¿®é£¾ç¬¦ <code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code>ï¼Œ<code>@<a href=\"api/core/Self\" class=\"code-anchor\">Self</a>()</code> å’Œ <code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code> ä¾†é™åˆ¶ <code>ElementInjector</code> çš„é–‹å§‹å’ŒçµæŸç¯„åœã€‚</p><p translation-origin=\"off\">This section describes how to limit the scope of the beginning and ending <code>ElementInjector</code> using the visibility decorators <code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code>, <code>@<a href=\"api/core/Self\" class=\"code-anchor\">Self</a>()</code>, and <code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code>.</p>\n\n<h3 id=\"visibility-of-provided-tokens\" translation-result=\"on\">æä¾›è€…ä»¤ç‰Œçš„å¯è¦‹æ€§<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#visibility-of-provided-tokens\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">Visibility of provided tokens<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#visibility-of-provided-tokens\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">å¯è¦‹æ€§è£é£¾å™¨å½±éŸ¿æœå°‹æ³¨å…¥ä»¤ç‰Œæ™‚åœ¨é‚è¼¯æ¨¹ä¸­é–‹å§‹å’ŒçµæŸçš„ä½ç½®ã€‚ç‚ºæ­¤ï¼Œè¦å°‡å¯è¦‹æ€§è£é£¾å™¨æ”¾ç½®åœ¨æ³¨å…¥é»ï¼Œå³ <code>constructor()</code>ï¼Œè€Œä¸æ˜¯åœ¨å®£å‘Šé»ã€‚</p><p translation-origin=\"off\">Visibility decorators influence where the search for the injection token begins and ends in the logic tree.\nTo do this, place visibility decorators at the point of injection, that is, the <code>constructor()</code>, rather than at a point of declaration.</p>\n\n<p translation-result=\"on\">ç‚ºäº†ä¿®æ”¹è©²æ³¨å…¥å™¨å¾å“ªè£¡é–‹å§‹å°‹æ‰¾ <code>FlowerService</code>ï¼ŒæŠŠ <code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code> åŠ åˆ° <code>&lt;app-child&gt;</code> çš„ <code>@<a href=\"api/core/Inject\" class=\"code-anchor\">Inject</a></code> å®£å‘Š <code>FlowerService</code> ä¸­ã€‚è©²å®£å‘Šåœ¨ <code>&lt;app-child&gt;</code> å»ºæ§‹å‡½å¼ä¸­ï¼Œå¦‚ <code>child.component.ts</code> æ‰€ç¤ºï¼š</p><p translation-origin=\"off\">To alter where the injector starts looking for <code>FlowerService</code>, add <code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code> to the <code>&lt;app-child&gt;</code> <code>@<a href=\"api/core/Inject\" class=\"code-anchor\">Inject</a></code> declaration for the <code>FlowerService</code>.\nThis declaration is in the <code>&lt;app-child&gt;</code> constructor as shown in <code>child.component.ts</code>:</p>\n\n<code-example format=\"typescript\" language=\"typescript\">\n\nconstructor(@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>() public flower : FlowerService) { }\n\n</code-example>\n<p translation-result=\"on\">ä½¿ç”¨ <code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code>ï¼Œ<code>&lt;app-child&gt;</code> æ³¨å…¥å™¨ä¸æœƒå°‹æ‰¾è‡ªèº«ä¾†ç²å– <code>FlowerService</code>ã€‚ç›¸åï¼Œæ³¨å…¥å™¨é–‹å§‹åœ¨ <code>&lt;app-root&gt;</code> çš„ <code>ElementInjector</code> ä¸­å°‹æ‰¾ <code>FlowerService</code>ï¼Œåœ¨é‚£è£¡å®ƒä»€éº¼ä¹Ÿæ²’æ‰¾åˆ°ã€‚\nç„¶å¾Œï¼Œå®ƒè¿”å›åˆ° <code>&lt;app-child&gt;</code> çš„ <code>ModuleInjector</code> ä¸¦æ‰¾åˆ°ğŸŒºï¼ˆç´…èŠ™è“‰ï¼‰å€¼ï¼Œé€™æ˜¯å¯ç”¨çš„ï¼Œå› ç‚º <code>&lt;app-child&gt;</code> <code>ModuleInjector</code> å’Œ <code>&lt;app-root&gt;</code> <code>ModuleInjector</code> è¢«å±•é–‹æˆäº†ä¸€å€‹ <code>ModuleInjector</code>ã€‚å› æ­¤ï¼ŒUI å°‡æ¸²æŸ“ä»¥ä¸‹å…§å®¹ï¼š</p><p translation-origin=\"off\">With <code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code>, the <code>&lt;app-child&gt;</code> injector doesn't look to itself for the <code>FlowerService</code>.\nInstead, the injector starts looking for the <code>FlowerService</code> at the <code>ElementInjector</code> or the <code>&lt;app-root&gt;</code>, where it finds nothing.\nThen, it goes back to the <code>&lt;app-child&gt;</code> <code>ModuleInjector</code> and finds the red hibiscus <code>ğŸŒº</code> value, which is available because the <code>&lt;app-child&gt;</code> <code>ModuleInjector</code> and the <code>&lt;app-root&gt;</code> <code>ModuleInjector</code> are flattened into one <code>ModuleInjector</code>.\nThus, the UI renders the following:</p>\n\n<code-example format=\"output\" hidecopy=\"\" language=\"shell\">\n\nEmoji from FlowerService: ğŸŒº\n\n</code-example>\n<p translation-result=\"on\">åœ¨é‚è¼¯æ¨¹ä¸­ï¼Œé€™ç¨®æƒ…æ³å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p translation-origin=\"off\">In a logical tree, this same idea might look like this:</p>\n\n<code-example format=\"html\" language=\"html\">\n\n&lt;app-root @<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>(AppModule)\n        @<a href=\"api/core/Inject\" class=\"code-anchor\">Inject</a>(FlowerService) flower=&gt;\"ğŸŒº\"&gt;\n  &lt;#VIEW&gt;\n    &lt;app-child @Provide(FlowerService=\"ğŸŒ»\")&gt;\n      &lt;#VIEW @<a href=\"api/core/Inject\" class=\"code-anchor\">Inject</a>(FlowerService, <a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>)=&gt;\"ğŸŒº\"&gt;\n        &lt;!-- With <a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>, the injector looks to the next injector up the tree --&gt;\n      &lt;/#VIEW&gt;\n    &lt;/app-child&gt;\n  &lt;/#VIEW&gt;\n&lt;/app-root&gt;\n\n</code-example>\n<p translation-result=\"on\">å„˜ç®¡ <code>&lt;app-child&gt;</code> æä¾›äº†ğŸŒ»ï¼ˆå‘æ—¥è‘µï¼‰ï¼Œä½†è©²æ‡‰ç”¨ç¨‹å¼æ¸²æŸ“äº†ğŸŒºï¼ˆç´…è‰²èŠ™è“‰ï¼‰ï¼Œå› ç‚º <code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code> å°è‡´ç•¶å‰çš„æ³¨å…¥å™¨è·³éäº†è‡ªèº«ä¸¦å°‹æ‰¾å…¶çˆ¶ç´šã€‚</p><p translation-origin=\"off\">Though <code>&lt;app-child&gt;</code> provides the sunflower <code>ğŸŒ»</code>, the application renders the red hibiscus <code>ğŸŒº</code> because <code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code>  causes the current injector to skip itself and look to its parent.</p>\n\n<p translation-result=\"on\">å¦‚æœç¾åœ¨å°‡ <code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code>ï¼ˆä»¥åŠ <code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code>ï¼‰æ–°å¢åˆ°äº† <code>FlowerService</code> çš„ <code>@<a href=\"api/core/Inject\" class=\"code-anchor\">Inject</a></code>ï¼Œå…¶çµæœå°‡ç‚º <code>null</code>ã€‚é€™æ˜¯å› ç‚º <code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code> å°‡æœå°‹çš„ä¸Šé™é™åˆ¶ç‚º <code>&lt;#VIEW&gt;</code>ã€‚é€™æ˜¯åœ¨é‚è¼¯æ¨¹ä¸­çš„æƒ…æ³ï¼š</p><p translation-origin=\"off\">If you now add <code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code> (in addition to the <code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code>) to the <code>@<a href=\"api/core/Inject\" class=\"code-anchor\">Inject</a></code> of the <code>FlowerService</code>, the result will be <code>null</code>.\nThis is because <code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code> limits the upper bound of the search to the <code>&lt;#VIEW&gt;</code>.\nHere's the idea in the logical tree:</p>\n\n<code-example format=\"html\" language=\"html\">\n\n&lt;app-root @<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>(AppModule)\n        @<a href=\"api/core/Inject\" class=\"code-anchor\">Inject</a>(FlowerService) flower=&gt;\"ğŸŒº\"&gt;\n  &lt;#VIEW&gt; &lt;!-- end search here with null--&gt;\n    &lt;app-child @Provide(FlowerService=\"ğŸŒ»\")&gt; &lt;!-- start search here --&gt;\n      &lt;#VIEW @<a href=\"api/core/Inject\" class=\"code-anchor\">Inject</a>(FlowerService, @<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>, @<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>, @<a href=\"api/core/Optional\" class=\"code-anchor\">Optional</a>)=&gt;null&gt;\n      &lt;/#VIEW&gt;\n      &lt;/app-parent&gt;\n  &lt;/#VIEW&gt;\n&lt;/app-root&gt;\n\n</code-example>\n<p translation-result=\"on\">åœ¨é€™è£¡ï¼Œæœå‹™åŠå…¶å€¼æ˜¯ç›¸åŒçš„ï¼Œä½†æ˜¯ <code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code> é˜»æ­¢äº†æ³¨å…¥å™¨å° <code>FlowerService</code> é€²è¡Œä»»ä½•é«˜æ–¼ <code>&lt;#VIEW&gt;</code> çš„æŸ¥è©¢ï¼Œå› æ­¤æ‰¾ä¸åˆ°å®ƒä¸¦è¿”å› <code>null</code>ã€‚</p><p translation-origin=\"off\">Here, the services and their values are the same, but <code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code> stops the injector from looking any further than the <code>&lt;#VIEW&gt;</code> for <code>FlowerService</code>, so it doesn't find it and returns <code>null</code>.</p>\n\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\"><strong>æ³¨æ„</strong>ï¼š<br>\nç¯„ä¾‹æ‡‰ç”¨ç¨‹å¼ä½¿ç”¨ <code>@<a href=\"api/core/Optional\" class=\"code-anchor\">Optional</a>()</code> å› æ­¤è©²æ‡‰ç”¨ç¨‹å¼ä¸æœƒå¼•ç™¼éŒ¯èª¤ï¼Œä½†æ˜¯å…¶åŸç†æ˜¯ä¸€æ¨£çš„ã€‚</p><p translation-origin=\"off\"><strong>NOTE</strong>: <br>\nThe example application uses <code>@<a href=\"api/core/Optional\" class=\"code-anchor\">Optional</a>()</code> so the application does not throw an error, but the principles are the same.</p>\n\n</div>\n<h3 id=\"skipself-and-viewproviders\" translation-result=\"on\"><code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code> å’Œ <code>viewProviders</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#skipself-å’Œ-viewproviders\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\"><code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code> and <code>viewProviders</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#skipself-and-viewproviders\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">è©² <code>&lt;app-child&gt;</code> ç›®å‰æä¾›åœ¨ <code>viewProviders</code> é™£åˆ—ä¸­æä¾›äº†å€¼ç‚º ğŸ¶ï¼ˆå°ç‹—ï¼‰çš„ <code>AnimalService</code>ã€‚ç”±æ–¼æ³¨å…¥å™¨åªéœ€è¦æª¢è¦– <code>&lt;app-child&gt;</code> çš„ <code>ElementInjector</code> ä¸­çš„ <code>AnimalService</code>ï¼Œå®ƒå°±ä¸æœƒçœ‹åˆ°ğŸ³ï¼ˆé¯¨é­šï¼‰ã€‚</p><p translation-origin=\"off\">The <code>&lt;app-child&gt;</code> currently provides the <code>AnimalService</code> in the <code>viewProviders</code> array with the value of dog <code>ğŸ¶</code>.\nBecause the injector has only to look at the <code>ElementInjector</code> of the <code>&lt;app-child&gt;</code> for the <code>AnimalService</code>, it never sees the whale <code>ğŸ³</code>.</p>\n\n<p translation-result=\"on\">åœ¨ <code>FlowerService</code> é€™å€‹ä¾‹å­ä¸­ï¼Œå¦‚æœå°‡ <code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code> æ–°å¢åˆ° <code>AnimalService</code> çš„å»ºæ§‹å‡½å¼ä¸­ï¼Œå‰‡æ³¨å…¥å™¨å°‡ä¸åœ¨ <code>AnimalService</code> çš„ç•¶å‰ <code>&lt;app-child&gt;</code> çš„ <code>ElementInjector</code> ä¸­æŸ¥è©¢ <code>AnimalService</code>ã€‚</p><p translation-origin=\"off\">As in the <code>FlowerService</code> example, if you add <code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code> to the constructor for the <code>AnimalService</code>, the injector won't look in the  <code>ElementInjector</code> of the current <code>&lt;app-child&gt;</code> for the <code>AnimalService</code>.</p>\n\n<code-example format=\"typescript\" language=\"typescript\">\n\nexport class ChildComponent {\n\n  // add @<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()\n  constructor(@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>() public animal : AnimalService) { }\n\n}\n\n</code-example>\n<p translation-result=\"on\">ç›¸åï¼Œæ³¨å…¥å™¨å°‡å¾ <code>&lt;app-root&gt;</code> <code>ElementInjector</code> é–‹å§‹æ‰¾ã€‚è«‹è¨˜ä½ï¼Œ<code>&lt;app-child&gt;</code> é¡åœ¨ <code>viewProviders</code> é™£åˆ—ä¸­ <code>AnimalService</code> ä¸­æä¾›äº†ğŸ¶ï¼ˆå°ç‹—ï¼‰çš„å€¼ï¼š</p><p translation-origin=\"off\">Instead, the injector will begin at the <code>&lt;app-root&gt;</code> <code>ElementInjector</code>.\nRemember that the <code>&lt;app-child&gt;</code> class provides the <code>AnimalService</code> in the <code>viewProviders</code> array with a value of dog <code>ğŸ¶</code>:</p>\n\n<code-example format=\"typescript\" language=\"typescript\">\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app-child',\n  â€¦\n  viewProviders:\n  [{ provide: AnimalService, useValue: { emoji: 'ğŸ¶' } }]\n})\n\n</code-example>\n<p translation-result=\"on\">åœ¨ <code>&lt;app-child&gt;</code> ä¸­ä½¿ç”¨ <code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code> çš„é‚è¼¯æ¨¹æ˜¯é€™æ¨£çš„ï¼š</p><p translation-origin=\"off\">The logical tree looks like this with <code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code> in <code>&lt;app-child&gt;</code>:</p>\n\n<code-example format=\"html\" language=\"html\">\n\n&lt;app-root @<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>(AppModule)\n          @<a href=\"api/core/Inject\" class=\"code-anchor\">Inject</a>(AnimalService=&gt;\"ğŸ³\")&gt;\n  &lt;#VIEW&gt;&lt;!-- search begins here --&gt;\n    &lt;app-child&gt;\n      &lt;#VIEW @Provide(AnimalService=\"ğŸ¶\")\n             @<a href=\"api/core/Inject\" class=\"code-anchor\">Inject</a>(AnimalService, <a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>=&gt;\"ğŸ³\")&gt;\n        &lt;!--Add @<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a> --&gt;\n      &lt;/#VIEW&gt;\n    &lt;/app-child&gt;\n  &lt;/#VIEW&gt;\n&lt;/app-root&gt;\n\n</code-example>\n<p translation-result=\"on\">åœ¨ <code>&lt;app-child&gt;</code> ä¸­ä½¿ç”¨ <code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code>ï¼Œæ³¨å…¥å™¨å°±æœƒåœ¨ <code>&lt;app-root&gt;</code> çš„ <code>ElementInjector</code> ä¸­æ‰¾åˆ° ğŸ³ï¼ˆé¯¨ï¼‰ã€‚</p><p translation-origin=\"off\">With <code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code> in the <code>&lt;app-child&gt;</code>, the injector begins its search for the <code>AnimalService</code> in the <code>&lt;app-root&gt;</code> <code>ElementInjector</code> and finds whale <code>ğŸ³</code>.</p>\n\n<h3 id=\"host-and-viewproviders\" translation-result=\"on\"><code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code> å’Œ <code>viewProviders</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#host-å’Œ-viewproviders\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\"><code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code> and <code>viewProviders</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#host-and-viewproviders\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">å¦‚æœæŠŠ <code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code> æ–°å¢åˆ° <code>AnimalService</code> çš„å»ºæ§‹å‡½å¼ä¸Šï¼Œçµæœå°±æ˜¯ğŸ¶ï¼ˆå°ç‹—ï¼‰ï¼Œå› ç‚ºæ³¨å…¥å™¨æœƒåœ¨ <code>&lt;app-child&gt;</code> çš„ <code>&lt;#VIEW&gt;</code> ä¸­æŸ¥è©¢ <code>AnimalService</code> æœå‹™ã€‚é€™è£¡æ˜¯ <code>&lt;app-child&gt;</code> é¡ä¸­çš„ <code>viewProviders</code> é™£åˆ—å’Œå»ºæ§‹å‡½å¼ä¸­çš„ <code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code>ï¼š</p><p translation-origin=\"off\">If you add <code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code> to the constructor for <code>AnimalService</code>, the result is dog <code>ğŸ¶</code> because the injector finds the <code>AnimalService</code> in the <code>&lt;app-child&gt;</code> <code>&lt;#VIEW&gt;</code>.\nHere is the <code>viewProviders</code> array in the <code>&lt;app-child&gt;</code> class and <code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code> in the constructor:</p>\n\n<code-example format=\"typescript\" language=\"typescript\">\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app-child',\n  â€¦\n  viewProviders:\n  [{ provide: AnimalService, useValue: { emoji: 'ğŸ¶' } }]\n\n})\nexport class ChildComponent {\n  constructor(@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>() public animal : AnimalService) { }\n}\n\n</code-example>\n<p translation-result=\"on\"><code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code> å°è‡´æ³¨å…¥å™¨é–‹å§‹æŸ¥è©¢ï¼Œç›´åˆ°é‡åˆ° <code>&lt;#VIEW&gt;</code> çš„é‚Šç·£ã€‚</p><p translation-origin=\"off\"><code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code> causes the injector to look until it encounters the edge of the <code>&lt;#VIEW&gt;</code>.</p>\n\n<code-example format=\"html\" language=\"html\">\n\n&lt;app-root @<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>(AppModule)\n          @<a href=\"api/core/Inject\" class=\"code-anchor\">Inject</a>(AnimalService=&gt;\"ğŸ³\")&gt;\n  &lt;#VIEW&gt;\n    &lt;app-child&gt;\n      &lt;#VIEW @Provide(AnimalService=\"ğŸ¶\")\n             @<a href=\"api/core/Inject\" class=\"code-anchor\">Inject</a>(AnimalService, @<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>=&gt;\"ğŸ¶\")&gt; &lt;!-- @<a href=\"api/core/Host\" class=\"code-anchor\">Host</a> stops search here --&gt;\n      &lt;/#VIEW&gt;\n    &lt;/app-child&gt;\n  &lt;/#VIEW&gt;\n&lt;/app-root&gt;\n\n</code-example>\n<p translation-result=\"on\">å°‡å¸¶æœ‰ç¬¬ä¸‰å€‹å‹•ç‰©ğŸ¦”ï¼ˆåˆºèŸï¼‰çš„ <code>viewProviders</code> é™£åˆ—æ–°å¢åˆ° <code>app.component.ts</code> çš„ <code>@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>()</code> å…ƒè³‡æ–™ä¸­ï¼š</p><p translation-origin=\"off\">Add a <code>viewProviders</code> array with a third animal, hedgehog <code>ğŸ¦”</code>, to the <code>app.component.ts</code> <code>@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>()</code> metadata:</p>\n\n<code-example format=\"typescript\" language=\"typescript\">\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: [ './app.component.css' ],\n  viewProviders: [{ provide: AnimalService, useValue: { emoji: 'ğŸ¦”' } }]\n})\n\n</code-example>\n<p translation-result=\"on\">æ¥ä¸‹ä¾†ï¼ŒåŒæ™‚æŠŠ <code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code> å’Œ <code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code> åŠ åœ¨ <code>child.component.ts</code> ä¸­ <code>AnimalService</code> çš„å»ºæ§‹å‡½å¼ä¸­ã€‚é€™æ˜¯ <code>&lt;app-child&gt;</code> å»ºæ§‹å‡½å¼ä¸­çš„ <code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code> å’Œ <code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code>ï¼š</p><p translation-origin=\"off\">Next, add <code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code> along with <code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code> to the constructor for the <code>Animal Service</code> in <code>child.component.ts</code>.\nHere are <code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code> and <code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code> in the <code>&lt;app-child&gt;</code> constructor:</p>\n\n<code-example format=\"typescript\" language=\"typescript\">\n\nexport class ChildComponent {\n\n  constructor(\n  @<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>() @<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>() public animal : AnimalService) { }\n\n}\n\n</code-example>\n<p translation-result=\"on\">å°‡ <code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code> å’Œ <code><a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code> æ‡‰ç”¨æ–¼ <code>providers</code> é™£åˆ—ä¸­çš„ <code>FlowerService</code>ï¼Œçµæœç‚º <code>null</code>ï¼Œå› ç‚º <code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code> æœƒåœ¨ <code>&lt;app-child&gt;</code> çš„æ³¨å…¥å™¨ä¸­é–‹å§‹æœå°‹ï¼Œä½†æ˜¯ <code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code> è¦æ±‚å®ƒåœ¨ <code>&lt;#VIEW&gt;</code> åœæ­¢æœå°‹ â€”â€” æ²’æœ‰ <code>FlowerService</code>ã€‚åœ¨é‚è¼¯æ¨¹ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ° <code>FlowerService</code> åœ¨ <code>&lt;app-child&gt;</code> ä¸­å¯è¦‹ï¼Œè€Œåœ¨ <code>&lt;#VIEW&gt;</code> ä¸­ä¸å¯è¦‹ã€‚</p><p translation-origin=\"off\">When <code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code> and <code><a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code> were applied to the <code>FlowerService</code>, which is in the <code>providers</code> array, the result was <code>null</code> because <code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code> starts its search in the <code>&lt;app-child&gt;</code> injector, but <code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code> stops searching at <code>&lt;#VIEW&gt;</code> â€”where there is no <code>FlowerService</code>\nIn the logical tree, you can see that the <code>FlowerService</code> is visible in <code>&lt;app-child&gt;</code>, not its <code>&lt;#VIEW&gt;</code>.</p>\n\n<p translation-result=\"on\">ä¸éï¼Œæä¾›åœ¨ <code>AppComponent</code> çš„ <code>viewProviders</code> é™£åˆ—ä¸­çš„ <code>AnimalService</code>ï¼Œæ˜¯å¯è¦‹çš„ã€‚</p><p translation-origin=\"off\">However, the <code>AnimalService</code>, which is provided in the <code>AppComponent</code> <code>viewProviders</code> array, is visible.</p>\n\n<p translation-result=\"on\">é‚è¼¯æ¨¹è¡¨ç¤ºæ³•èªªæ˜äº†ç‚ºä½•å¦‚æ­¤ï¼š</p><p translation-origin=\"off\">The logical tree representation shows why this is:</p>\n\n<code-example format=\"html\" language=\"html\">\n\n&lt;app-root @<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>(AppModule)\n        @<a href=\"api/core/Inject\" class=\"code-anchor\">Inject</a>(AnimalService=&gt;\"ğŸ³\")&gt;\n  &lt;#VIEW @Provide(AnimalService=\"ğŸ¦”\")\n         @<a href=\"api/core/Inject\" class=\"code-anchor\">Inject</a>(AnimalService, @<a href=\"api/core/Optional\" class=\"code-anchor\">Optional</a>)=&gt;\"ğŸ¦”\"&gt;\n    &lt;!-- ^^@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>() starts here,  @<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>() stops here^^ --&gt;\n    &lt;app-child&gt;\n      &lt;#VIEW @Provide(AnimalService=\"ğŸ¶\")\n             @<a href=\"api/core/Inject\" class=\"code-anchor\">Inject</a>(AnimalService, @<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>, @<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>, @<a href=\"api/core/Optional\" class=\"code-anchor\">Optional</a>)=&gt;\"ğŸ¦”\"&gt;\n               &lt;!-- Add @<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a> ^^--&gt;\n      &lt;/#VIEW&gt;\n      &lt;/app-child&gt;\n  &lt;/#VIEW&gt;\n&lt;/app-root&gt;\n\n</code-example>\n<p translation-result=\"on\"><code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code> å°è‡´æ³¨å…¥å™¨å¾ <code>&lt;app-root&gt;</code> è€Œä¸æ˜¯ <code>&lt;app-child&gt;</code> è™•é–‹å§‹å° <code>AnimalService</code> é€²è¡Œæœå°‹ï¼Œè€Œ <code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code> æœƒåœ¨ <code>&lt;app-root&gt;</code> çš„ <code>&lt;#VIEW&gt;</code> è™•åœæ­¢æœå°‹ã€‚\nç”±æ–¼ <code>AnimalService</code> æ˜¯é€é <code>viewProviders</code> é™£åˆ—æä¾›çš„ï¼Œå› æ­¤æ³¨å…¥ç¨‹å¼æœƒåœ¨ <code>&lt;#VIEW&gt;</code> æ‰¾åˆ°ğŸ¦”ï¼ˆåˆºèŸï¼‰ã€‚</p><p translation-origin=\"off\"><code>@<a href=\"api/core/SkipSelf\" class=\"code-anchor\">SkipSelf</a>()</code>, causes the injector to start its search for the <code>AnimalService</code> at the <code>&lt;app-root&gt;</code>, not the <code>&lt;app-child&gt;</code>, where the request originates, and <code>@<a href=\"api/core/Host\" class=\"code-anchor\">Host</a>()</code> stops the search at the <code>&lt;app-root&gt;</code> <code>&lt;#VIEW&gt;</code>.\nSince <code>AnimalService</code> is provided by way of the <code>viewProviders</code> array, the injector finds hedgehog <code>ğŸ¦”</code> in the <code>&lt;#VIEW&gt;</code>.</p>\n\n<p><a id=\"component-injectors\"></a></p>\n<h2 id=\"elementinjector-use-case-examples\" translation-result=\"on\"><code>ElementInjector</code> ä½¿ç”¨æ¡ˆä¾‹ç¯„ä¾‹<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#elementinjector-use-case-examples\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\"><code>ElementInjector</code> use case examples<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#elementinjector-use-case-examples\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">åœ¨ä¸åŒç´šåˆ¥é…ç½®ä¸€å€‹æˆ–å¤šå€‹æä¾›è€…çš„èƒ½åŠ›é–‹é—¢äº†å¾ˆæœ‰ç”¨çš„å¯èƒ½æ€§ã€‚è¦æª¢è¦–æ­£åœ¨åŸ·è¡Œçš„æ‡‰ç”¨ä¸­çš„ä»¥ä¸‹æƒ…æ³ï¼Œè«‹åƒé–±<live-example>è‹±é›„ç¯„ä¾‹</live-example>ã€‚</p><p translation-origin=\"off\">The ability to configure one or more providers at different levels opens up useful possibilities.\nFor a look at the following scenarios in a working app, see the <live-example>heroes use case examples</live-example>.</p>\n\n<h3 id=\"scenario-service-isolation\" translation-result=\"on\">å ´æ™¯ï¼šæœå‹™éš”é›¢<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#scenario-service-isolation\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">Scenario: service isolation<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#scenario-service-isolation\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">å‡ºæ–¼æ¶æ§‹æ–¹é¢çš„è€ƒæ…®ï¼Œå¯èƒ½æœƒè®“ä½ æ±ºå®šæŠŠä¸€å€‹æœå‹™é™åˆ¶åˆ°åªèƒ½åœ¨å®ƒæ‰€å±¬çš„é‚£å€‹æ‡‰ç”¨åŸŸä¸­å­˜å–ã€‚æ¯”å¦‚ï¼Œé€™å€‹ä¾‹å­ä¸­åŒ…æ‹¬ä¸€å€‹ç”¨æ–¼é¡¯ç¤ºåæ´¾åˆ—è¡¨çš„ <code>VillainsListComponent</code>ï¼Œå®ƒæœƒå¾ <code>VillainsService</code> ä¸­ç²å¾—åæ´¾åˆ—è¡¨è³‡æ–™ã€‚</p><p translation-origin=\"off\">Architectural reasons may lead you to restrict access to a service to the application domain where it belongs.\nFor example, the guide sample includes a <code>VillainsListComponent</code> that displays a list of villains.\nIt gets those villains from a <code>VillainsService</code>.</p>\n\n<p translation-result=\"on\">å¦‚æœä½ åœ¨æ ¹æ¨¡çµ„ <code>AppModule</code> ä¸­ï¼ˆä¹Ÿå°±æ˜¯ä½ è¨»å†Š <code>HeroesService</code> çš„åœ°æ–¹ï¼‰æä¾› <code>VillainsService</code>ï¼Œå°±æœƒè®“æ‡‰ç”¨ä¸­çš„ä»»ä½•åœ°æ–¹éƒ½èƒ½å­˜å–åˆ° <code>VillainsService</code>ï¼ŒåŒ…æ‹¬é‡å°è‹±é›„çš„å·¥ä½œæµã€‚å¦‚æœä½ ç¨å¾Œä¿®æ”¹äº† <code>VillainsService</code>ï¼Œå°±å¯èƒ½ç ´å£äº†è‹±é›„å…ƒä»¶ä¸­çš„æŸäº›åœ°æ–¹ã€‚åœ¨æ ¹æ¨¡çµ„ <code>AppModule</code> ä¸­æä¾›è©²æœå‹™å°‡æœƒå¼•å…¥æ­¤é¢¨éšªã€‚</p><p translation-origin=\"off\">If you provided <code>VillainsService</code> in the root <code>AppModule</code> (where you registered the <code>HeroesService</code>), that would make the <code>VillainsService</code> visible everywhere in the application, including the <em>Hero</em> workflows.\nIf you later modified the <code>VillainsService</code>, you could break something in a hero component somewhere.</p>\n\n<p translation-result=\"on\">è©²æ€éº¼åšå‘¢ï¼Ÿä½ å¯ä»¥åœ¨ <code>VillainsListComponent</code> çš„ <code>providers</code> å…ƒè³‡æ–™ä¸­æä¾› <code>VillainsService</code>ï¼Œå°±åƒé€™æ¨£ï¼š</p><p translation-origin=\"off\">Instead, you can provide the <code>VillainsService</code> in the <code>providers</code> metadata of the <code>VillainsListComponent</code> like this:</p>\n\n<code-example header=\"src/app/villains-list.component.ts (metadata)\" path=\"hierarchical-dependency-injection/src/app/villains-list.component.ts\" region=\"metadata\">\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app-villains-list',\n  templateUrl: './villains-list.component.html',\n  providers: [ VillainsService ]\n})\n\n</code-example>\n<p translation-result=\"on\">åœ¨ <code>VillainsListComponent</code> çš„å…ƒè³‡æ–™ä¸­è€Œä¸æ˜¯å…¶å®ƒåœ°æ–¹æä¾› <code>VillainsService</code> æœå‹™ï¼Œè©²æœå‹™å°±æœƒåªåœ¨ <code>VillainsListComponent</code> åŠå…¶å­å…ƒä»¶æ¨¹ä¸­å¯ç”¨ã€‚</p><p translation-origin=\"off\">By providing <code>VillainsService</code> in the <code>VillainsListComponent</code> metadata and nowhere else, the service becomes available only in the <code>VillainsListComponent</code> and its subcomponent tree.</p>\n\n<p translation-result=\"on\"><code>VillainService</code> å°æ–¼ <code>VillainsListComponent</code> ä¾†èªªæ˜¯å–®ä¾‹çš„ï¼Œå› ç‚ºå®ƒå°±æ˜¯åœ¨é€™è£¡å®£å‘Šçš„ã€‚åªè¦ <code>VillainsListComponent</code> æ²’æœ‰éŠ·ç‡¬ï¼Œå®ƒå°±å§‹çµ‚æ˜¯ <code>VillainService</code> çš„åŒä¸€å€‹ä¾‹é …ã€‚ä½†æ˜¯å°æ–¼ <code>VillainsListComponent</code> çš„å¤šå€‹ä¾‹é …ï¼Œæ¯å€‹ <code>VillainsListComponent</code> çš„ä¾‹é …éƒ½æœƒæœ‰è‡ªå·±çš„ <code>VillainService</code> ä¾‹é …ã€‚</p><p translation-origin=\"off\"><code>VillainService</code> is a singleton with respect to <code>VillainsListComponent</code> because that is where it is declared.\nAs long as <code>VillainsListComponent</code> does not get destroyed it will be the same instance of <code>VillainService</code> but if there are multiple instances of <code>VillainsListComponent</code>, then each instance of <code>VillainsListComponent</code> will have its own instance of <code>VillainService</code>.</p>\n\n<h3 id=\"scenario-multiple-edit-sessions\" translation-result=\"on\">å ´æ™¯ï¼šå¤šé‡ç·¨è¼¯æœƒè©±<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#scenario-multiple-edit-sessions\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">Scenario: multiple edit sessions<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#scenario-multiple-edit-sessions\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">å¾ˆå¤šæ‡‰ç”¨å…è¨±ä½¿ç”¨è€…åŒæ™‚é€²è¡Œå¤šå€‹ä»»å‹™ã€‚æ¯”å¦‚ï¼Œåœ¨ç´ç¨…ç”³å ±æ‡‰ç”¨ä¸­ï¼Œç”³å ±äººå¯ä»¥é–‹å•Ÿå¤šå€‹å ±ç¨…å–®ï¼Œéš¨æ™‚å¯èƒ½å¾ä¸€å€‹åˆ‡æ›åˆ°å¦ä¸€å€‹ã€‚</p><p translation-origin=\"off\">Many applications allow users to work on several open tasks at the same time.\nFor example, in a tax preparation application, the preparer could be working on several tax returns, switching from one to the other throughout the day.</p>\n\n<p translation-result=\"on\">ç‚ºäº†ç¤ºç¯„é€™ç¨®å ´æ™¯ï¼Œå‡è¨­æœ‰ä¸€å€‹é¡¯ç¤ºè¶…ç´šè‹±é›„åˆ—è¡¨çš„å¤–éƒ¨ <code>HeroListComponent</code>ã€‚</p><p translation-origin=\"off\">To demonstrate that scenario, imagine an outer <code>HeroListComponent</code> that displays a list of super heroes.</p>\n\n<p translation-result=\"on\">è¦é–‹å•Ÿä¸€å€‹è‹±é›„çš„å ±ç¨…å–®ï¼Œç”³å ±è€…é»é¸è‹±é›„åï¼Œå®ƒå°±æœƒé–‹å•Ÿä¸€å€‹å…ƒä»¶ä¾†ç·¨è¼¯é‚£å€‹ç”³å ±å–®ã€‚æ¯å€‹é¸ä¸­çš„ç”³å ±å–®éƒ½æœƒåœ¨è‡ªå·±çš„å…ƒä»¶ä¸­é–‹å•Ÿï¼Œä¸¦ä¸”å¯ä»¥åŒæ™‚é–‹å•Ÿå¤šå€‹ç”³å ±å–®ã€‚</p><p translation-origin=\"off\">To open a hero's tax return, the preparer clicks on a hero name, which opens a component for editing that return.\nEach selected hero tax return opens in its own component and multiple returns can be open at the same time.</p>\n\n<p translation-result=\"on\">æ¯å€‹å ±ç¨…å–®å…ƒä»¶éƒ½æœ‰ä¸‹åˆ—ç‰¹å¾µï¼š</p><p translation-origin=\"off\">Each tax return component has the following characteristics:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\">å±¬æ–¼å®ƒè‡ªå·±çš„å ±ç¨…å–®æœƒè©±</p><p translation-origin=\"off\">Is its own tax return editing session</p>\n\n</li>\n<li>\n<p translation-result=\"on\">å¯ä»¥ä¿®æ”¹ä¸€å€‹å ±ç¨…å–®ï¼Œè€Œä¸æœƒå½±éŸ¿å¦ä¸€å€‹å…ƒä»¶ä¸­çš„ç”³å ±å–®</p><p translation-origin=\"off\">Can change a tax return without affecting a return in another component</p>\n\n</li>\n<li>\n<p translation-result=\"on\">èƒ½æŠŠæ‰€åšçš„ä¿®æ”¹å„²å­˜åˆ°å®ƒçš„å ±ç¨…å–®ä¸­ï¼Œæˆ–è€…æ”¾æ£„å®ƒå€‘</p><p translation-origin=\"off\">Has the ability to save the changes to its tax return or cancel them</p>\n\n</li>\n</ul>\n<div class=\"lightbox\">\n<img alt=\"Heroes in action\" src=\"generated/images/guide/dependency-injection/hid-heroes-anim.gif\" width=\"500\" height=\"384\">\n</div>\n<p translation-result=\"on\">å‡è¨­ <code>HeroTaxReturnComponent</code> é‚„æœ‰ä¸€äº›ç®¡ç†ä¸¦é‚„åŸé€™äº›æ›´æ”¹çš„é‚è¼¯ã€‚é€™å°æ–¼ç°¡å–®çš„å ±ç¨…å–®ä¾†èªªæ˜¯å¾ˆå®¹æ˜“çš„ã€‚ä¸éï¼Œåœ¨ç¾å¯¦ä¸–ç•Œä¸­ï¼Œå ±ç¨…å–®çš„è³‡æ–™æ¨¡å‹éå¸¸è¤‡é›œï¼Œå°é€™äº›ä¿®æ”¹çš„ç®¡ç†å¯èƒ½ä¸å¾—ä¸æŠ•æ©Ÿå–å·§ã€‚ä½ å¯ä»¥æŠŠé€™ç¨®ç®¡ç†ä»»å‹™å§”è¨—çµ¦ä¸€å€‹è¼”åŠ©æœå‹™ï¼Œå°±åƒé€™å€‹ä¾‹å­ä¸­æ‰€åšçš„ã€‚</p><p translation-origin=\"off\">Suppose that the <code>HeroTaxReturnComponent</code> had logic to manage and restore changes.\nThat would be a straightforward task for a hero tax return.\nIn the real world, with a rich tax return data model, the change management would be tricky.\nYou could delegate that management to a helper service, as this example does.</p>\n\n<p translation-result=\"on\">å ±ç¨…å–®æœå‹™ HeroTaxReturnService å¿«å–äº†å–®æ¢ HeroTaxReturnï¼Œç”¨æ–¼è¿½è¹¤é‚£å€‹ç”³å ±å–®çš„è®Šæ›´ï¼Œä¸¦ä¸”å¯ä»¥å„²å­˜æˆ–é‚„åŸå®ƒã€‚å®ƒæŠŠå¾Œå…©é …è·è²¬å§”è¨—çµ¦äº†å…¨æ‡‰ç”¨ç´šçš„å–®ä¾‹æœå‹™ HeroServiceï¼ŒHeroService æ˜¯é€éä¾è³´æ³¨å…¥æ©Ÿåˆ¶å–å¾—çš„ã€‚</p><p translation-origin=\"off\">The <code>HeroTaxReturnService</code> caches a single <code>HeroTaxReturn</code>, tracks changes to that return, and can save or restore it.\nIt also delegates to the application-wide singleton <code>HeroService</code>, which it gets by injection.</p>\n\n<code-example header=\"src/app/hero-tax-return.service.ts\" path=\"hierarchical-dependency-injection/src/app/hero-tax-return.service.ts\">\nimport { <a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a> } from '@angular/core';\nimport { HeroTaxReturn } from './hero';\nimport { HeroesService } from './heroes.service';\n\n@<a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a>()\nexport class HeroTaxReturnService {\n  private currentTaxReturn!: HeroTaxReturn;\n  private originalTaxReturn!: HeroTaxReturn;\n\n  constructor(private heroService: HeroesService) { }\n\n  set taxReturn(htr: HeroTaxReturn) {\n    this.originalTaxReturn = htr;\n    this.currentTaxReturn  = htr.clone();\n  }\n\n  get taxReturn(): HeroTaxReturn {\n    return this.currentTaxReturn;\n  }\n\n  restoreTaxReturn() {\n    this.taxReturn = this.originalTaxReturn;\n  }\n\n  saveTaxReturn() {\n    this.taxReturn = this.currentTaxReturn;\n    this.heroService.saveTaxReturn(this.currentTaxReturn).subscribe();\n  }\n}\n\n\n</code-example>\n<p translation-result=\"on\">ä¸‹é¢æ˜¯æ­£åœ¨ä½¿ç”¨ <code>HeroTaxReturnService</code> çš„ <code>HeroTaxReturnComponent</code> å…ƒä»¶ã€‚</p><p translation-origin=\"off\">Here is the <code>HeroTaxReturnComponent</code> that makes use of <code>HeroTaxReturnService</code>.</p>\n\n<code-example header=\"src/app/hero-tax-return.component.ts\" path=\"hierarchical-dependency-injection/src/app/hero-tax-return.component.ts\">\nimport { <a href=\"api/core/Component\" class=\"code-anchor\">Component</a>, <a href=\"api/core/EventEmitter\" class=\"code-anchor\">EventEmitter</a>, <a href=\"api/core/Input\" class=\"code-anchor\">Input</a>, <a href=\"api/core/Output\" class=\"code-anchor\">Output</a> } from '@angular/core';\nimport { HeroTaxReturn } from './hero';\nimport { HeroTaxReturnService } from './hero-tax-return.service';\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app-hero-tax-return',\n  templateUrl: './hero-tax-return.component.html',\n  styleUrls: [ './hero-tax-return.component.css' ],\n  providers: [ HeroTaxReturnService ]\n})\nexport class HeroTaxReturnComponent {\n  message = '';\n\n  @<a href=\"api/core/Output\" class=\"code-anchor\">Output</a>() close = new <a href=\"api/core/EventEmitter\" class=\"code-anchor\">EventEmitter</a>&lt;void&gt;();\n\n  get taxReturn(): HeroTaxReturn {\n    return this.heroTaxReturnService.taxReturn;\n  }\n\n  @<a href=\"api/core/Input\" class=\"code-anchor\">Input</a>()\n  set taxReturn(htr: HeroTaxReturn) {\n    this.heroTaxReturnService.taxReturn = htr;\n  }\n\n  constructor(private heroTaxReturnService: HeroTaxReturnService) { }\n\n  onCanceled()  {\n    this.flashMessage('Canceled');\n    this.heroTaxReturnService.restoreTaxReturn();\n  }\n\n  onClose() { this.close.emit(); }\n\n  onSaved() {\n    this.flashMessage('Saved');\n    this.heroTaxReturnService.saveTaxReturn();\n  }\n\n  flashMessage(msg: string) {\n    this.message = msg;\n    setTimeout(() =&gt; this.message = '', 500);\n  }\n}\n\n\n</code-example>\n<p translation-result=\"on\">é€é <code>@<a href=\"api/core/Input\" class=\"code-anchor\">Input</a>()</code> å±¬æ€§å¯ä»¥å¾—åˆ°<em>è¦ç·¨è¼¯çš„å ±ç¨…å–®</em>ï¼Œé€™å€‹å±¬æ€§è¢«å¯¦ç¾æˆäº†è®€å–å™¨ï¼ˆgetterï¼‰å’Œè¨­å®šå™¨ï¼ˆsetterï¼‰ã€‚è¨­å®šå™¨æ ¹æ“šå‚³é€²ä¾†çš„å ±ç¨…å–®åˆå§‹åŒ–äº†å…ƒä»¶è‡ªå·±çš„ <code>HeroTaxReturnService</code> ä¾‹é …ã€‚è®€å–å™¨ç¸½æ˜¯è¿”å›è©²æœå‹™æ‰€å­˜è‹±é›„çš„ç•¶å‰ç‹€æ…‹ã€‚å…ƒä»¶ä¹Ÿæœƒè«‹æ±‚è©²æœå‹™ä¾†å„²å­˜æˆ–é‚„åŸé€™å€‹å ±ç¨…å–®ã€‚</p><p translation-origin=\"off\">The <em>tax-return-to-edit</em> arrives by way of the <code>@<a href=\"api/core/Input\" class=\"code-anchor\">Input</a>()</code> property, which is implemented with getters and setters.\nThe setter initializes the component's own instance of the <code>HeroTaxReturnService</code> with the incoming return.\nThe getter always returns what that service says is the current state of the hero.\nThe component also asks the service to save and restore this tax return.</p>\n\n<p translation-result=\"on\">ä½†å¦‚æœè©²æœå‹™æ˜¯ä¸€å€‹å…¨æ‡‰ç”¨ç¯„åœçš„å–®ä¾‹å°±ä¸è¡Œäº†ã€‚æ¯å€‹å…ƒä»¶å°±éƒ½æœƒå…±äº«åŒä¸€å€‹æœå‹™ä¾‹é …ï¼Œæ¯å€‹å…ƒä»¶ä¹Ÿéƒ½æœƒè¦†è“‹å±¬æ–¼å…¶å®ƒè‹±é›„çš„å ±ç¨…å–®ã€‚</p><p translation-origin=\"off\">This won't work if the service is an application-wide singleton.\nEvery component would share the same service instance, and each component would overwrite the tax return that belonged to another hero.</p>\n\n<p translation-result=\"on\">è¦é˜²æ­¢é€™ä¸€é»ï¼Œå°±è¦åœ¨ <code>HeroTaxReturnComponent</code> å…ƒè³‡æ–™çš„ <code>providers</code> å±¬æ€§ä¸­é…ç½®å…ƒä»¶ç´šçš„æ³¨å…¥å™¨ï¼Œä¾†æä¾›è©²æœå‹™ã€‚</p><p translation-origin=\"off\">To prevent this, configure the component-level injector of <code>HeroTaxReturnComponent</code> to provide the service, using the  <code>providers</code> property in the component metadata.</p>\n\n<code-example header=\"src/app/hero-tax-return.component.ts (providers)\" path=\"hierarchical-dependency-injection/src/app/hero-tax-return.component.ts\" region=\"providers\">\nproviders: [ HeroTaxReturnService ]\n\n</code-example>\n<p translation-result=\"on\"><code>HeroTaxReturnComponent</code> æœ‰å®ƒè‡ªå·±çš„ <code>HeroTaxReturnService</code> æä¾›è€…ã€‚\nå›æ†¶ä¸€ä¸‹ï¼Œæ¯å€‹å…ƒä»¶çš„<em>ä¾‹é …</em>éƒ½æœ‰å®ƒè‡ªå·±çš„æ³¨å…¥å™¨ã€‚\nåœ¨å…ƒä»¶ç´šæä¾›æœå‹™å¯ä»¥ç¢ºä¿å…ƒä»¶çš„<em>æ¯å€‹</em>ä¾‹é …éƒ½å¾—åˆ°ä¸€å€‹è‡ªå·±çš„ã€ç§æœ‰çš„æœå‹™ä¾‹é …ã€‚é€™å¯ä»¥ç¢ºä¿å ±ç¨…å–®ä¸æœƒè¢«æ„å¤–è¦†è“‹ã€‚</p><p translation-origin=\"off\">The <code>HeroTaxReturnComponent</code> has its own provider of the <code>HeroTaxReturnService</code>.\nRecall that every component <em>instance</em> has its own injector.\nProviding the service at the component level ensures that <em>every</em> instance of the component gets a private instance of the service. This makes sure that no tax return gets overwritten.</p>\n\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\">è©²å ´æ™¯ç¨‹å¼ç¢¼ä¸­çš„å…¶å®ƒéƒ¨åˆ†ä¾è³´å¦ä¸€äº› Angular çš„ç‰¹æ€§å’ŒæŠ€è¡“ï¼Œä½ å°‡æœƒåœ¨æœ¬æ–‡ä»¶çš„å…¶å®ƒç« ç¯€å­¸åˆ°ã€‚\nä½ å¯ä»¥åˆ°<live-example></live-example>æª¢è¦–ç¨‹å¼ç¢¼å’Œä¸‹è¼‰å®ƒã€‚</p><p translation-origin=\"off\">The rest of the scenario code relies on other Angular features and techniques that you can learn about elsewhere in the documentation.\nYou can review it and download it from the <live-example></live-example>.</p>\n\n</div>\n<h3 id=\"scenario-specialized-providers\" translation-result=\"on\">å ´æ™¯ï¼šå°ˆé–€çš„æä¾›è€…<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#scenario-specialized-providers\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">Scenario: specialized providers<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#scenario-specialized-providers\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">åœ¨å…¶å®ƒå±¤ç´šé‡æ–°æä¾›æœå‹™çš„å¦ä¸€å€‹ç†ç”±ï¼Œæ˜¯åœ¨å…ƒä»¶æ¨¹çš„æ·±å±¤ä¸­æŠŠè©²æœå‹™æ›¿æ›ç‚ºä¸€å€‹<em>æ›´å°ˆé–€åŒ–çš„</em>å¯¦ç¾ã€‚</p><p translation-origin=\"off\">Another reason to provide a service again at another level is to substitute a <em>more specialized</em> implementation of that service, deeper in the component tree.</p>\n\n<p translation-result=\"on\">ä¾‹å¦‚ï¼Œè€ƒæ…®ä¸€å€‹åŒ…å«è¼ªèƒæœå‹™è³‡è¨Šä¸¦ä¾è³´å…¶å®ƒæœå‹™ä¾†æä¾›æœ‰é—œæ±½è»Šçš„æ›´å¤šè©³ç´°è³‡è¨Šçš„ <code>Car</code> å…ƒä»¶ã€‚</p><p translation-origin=\"off\">For example, consider a <code>Car</code> component that includes tire service information and depends on other services to provide more details about the car.</p>\n\n<p translation-result=\"on\">æ¨™è¨˜ç‚º ï¼ˆAï¼‰ çš„æ ¹æ³¨å…¥å™¨ä½¿ç”¨<em>é€šç”¨</em>æä¾›è€…ä¾†ç²å–æœ‰é—œ <code>CarService</code> å’Œ <code>EngineService</code> çš„è©³ç´°è³‡è¨Šã€‚</p><p translation-origin=\"off\">The root injector, marked as (A), uses <em>generic</em> providers for details about <code>CarService</code> and <code>EngineService</code>.</p>\n\n<ol>\n<li>\n<p translation-result=\"on\"><code>Car</code> å…ƒä»¶ï¼ˆAï¼‰ã€‚å…ƒä»¶ ï¼ˆAï¼‰ é¡¯ç¤ºæœ‰é—œæ±½è»Šçš„è¼ªèƒæœå‹™è³‡æ–™ï¼Œä¸¦æŒ‡å®šé€šç”¨æœå‹™ä»¥æä¾›æœ‰é—œæ±½è»Šçš„æ›´å¤šè³‡è¨Šã€‚</p><p translation-origin=\"off\"><code>Car</code> component (A).  Component (A) displays tire service data about a car and specifies generic services to provide more information about the car.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">å­å…ƒä»¶ï¼ˆBï¼‰ã€‚å…ƒä»¶ï¼ˆBï¼‰ç‚º <code>CarService</code> å’Œ <code>EngineService</code> å®šç¾©äº†è‡ªå·±çš„<em>ç‰¹åŒ–çš„</em>æä¾›è€…ï¼Œå®ƒå€‘å…·æœ‰é©åˆå…ƒä»¶ ï¼ˆBï¼‰ ä¸­ç™¼ç”Ÿçš„äº‹æƒ…çš„ç‰¹æ®Šèƒ½åŠ›ã€‚</p><p translation-origin=\"off\">Child component (B). Component (B) defines its own, <em>specialized</em> providers for <code>CarService</code> and <code>EngineService</code> that have special capabilities suitable for what's going on in component (B).</p>\n\n</li>\n<li>\n<p translation-result=\"on\">å­å…ƒä»¶ï¼ˆCï¼‰ä½œç‚ºå…ƒä»¶ï¼ˆBï¼‰çš„å­å…ƒä»¶ã€‚å…ƒä»¶ ï¼ˆCï¼‰ ç‚º <code>CarService</code> å®šç¾©äº†è‡ªå·±çš„ã€<em>æ›´åŠ ç‰¹åŒ–</em>çš„æä¾›è€…ã€‚</p><p translation-origin=\"off\">Child component (C) as a child of Component (B). Component (C) defines its own, even <em>more specialized</em> provider for <code>CarService</code>.</p>\n\n</li>\n</ol>\n<div class=\"lightbox\">\n<img alt=\"car components\" src=\"generated/images/guide/dependency-injection/car-components.png\" width=\"338\" height=\"201\">\n</div>\n<p translation-result=\"on\">åœ¨å¹•å¾Œï¼Œæ¯å€‹å…ƒä»¶éƒ½æœ‰è‡ªå·±çš„æ³¨å…¥å™¨ï¼Œé€™å€‹æ³¨å…¥å™¨å¸¶æœ‰ç‚ºå…ƒä»¶æœ¬èº«æº–å‚™çš„ 0 å€‹ã€1 å€‹æˆ–å¤šå€‹æä¾›è€…ã€‚</p><p translation-origin=\"off\">Behind the scenes, each component sets up its own injector with zero, one, or more providers defined for that component itself.</p>\n\n<p translation-result=\"on\">ç•¶ä½ åœ¨æœ€æ·±çš„å…ƒä»¶ ï¼ˆCï¼‰ è™•è§£æ <code>Car</code> ä¾‹é …æ™‚ï¼Œå…¶æ³¨å…¥å™¨æœƒç”¢ç”Ÿï¼š</p><p translation-origin=\"off\">When you resolve an instance of <code>Car</code> at the deepest component (C), its injector produces: </p>\n\n<ul>\n<li>\n<p translation-result=\"on\">ç”±æ³¨å…¥å™¨ ï¼ˆCï¼‰ è§£æçš„ <code>Car</code> ä¾‹é …</p><p translation-origin=\"off\">An instance of <code>Car</code> resolved by injector (C)</p>\n\n</li>\n<li>\n<p translation-result=\"on\">ç”±æ³¨å…¥å™¨ ï¼ˆBï¼‰ è§£æçš„ <code>Engine</code></p><p translation-origin=\"off\">An <code>Engine</code> resolved by injector (B)</p>\n\n</li>\n<li>\n<p translation-result=\"on\">å®ƒçš„ <code>Tires</code> ç”±æ ¹æ³¨å…¥å™¨ ï¼ˆAï¼‰ è§£æã€‚</p><p translation-origin=\"off\">Its <code>Tires</code> resolved by the root injector (A).</p>\n\n</li>\n</ul>\n<div class=\"lightbox\">\n<img alt=\"car injector tree\" src=\"generated/images/guide/dependency-injection/injector-tree.png\" width=\"600\" height=\"248\">\n</div>\n<h2 id=\"more-on-dependency-injection\" translation-result=\"on\">é—œæ–¼ä¾è³´æ³¨å…¥çš„æ›´å¤šçŸ¥è­˜<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#more-on-dependency-injection\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">More on dependency injection<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/hierarchical-dependency-injection#more-on-dependency-injection\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">è¦äº†è§£é—œæ–¼ Angular ä¾è³´æ³¨å…¥çš„æ›´å¤šè³‡è¨Šï¼Œåƒé–± <a href=\"guide/dependency-injection-providers\">DI æä¾›è€…</a>å’Œ <a href=\"guide/dependency-injection-in-action\">DI å¯¦æˆ°</a> å…©ç« ã€‚</p><p translation-origin=\"off\">For more information on Angular dependency injection, see the <a href=\"guide/dependency-injection-providers\">DI Providers</a> and <a href=\"guide/dependency-injection-in-action\">DI in Action</a> guides.</p>\n\n<!-- links -->\n<!-- external links -->\n<!-- end links -->\n\n  <div class=\"reviewed\">æœ€å¾Œè¤‡æŸ¥æ™‚é–“ï¼š2/28/2022</div>\n</div>\n\n\n<!-- links to this doc:\n - errors/NG0200\n - guide/dependency-injection\n - guide/dependency-injection-navtree\n - guide/dependency-injection-overview\n - guide/example-apps-list\n - guide/glossary\n - guide/ngmodule-faq\n - guide/providers\n - guide/template-expression-operators\n - guide/upgrade\n-->\n<!-- links from this doc:\n - api/common/HashLocationStrategy\n - api/common/LocationStrategy\n - api/core/Component\n - api/core/Directive\n - api/core/EventEmitter\n - api/core/Host\n - api/core/Inject\n - api/core/Injectable\n - api/core/Injector\n - api/core/Input\n - api/core/NgModule\n - api/core/NgModule#imports\n - api/core/NgModule#providers\n - api/core/Optional\n - api/core/Output\n - api/core/Self\n - api/core/SkipSelf\n - api/core/ng-content\n - api/forms/FormsModule\n - api/platform-browser-dynamic/platformBrowserDynamic\n - api/platform-browser/BrowserModule\n - api/platform-browser/platformBrowser\n - guide/architecture-services\n - guide/architecture-services#providing-services\n - guide/dependency-injection-in-action\n - guide/dependency-injection-providers\n - guide/hierarchical-dependency-injection#directive-and-component\n - guide/hierarchical-dependency-injection#directive-å’Œ-component\n - guide/hierarchical-dependency-injection#elementinjector\n - guide/hierarchical-dependency-injection#elementinjector-use-case-examples\n - guide/hierarchical-dependency-injection#elementinjector-ä½¿ç”¨æ¡ˆä¾‹ç¯„ä¾‹\n - guide/hierarchical-dependency-injection#example-app-structure\n - guide/hierarchical-dependency-injection#hierarchical-injectors\n - guide/hierarchical-dependency-injection#host\n - guide/hierarchical-dependency-injection#host-and-viewproviders\n - guide/hierarchical-dependency-injection#host-å’Œ-viewproviders\n - guide/hierarchical-dependency-injection#logical-structure-of-the-template\n - guide/hierarchical-dependency-injection#modify-visibility\n - guide/hierarchical-dependency-injection#modifying-service-visibility\n - guide/hierarchical-dependency-injection#moduleinjector\n - guide/hierarchical-dependency-injection#more-on-dependency-injection\n - guide/hierarchical-dependency-injection#optional\n - guide/hierarchical-dependency-injection#platform-injector\n - guide/hierarchical-dependency-injection#providers-vs-viewproviders\n - guide/hierarchical-dependency-injection#providers-èˆ‡-viewproviders\n - guide/hierarchical-dependency-injection#providing-services-in-component\n - guide/hierarchical-dependency-injection#resolution-modifiers\n - guide/hierarchical-dependency-injection#resolution-rules\n - guide/hierarchical-dependency-injection#scenario-multiple-edit-sessions\n - guide/hierarchical-dependency-injection#scenario-service-isolation\n - guide/hierarchical-dependency-injection#scenario-specialized-providers\n - guide/hierarchical-dependency-injection#self\n - guide/hierarchical-dependency-injection#skipself\n - guide/hierarchical-dependency-injection#skipself-and-viewproviders\n - guide/hierarchical-dependency-injection#skipself-with-optional\n - guide/hierarchical-dependency-injection#skipself-å’Œ-viewproviders\n - guide/hierarchical-dependency-injection#types-of-injector-hierarchies\n - guide/hierarchical-dependency-injection#types-of-modifiers\n - guide/hierarchical-dependency-injection#using-the-providers-array\n - guide/hierarchical-dependency-injection#using-the-viewproviders-array\n - guide/hierarchical-dependency-injection#visibility-of-provided-tokens\n - guide/hierarchical-dependency-injection#ä½¿ç”¨-providers-é™£åˆ—\n - guide/hierarchical-dependency-injection#ä½¿ç”¨-viewproviders-é™£åˆ—\n - guide/hierarchical-dependency-injection#ä¿®æ”¹æœå‹™å¯è¦‹æ€§\n - guide/hierarchical-dependency-injection#ä¿®é£¾ç¬¦çš„å‹åˆ¥\n - guide/hierarchical-dependency-injection#é—œæ–¼ä¾è³´æ³¨å…¥çš„æ›´å¤šçŸ¥è­˜\n - guide/hierarchical-dependency-injection#åˆç”¨-skipself-å’Œ-optional\n - guide/hierarchical-dependency-injection#åœ¨-component-ä¸­æä¾›æœå‹™\n - guide/hierarchical-dependency-injection#å ´æ™¯å°ˆé–€çš„æä¾›è€…\n - guide/hierarchical-dependency-injection#å ´æ™¯å¤šé‡ç·¨è¼¯æœƒè©±\n - guide/hierarchical-dependency-injection#å ´æ™¯æœå‹™éš”é›¢\n - guide/hierarchical-dependency-injection#å¤šç´šæ³¨å…¥å™¨\n - guide/hierarchical-dependency-injection#å¹³å°æ³¨å…¥å™¨\n - guide/hierarchical-dependency-injection#æ‡‰ç”¨ç¨‹å¼çµæ§‹ç¯„ä¾‹\n - guide/hierarchical-dependency-injection#æä¾›è€…ä»¤ç‰Œçš„å¯è¦‹æ€§\n - guide/hierarchical-dependency-injection#æ–æ¨¹æœ€ä½³åŒ–èˆ‡-injectable\n - guide/hierarchical-dependency-injection#ç¯„æœ¬çš„é‚è¼¯çµæ§‹\n - guide/hierarchical-dependency-injection#æ³¨å…¥å™¨å±¤æ¬¡çµæ§‹çš„å‹åˆ¥\n - guide/hierarchical-dependency-injection#è§£æä¿®é£¾ç¬¦\n - guide/hierarchical-dependency-injection#è§£æè¦å‰‡\n - guide/router#location-strategy\n - https://github.com/ng-docs/angular-cn/edit/cn/aio/content/guide/hierarchical-dependency-injection.md?message=docs%3A%20è«‹ç°¡è¿°ä½ çš„ä¿®æ”¹...\n-->"}
{"id":"guide/service-worker-getting-started","title":"Getting started with service workers","contents":"\n\n\n<div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/edit/cn/aio/content/guide/service-worker-getting-started.md?message=docs%3A%20請簡述你的修改...\" aria-label=\"提供編輯建議\" title=\"提供編輯建議\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n</div>\n\n\n<div class=\"content\">\n  <h1 id=\"getting-started-with-service-workers\" translation-result=\"on\">Service Worker 快速上手<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-getting-started#getting-started-with-service-workers\"><i class=\"material-icons\">link</i></a></h1><h1 translation-origin=\"off\">Getting started with service workers<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-getting-started#getting-started-with-service-workers\"><i class=\"material-icons\">link</i></a></h1>\n\n<p translation-result=\"on\">本文件解釋瞭如何在 <a href=\"cli\">Angular CLI</a> 專案中啟用對 Angular Service Worker 的支援。稍後它會用一個簡單的範例來向你展示 Service Worker 實踐，包括載入和基礎的快取功能。</p><p translation-origin=\"off\">This document explains how to enable Angular service worker support in projects that you created with the <a href=\"cli\">Angular CLI</a>.\nIt then uses an example to show you a service worker in action, demonstrating loading and basic caching.</p>\n\n<h2 id=\"prerequisites\" translation-result=\"on\">前提條件<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-getting-started#prerequisites\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Prerequisites<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-getting-started#prerequisites\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">對 <a href=\"guide/service-worker-intro\">Angular Service Worker 簡介</a>中的資訊有了基本的瞭解。</p><p translation-origin=\"off\">A basic understanding of the information in <a href=\"guide/service-worker-intro\">Introduction to Angular service workers</a>.</p>\n\n<h2 id=\"adding-a-service-worker-to-your-project\" translation-result=\"on\">為你的專案新增 Service Worker<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-getting-started#adding-a-service-worker-to-your-project\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Adding a service worker to your project<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-getting-started#adding-a-service-worker-to-your-project\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">要讓你的專案支援 Angular Service Worker，可以使用 CLI 命令 <code>ng add @angular/pwa</code>。它會新增 <code>@angular/service-worker</code> 套件，並建立必要的支援檔案，小心翼翼地配置你的應用，以便使用 Service Worker。</p><p translation-origin=\"off\">To set up the Angular service worker in your project, use the CLI command <code>ng add @angular/pwa</code>.\nIt takes care of configuring your application to use service workers by adding the <code>@angular/service-worker</code> package along\nwith setting up the necessary support files.</p>\n\n<code-example format=\"shell\" language=\"shell\">\n\nng add @angular/pwa --project &lt;project-name&gt;\n\n</code-example>\n<p translation-result=\"on\">上述命令完成了如下步驟：</p><p translation-origin=\"off\">The preceding command completes the following actions:</p>\n\n<ol>\n<li>\n<p translation-result=\"on\">把 <code>@angular/service-worker</code> 新增到你的專案中。</p><p translation-origin=\"off\">Adds the <code>@angular/service-worker</code> package to your project.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">在 CLI 中啟用 Service Worker 的建構支援。</p><p translation-origin=\"off\">Enables service worker build support in the CLI.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">在應用模組中匯入並註冊 Service Worker。</p><p translation-origin=\"off\">Imports and registers the service worker in the application module.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">修改 <code>index.html</code> 檔案：</p><p translation-origin=\"off\">Updates the <code>index.html</code> file:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\">包含要新增到 <code>manifest.webmanifest</code> 檔案中的連結。</p><p translation-origin=\"off\">Includes a link to add the <code>manifest.webmanifest</code> file</p>\n\n</li>\n<li>\n<p translation-result=\"on\">為 <code>theme-color</code> 新增 meta 標籤。</p><p translation-origin=\"off\">Adds a meta tag for <code>theme-color</code></p>\n\n</li>\n</ul>\n</li>\n<li>\n<p translation-result=\"on\">建立圖示檔案，以支援安裝漸進式應用（PWA）。</p><p translation-origin=\"off\">Installs icon files to support the installed Progressive Web App (PWA).</p>\n\n</li>\n<li>\n<p translation-result=\"on\">建立一個名叫 <a href=\"guide/service-worker-config\"><code>ngsw-config.json</code></a> 的 Service Worker 配置檔案，它會用來指定快取的行為以及其它設定。</p><p translation-origin=\"off\">Creates the service worker configuration file called <a href=\"guide/service-worker-config\"><code>ngsw-config.json</code></a>, which specifies the caching behaviors and other settings.</p>\n\n<p translation-result=\"on\">現在，建構本專案：</p><p translation-origin=\"off\">Now, build the project:</p>\n\n</li>\n</ol>\n<code-example format=\"shell\" language=\"shell\">\n\nng build\n\n</code-example>\n<p translation-result=\"on\">現在，這個 CLI 專案就可以使用 Angular Service Worker 了。</p><p translation-origin=\"off\">The CLI project is now set up to use the Angular service worker.</p>\n\n<h2 id=\"service-worker-in-action-a-tour\" translation-result=\"on\">Service Worker 實戰：嚮導<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-getting-started#service-worker-in-action-a-tour\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Service worker in action: a tour<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-getting-started#service-worker-in-action-a-tour\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">本節用一個範例應用來示範一下 Service Worker 實戰。</p><p translation-origin=\"off\">This section demonstrates a service worker in action,\nusing an example application.</p>\n\n<h3 id=\"initial-load\" translation-result=\"on\">最初的載入<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-getting-started#initial-load\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">Initial load<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-getting-started#initial-load\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">在伺服器執行起來之後，你可以在瀏覽器中存取 <code>&lt;http://localhost:8080/&gt;</code>。你的應用像通常一樣載入。</p><p translation-origin=\"off\">With the server running, point your browser at <code>http://localhost:8080</code>.\nYour application should load normally.</p>\n\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\"><strong>提示</strong>：<br>\n當測試 Angular Service Worker 時，最好使用瀏覽器中的隱身或隱私視窗，以確保 Service Worker 不會從以前的殘留狀態中讀取資料，否則可能導致意外的行為。</p><p translation-origin=\"off\"><strong>TIP</strong>: <br>\nWhen testing Angular service workers, it's a good idea to use an incognito or private window in your browser to ensure the service worker doesn't end up reading from a previous leftover state, which can cause unexpected behavior.</p>\n\n</div>\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\"><strong>注意</strong>：<br>\n如果沒有使用 HTTPS，那麼 Service Worker 只會在 <code>localhost</code> 上的應用中進行註冊。</p><p translation-origin=\"off\"><strong>NOTE</strong>: <br>\nIf you are not using HTTPS, the service worker will only be registered when accessing the application on <code>localhost</code>.</p>\n\n</div>\n<h3 id=\"simulating-a-network-issue\" translation-result=\"on\">模擬網路出問題<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-getting-started#simulating-a-network-issue\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">Simulating a network issue<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-getting-started#simulating-a-network-issue\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">如果想模擬網路問題，以便在你的應用中禁用網路互動。</p><p translation-origin=\"off\">To simulate a network issue, disable network interaction for your application.</p>\n\n<p translation-result=\"on\">在 Chrome 中：</p><p translation-origin=\"off\">In Chrome:</p>\n\n<ol>\n<li>\n<p translation-result=\"on\">選擇 <strong>Tools</strong> &gt; <strong>Developer Tools</strong>（從右上角的 Chrome 選單）。</p><p translation-origin=\"off\">Select <strong>Tools</strong> &gt; <strong>Developer Tools</strong> (from the Chrome menu located in the top right corner).</p>\n\n</li>\n<li>\n<p translation-result=\"on\">進入 <strong>Network 頁</strong>。</p><p translation-origin=\"off\">Go to the <strong>Network tab</strong>.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">在 <strong>Throttling</strong> 下拉選單中選擇 <strong>Offline</strong> 複選框。</p><p translation-origin=\"off\">Select <strong>Offline</strong> in the <strong>Throttling</strong> dropdown menu.</p>\n\n</li>\n</ol>\n<div class=\"lightbox\">\n<img alt=\"The offline option in the Network tab is selected\" src=\"generated/images/guide/service-worker/offline-option.png\" width=\"910\" height=\"261\">\n</div>\n<p translation-result=\"on\">現在，本應用不能再和網路進行互動了。</p><p translation-origin=\"off\">Now the application has no access to network interaction.</p>\n\n<p translation-result=\"on\">對於那些不使用 Angular Service Worker 的應用，現在重新整理將會顯示 Chrome 的“網路中斷”頁，提示“沒有可用的網路連線”。</p><p translation-origin=\"off\">For applications that do not use the Angular service worker, refreshing now would display Chrome's Internet disconnected page that says \"There is no Internet connection\".</p>\n\n<p translation-result=\"on\">有了 Angular Service Worker，本應用的行為就不一樣了。重新整理時，頁面會正常載入。</p><p translation-origin=\"off\">With the addition of an Angular service worker, the application behavior changes.\nOn a refresh, the page loads normally.</p>\n\n<p translation-result=\"on\">看看 Network 頁，來驗證此 Service Worker 是啟用的。</p><p translation-origin=\"off\">Look at the Network tab to verify that the service worker is active.</p>\n\n<div class=\"lightbox\">\n<img alt=\"Requests are marked as from ServiceWorker\" src=\"generated/images/guide/service-worker/sw-active.png\" width=\"1576\" height=\"170\">\n</div>\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\"><strong>注意</strong>：<br>\n在 “Size” 列中，請求的狀態是 <code>(ServiceWorker)</code>。\n這表示該資源不是從網路上載入的，而是從 Service Worker 的快取中。</p><p translation-origin=\"off\"><strong>NOTE</strong>: <br>\nUnder the \"Size\" column, the requests state is <code>(ServiceWorker)</code>.\nThis means that the resources are not being loaded from the network.\nInstead, they are being loaded from the service worker's cache.</p>\n\n</div>\n<h3 id=\"whats-being-cached\" translation-result=\"on\">什麼被快取了？<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-getting-started#whats-being-cached\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">What's being cached?<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-getting-started#whats-being-cached\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">注意，瀏覽器要渲染的所有這些檔案都被快取了。<code>ngsw-config.json</code> 樣板檔案被配置成了要快取 CLI 用到的那些檔案：</p><p translation-origin=\"off\">Notice that all of the files the browser needs to render this application are cached.\nThe <code>ngsw-config.json</code> boilerplate configuration is set up to cache the specific resources used by the CLI:</p>\n\n<ul>\n<li>\n<p><code>index.html</code></p>\n</li>\n<li>\n<p><code>favicon.ico</code></p>\n</li>\n<li>\n<p translation-result=\"on\">建構結果（JS 和 CSS 包）</p><p translation-origin=\"off\">Build artifacts (JS and CSS bundles)</p>\n\n</li>\n<li>\n<p translation-result=\"on\"><code>assets</code> 下的一切</p><p translation-origin=\"off\">Anything under <code>assets</code></p>\n\n</li>\n<li>\n<p translation-result=\"on\">圖片和字型直接位於所配置的 <code>outputPath</code>(認為 <code>./dist/&lt;project-name&gt;/</code>）或 <code>resourcesOutputPath</code> 下。關於這些配置的更多資訊，請參閱 <a href=\"cli/build\"><code>ng build</code></a>。</p><p translation-origin=\"off\">Images and fonts directly under the configured <code>outputPath</code> (by default <code>./dist/&lt;project-name&gt;/</code>) or <code>resourcesOutputPath</code>.\nSee <a href=\"cli/build\"><code>ng build</code></a> for more information about these options.</p>\n\n</li>\n</ul>\n<div class=\"alert is-important\">\n<p translation-result=\"on\">注意如下兩個關鍵點：</p><p translation-origin=\"off\">Pay attention to two key points:</p>\n\n<ol>\n<li>\n<p translation-result=\"on\">所產生的 <code>ngsw-config.json</code> 包括一個可快取字型和圖像的有限列表。在某些情況下，你可能要按需修改這些 glob 模式。</p><p translation-origin=\"off\">The generated <code>ngsw-config.json</code> includes a limited list of cacheable fonts and images extensions.\nIn some cases, you might want to modify the glob pattern to suit your needs.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">如果在生成了配置檔案之後修改了 <code>resourcesOutputPath</code> 或 <code>assets</code> 的路徑，那麼就要在 <code>ngsw-config.json</code> 中手動修改這些路徑。</p><p translation-origin=\"off\">If <code>resourcesOutputPath</code> or <code>assets</code> paths are modified after the generation of configuration file, you need to change the paths manually in <code>ngsw-config.json</code>.</p>\n\n</li>\n</ol>\n</div>\n<h3 id=\"making-changes-to-your-application\" translation-result=\"on\">修改你的應用<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-getting-started#making-changes-to-your-application\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">Making changes to your application<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-getting-started#making-changes-to-your-application\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">現在，你已經看到了 Service Worker 如何快取你的應用，接下來的步驟講它如何進行更新。</p><p translation-origin=\"off\">Now that you've seen how service workers cache your application, the next step is understanding how updates work.\nMake a change to the application, and watch the service worker install the update:</p>\n\n<ol>\n<li>\n<p translation-result=\"on\">如果你正在隱身視窗中測試，請開啟第二個空白頁。這會讓該隱身視窗和快取的狀態在測試期間持續活著。</p><p translation-origin=\"off\">If you're testing in an incognito window, open a second blank tab.\nThis keeps the incognito and the cache state alive during your test.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">關閉該應用的頁面，而不是整個視窗。這也會同時關閉開發者工具。</p><p translation-origin=\"off\">Close the application tab, but not the window.\nThis should also close the Developer Tools.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">關閉 <code>http-server</code>。</p><p translation-origin=\"off\">Shut down <code>http-server</code>.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">開啟 <code>src/app/app.component.html</code> 以供編輯。</p><p translation-origin=\"off\">Open <code>src/app/app.component.html</code> for editing.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">把文字 <code>Welcome to {{title}}!</code> 改為 <code>Bienvenue à {{title}}!</code>。</p><p translation-origin=\"off\">Change the text <code>Welcome to {{title}}!</code> to <code>Bienvenue à {{title}}!</code>.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">再次建構並執行此伺服器：</p><p translation-origin=\"off\">Build and run the server again:</p>\n\n<code-example format=\"shell\" language=\"shell\">\n\nng build\nhttp-server -p 8080 -c-1 dist/&lt;project-name&gt;\n\n</code-example>\n</li>\n</ol>\n<h3 id=\"updating-your-application-in-the-browser\" translation-result=\"on\">在瀏覽器中更新你的應用<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-getting-started#updating-your-application-in-the-browser\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">Updating your application in the browser<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-getting-started#updating-your-application-in-the-browser\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">現在，看看瀏覽器和 Service Worker 如何處理這個更新後的應用。</p><p translation-origin=\"off\">Now look at how the browser and service worker handle the updated application.</p>\n\n<ol>\n<li>\n<p translation-result=\"on\">再次在同一個視窗中開啟 http://localhost:8080，發生了什麼？</p><p translation-origin=\"off\">Open http://localhost:8080 again in the same window.\nWhat happens?</p>\n\n<div class=\"lightbox\">\n<img alt=\"It still says Welcome to Service Workers!\" src=\"generated/images/guide/service-worker/welcome-msg-en.png\" width=\"411\" height=\"248\">\n</div>\n<p translation-result=\"on\">錯在哪裡？哪裡也沒錯，真的。Angular Service Worker 正在做自己的工作，並且用它<strong>已經安裝過</strong>的版本提供服務，雖然，已經有新版本可用了。由於更關注速度，所以 Service Worker 並不會在啟動它已經快取過的版本之前先等待檢查更新。</p><p translation-origin=\"off\">What went wrong?\nNothing, actually.\nThe Angular service worker is doing its job and serving the version of the application that it has <strong>installed</strong>, even though there is an update available.\nIn the interest of speed, the service worker doesn't wait to check for updates before it serves the application that it has cached.</p>\n\n<p translation-result=\"on\">看看 <code>http-server</code> 的 log，就會發現 Service Worker 請求了 <code>/ngsw.json</code> 檔案，這是 Service Worker 正在檢查更新。</p><p translation-origin=\"off\">Look at the <code>http-server</code> logs to see the service worker requesting <code>/ngsw.json</code>.\nThis is how the service worker checks for updates.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">重新整理頁面。</p><p translation-origin=\"off\">Refresh the page.</p>\n\n<div class=\"lightbox\">\n<img alt=\"The text has changed to say Bienvenue à app!\" src=\"generated/images/guide/service-worker/welcome-msg-fr.png\" width=\"393\" height=\"240\">\n</div>\n<p translation-result=\"on\">Service Worker <em>在後台</em>安裝好了這個更新後的版本，下次載入或重新整理頁面時，Service Worker 就切換到最新的版本了。</p><p translation-origin=\"off\">The service worker installed the updated version of your application <em>in the background</em>, and the next time the page is loaded or reloaded, the service worker switches to the latest version.</p>\n\n</li>\n</ol>\n<h2 id=\"more-on-angular-service-workers\" translation-result=\"on\">關於 Angular Service Worker 的更多資訊<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-getting-started#more-on-angular-service-workers\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">More on Angular service workers<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-getting-started#more-on-angular-service-workers\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">你可能還對下列內容感興趣：</p><p translation-origin=\"off\">You might also be interested in the following:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\"><a href=\"guide/app-shell\">應用外殼</a></p><p translation-origin=\"off\"><a href=\"guide/app-shell\">App Shell</a></p>\n\n</li>\n<li>\n<p translation-result=\"on\"><a href=\"guide/service-worker-communications\">與 Service Worker 通訊</a></p><p translation-origin=\"off\"><a href=\"guide/service-worker-communications\">Communicating with service workers</a></p>\n\n</li>\n</ul>\n<!-- links -->\n<!-- external links -->\n<!-- end links -->\n\n  <div class=\"reviewed\">最後複查時間：2/28/2022</div>\n</div>\n\n\n<!-- links to this doc:\n - guide/service-worker-communications\n - guide/service-worker-intro\n - guide/service-worker-notifications\n-->\n<!-- links from this doc:\n - cli\n - cli/build\n - guide/app-shell\n - guide/service-worker-communications\n - guide/service-worker-config\n - guide/service-worker-getting-started#adding-a-service-worker-to-your-project\n - guide/service-worker-getting-started#getting-started-with-service-workers\n - guide/service-worker-getting-started#initial-load\n - guide/service-worker-getting-started#making-changes-to-your-application\n - guide/service-worker-getting-started#more-on-angular-service-workers\n - guide/service-worker-getting-started#prerequisites\n - guide/service-worker-getting-started#service-worker-in-action-a-tour\n - guide/service-worker-getting-started#service-worker-實戰嚮導\n - guide/service-worker-getting-started#service-worker-快速上手\n - guide/service-worker-getting-started#simulating-a-network-issue\n - guide/service-worker-getting-started#updating-your-application-in-the-browser\n - guide/service-worker-getting-started#whats-being-cached\n - guide/service-worker-getting-started#為你的專案新增-service-worker\n - guide/service-worker-getting-started#什麼被快取了\n - guide/service-worker-getting-started#修改你的應用\n - guide/service-worker-getting-started#關於-angular-service-worker-的更多資訊\n - guide/service-worker-getting-started#前提條件\n - guide/service-worker-getting-started#在瀏覽器中更新你的應用\n - guide/service-worker-getting-started#最初的載入\n - guide/service-worker-getting-started#模擬網路出問題\n - guide/service-worker-intro\n - https://github.com/ng-docs/angular-cn/edit/cn/aio/content/guide/service-worker-getting-started.md?message=docs%3A%20請簡述你的修改...\n-->"}
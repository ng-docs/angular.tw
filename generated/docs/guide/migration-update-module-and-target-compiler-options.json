{"id":"guide/migration-update-module-and-target-compiler-options","title":"Update module and target compiler options migration","contents":"\n\n\n<div class=\"github-links\">\n  <a href=\"https://github.com/angular/angular-cn/edit/aio/aio/content/guide/migration-update-module-and-target-compiler-options.md?message=docs%3A%20請簡述你的修改...\" aria-label=\"提供編輯建議\" title=\"提供編輯建議\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n</div>\n\n\n<div class=\"content\">\n  <h1 id=\"update-module-and-target-compiler-options-migration\" translation-result=\"on\">更新 <code>module</code> 和 <code>target</code> 編譯器選項的遷移<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-update-module-and-target-compiler-options#update-module-and-target-compiler-options-migration\"><i class=\"material-icons\">link</i></a></h1><h1 translation-origin=\"off\" id=\"update-module-and-target-compiler-options-migration\">Update <code>module</code> and <code>target</code> compiler options migration<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-update-module-and-target-compiler-options#update-module-and-target-compiler-options-migration\"><i class=\"material-icons\">link</i></a></h1>\n\n<h2 id=\"what-does-this-migration-do\" translation-result=\"on\">這種遷移是做什麼的？<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-update-module-and-target-compiler-options#what-does-this-migration-do\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"what-does-this-migration-do\">What does this migration do?<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-update-module-and-target-compiler-options#what-does-this-migration-do\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">此遷移會調整工作區的<a href=\"guide/typescript-configuration\">TypeScript 配置檔案</a>中的<a href=\"https://www.typescriptlang.org/tsconfig#target\"><code>target</code></a>和<a href=\"https://www.typescriptlang.org/tsconfig#module\"><code>module</code></a>設定。對每個選項的更改因使用 TypeScript 配置檔案的建構器或命令而異。除非另有註釋，否則僅當自專案建立以來現有值未更改時，才會進行更改。此過程有助於確保對選項的有意更改保持不變。</p><p translation-origin=\"off\">This migration adjusts the <a href=\"https://www.typescriptlang.org/tsconfig#target\"><code>target</code></a> and <a href=\"https://www.typescriptlang.org/tsconfig#module\"><code>module</code></a> settings within the <a href=\"guide/typescript-configuration\">TypeScript configuration files</a> for the workspace.\nThe changes to each option vary based on the builder or command that uses the TypeScript configuration file.\nUnless otherwise commented, changes are only made if the existing value was not changed since the project was created.\nThis process helps ensure that intentional changes to the options are kept in place.</p>\n\n<table>\n<thead>\n<tr>\n<th align=\"left\"><p translation-result=\"on\">TypeScript 配置檔案</p><p translation-origin=\"off\">TypeScript configuration files</p></th>\n<th align=\"left\"><p translation-result=\"on\">屬性變更</p><p translation-origin=\"off\">Changed property</p></th>\n<th align=\"left\"><p translation-result=\"on\">現有值</p><p translation-origin=\"off\">Existing value</p></th>\n<th align=\"left\"><p translation-result=\"on\">新值</p><p translation-origin=\"off\">New value</p></th>\n</tr>\n</thead>\n<tbody>\n\n<tr>\n<td align=\"left\"><code>&lt;workspace base&gt;/tsconfig.json</code></td>\n<td align=\"left\"><code>\"module\"</code></td>\n<td align=\"left\"><code>\"esnext\"</code></td>\n<td align=\"left\"><code>\"es2020\"</code></td>\n</tr>\n<tr>\n<td align=\"left\"><p translation-result=\"on\">在 <code><a href=\"api/animations/browser\" class=\"code-anchor\">browser</a></code> 建構器選項中使用（用於應用程式的 <code>ng build</code>）</p><p translation-origin=\"off\">Used in <code><a href=\"api/animations/browser\" class=\"code-anchor\">browser</a></code>  builder options (<code>ng build</code> for applications)</p></td>\n<td align=\"left\"><code>\"module\"</code></td>\n<td align=\"left\"><code>\"esnext\"</code></td>\n<td align=\"left\"><code>\"es2020\"</code></td>\n</tr>\n\n<tr>\n<td align=\"left\"><p translation-result=\"on\">在 <code>ng-packagr</code> 建構器選項中使用（用於庫的 <code>ng build</code>）</p><p translation-origin=\"off\">Used in <code>ng-packagr</code> builder options (<code>ng build</code> for libraries)</p></td>\n<td align=\"left\"><code>\"module\"</code></td>\n<td align=\"left\"><code>\"esnext\"</code></td>\n<td align=\"left\"><code>\"es2020\"</code></td>\n</tr>\n\n<tr>\n<td align=\"left\"><p translation-result=\"on\">在 <code>karma</code> 器選項中使用（用於應用程式的 <code>ng test</code>）</p><p translation-origin=\"off\">Used in <code>karma</code> builder options (<code>ng test</code> for applications)</p></td>\n<td align=\"left\"><code>\"module\"</code></td>\n<td align=\"left\"><code>\"esnext\"</code></td>\n<td align=\"left\"><code>\"es2020\"</code></td>\n</tr>\n\n<tr>\n<td align=\"left\"><p translation-result=\"on\">在 <code>server</code> 建構器選項中使用（通用）</p><p translation-origin=\"off\">Used in <code>server</code> builder options (universal)</p></td>\n<td align=\"left\"><code>\"module\"</code></td>\n<td align=\"left\"><code>\"commonjs\"</code></td>\n<td align=\"left\"><p translation-result=\"on\"><em>已移除</em></p><p translation-origin=\"off\"><em>removed</em></p></td>\n</tr>\n\n<tr>\n<td align=\"left\"><p translation-result=\"on\">在 <code>server</code> 建構器選項中使用（通用）</p><p translation-origin=\"off\">Used in <code>server</code> builder options (universal)</p></td>\n<td align=\"left\"><code>\"target\"</code></td>\n<td align=\"left\"><p translation-result=\"on\"><em>任何</em></p><p translation-origin=\"off\"><em>any</em></p></td>\n<td align=\"left\"><code>\"es2016\"</code></td>\n</tr>\n\n<tr>\n<td align=\"left\"><p translation-result=\"on\">在 <code>protractor</code> 建構器選項中使用（用於應用程式的 <code>ng e2e</code>）</p><p translation-origin=\"off\">Used in <code>protractor</code> builder options (<code>ng e2e</code> for applications)</p></td>\n<td align=\"left\"><code>\"target\"</code></td>\n<td align=\"left\"><code>\"es5\"</code></td>\n<td align=\"left\"><code>\"es2018\"</code></td>\n</tr>\n\n</tbody>\n</table>\n<h2 id=\"why-is-this-migration-necessary\" translation-result=\"on\">為何這次遷移必不可少？<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-update-module-and-target-compiler-options#why-is-this-migration-necessary\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"why-is-this-migration-necessary\">Why is this migration necessary?<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-update-module-and-target-compiler-options#why-is-this-migration-necessary\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">此遷移透過更新專案，讓它使用建議的最佳實踐編譯選項，來改善專案的長期支援能力。</p><p translation-result=\"on\">對於要在 Node.js 上執行的功能（比如 Universal 和 Protractor），新設定還提供了效能和故障排除方面的優勢。Angular CLI 的最低 Node.js 版本（v10.13）支援 ES2018 及更早版本中的功能。透過瞄準更高版本的 ES，編譯器可以轉換更少的程式碼，並且可以直接使用新特性。由於 zone.js 不支援原生 <code><a href=\"api/common/AsyncPipe\" class=\"code-anchor\">async</a></code> 和 <code>await</code>，因此通用版本仍以 ES2016 為目標。</p><p translation-origin=\"off\">This migration provides improvements to the long-term supportability of projects by updating the projects to use recommended best practice compilation options.</p>\n\n<p translation-origin=\"off\">For the functionality that executes on Node.js, such as Universal and Protractor, the new settings provide performance and troubleshooting benefits as well.\nThe minimum Node.js version for the Angular CLI (v10.13) supports features in ES2018 and earlier.\nBy targeting later ES versions, the compiler transforms less code and can use newer features directly.\nSince zone.js does not support native <code><a href=\"api/common/AsyncPipe\" class=\"code-anchor\">async</a></code> and <code>await</code>, the universal builds still target ES2016.</p>\n\n<h2 id=\"why-es2020-instead-of-esnext\" translation-result=\"on\">為什麼用 <code>\"es2020\"</code> 代替 <code>\"esnext\"</code> ？<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-update-module-and-target-compiler-options#why-es2020-instead-of-esnext\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"why-es2020-instead-of-esnext\">Why <code>\"es2020\"</code> instead of <code>\"esnext\"</code>?<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-update-module-and-target-compiler-options#why-es2020-instead-of-esnext\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">在 TypeScript 3.9 中，由 <code>module</code> 控制的 TypeScript 編譯器的行為與 <code>\"esnext\"</code> 和 <code>\"es2020\"</code> 值相同。此行為將來可能會更改，因為 <code>\"esnext\"</code> 選項可能會以向後不相容的方式發展，從而導致在 TypeScript 更新時導致建構期或執行期錯誤。其後果是，程式碼可能變得不穩定。使用 <code>\"es2020\"</code> 選項可減輕此風險。</p><p translation-origin=\"off\">In TypeScript 3.9, the behavior of the TypeScript compiler controlled by <code>module</code> is the same with both <code>\"esnext\"</code> and <code>\"es2020\"</code> values.\nThis behavior can change in the future, because the <code>\"esnext\"</code> option could evolve in a backwards incompatible ways, resulting in build-time or run-time errors during a TypeScript update.\nAs a result, code can become unstable.\nUsing the <code>\"es2020\"</code> option mitigates this risk.</p>\n\n<!-- links -->\n<!-- external links -->\n<!-- end links -->\n\n  <div class=\"reviewed\">最後複查時間： 2/28/2022</div>\n</div>\n\n\n<!-- links to this doc:\n-->\n<!-- links from this doc:\n - api/animations/browser\n - api/common/AsyncPipe\n - guide/migration-update-module-and-target-compiler-options#update-module-and-target-compiler-options-migration\n - guide/migration-update-module-and-target-compiler-options#what-does-this-migration-do\n - guide/migration-update-module-and-target-compiler-options#why-es2020-instead-of-esnext\n - guide/migration-update-module-and-target-compiler-options#why-is-this-migration-necessary\n - guide/typescript-configuration\n - https://github.com/angular/angular-cn/edit/aio/aio/content/guide/migration-update-module-and-target-compiler-options.md?message=docs%3A%20請簡述你的修改...\n - https://www.typescriptlang.org/tsconfig#module\n - https://www.typescriptlang.org/tsconfig#target\n-->"}
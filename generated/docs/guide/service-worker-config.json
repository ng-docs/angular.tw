{"id":"guide/service-worker-config","title":"Service worker configuration","contents":"\n\n\n<div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/edit/cn/aio/content/guide/service-worker-config.md?message=docs%3A%20請簡述你的修改...\" aria-label=\"提供編輯建議\" title=\"提供編輯建議\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n</div>\n\n\n<div class=\"content\">\n  <h1 id=\"service-worker-configuration\" translation-result=\"on\">Service Worker 配置<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-config#service-worker-configuration\"><i class=\"material-icons\">link</i></a></h1><h1 translation-origin=\"off\">Service worker configuration<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-config#service-worker-configuration\"><i class=\"material-icons\">link</i></a></h1>\n\n<p translation-result=\"on\">本主題介紹了 Service Worker 配置檔案的屬性。</p><p translation-origin=\"off\">This topic describes the properties of the service worker configuration file.</p>\n\n<h2 id=\"prerequisites\" translation-result=\"on\">前提條件<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-config#prerequisites\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Prerequisites<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-config#prerequisites\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">對下列知識有基本的瞭解：</p><p translation-origin=\"off\">A basic understanding of the following:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\"><a href=\"https://developer.chrome.com/docs/workbox/service-worker-overview/\">Service Worker 概覽</a></p><p translation-origin=\"off\"><a href=\"https://developer.chrome.com/docs/workbox/service-worker-overview/\">Service worker overview</a></p>\n\n</li>\n<li>\n<p translation-result=\"on\"><a href=\"guide/service-worker-devops\">生產環境下的 Service Worker</a>。</p><p translation-origin=\"off\"><a href=\"guide/service-worker-devops\">Service Worker in Production</a></p>\n\n</li>\n</ul>\n<p translation-result=\"on\">配置檔案 <code>ngsw-config.json</code> 指定了 Angular Service Worker 應該快取哪些檔案和資料的 URL，以及如何更新快取的檔案和資料。<a href=\"cli\">Angular CLI</a> 會在 <code>ng build</code> 期間處理配置檔案。如果想手動處理，可以用 <code>ngsw-config</code> 工具（這裡的 <code>&lt;project-name&gt;</code> 就是要建構的專案名）：</p><p translation-origin=\"off\">The <code>ngsw-config.json</code> configuration file specifies which files and data URLs the Angular service worker should cache and how it should update the cached files and data.\nThe <a href=\"cli\">Angular CLI</a> processes the configuration file during <code>ng build</code>.\nManually, process it with the <code>ngsw-config</code> tool (where <code>&lt;project-name&gt;</code> is the name of the project being built):</p>\n\n<code-example format=\"shell\" language=\"shell\">\n\n./node_modules/.bin/ngsw-config ./dist/&lt;project-name&gt; ./ngsw-config.json [/base/href]\n\n</code-example>\n<p translation-result=\"on\">該配置檔案使用 JSON 格式。所有檔案路徑都必須以 <code>/</code> 開頭，也就是相應的部署目錄 —— 在 CLI 專案中的它通常是 <code>dist/&lt;project-name&gt;</code>。</p><p translation-origin=\"off\">The configuration file uses the JSON format.\nAll file paths must begin with <code>/</code>, which corresponds to the deployment directory —usually <code>dist/&lt;project-name&gt;</code> in CLI projects.</p>\n\n<p><a id=\"glob-patterns\"></a></p>\n<p translation-result=\"on\">除非另有註釋，否則模式使用<strong>limited*</strong> glob 格式，該格式將在內部轉換為正則表示式：</p><p translation-origin=\"off\">Unless otherwise commented, patterns use a <strong>limited*</strong> glob format that internally will be converted into regex:</p>\n\n<table>\n<thead>\n<tr>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">Glob 格式</nt-wrapper><nt-wrapper translation-origin=\"off\">Glob formats</nt-wrapper></th>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">詳情</nt-wrapper><nt-wrapper translation-origin=\"off\">Details</nt-wrapper></th>\n</tr>\n</thead>\n<tbody>\n\n<tr>\n<td align=\"left\"><code>**</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">匹配 0 個或多個路徑段</nt-wrapper><nt-wrapper translation-origin=\"off\">Matches 0 or more path segments</nt-wrapper></td>\n</tr>\n\n<tr>\n<td align=\"left\"><code>*</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">匹配不包括 <code>/</code> 的 0 個或多個字元</nt-wrapper><nt-wrapper translation-origin=\"off\">Matches 0 or more characters excluding <code>/</code></nt-wrapper></td>\n</tr>\n\n<tr>\n<td align=\"left\"><code>?</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">正好匹配不包括 <code>/</code> 的一個字元</nt-wrapper><nt-wrapper translation-origin=\"off\">Matches exactly one character excluding <code>/</code></nt-wrapper></td>\n</tr>\n\n<tr>\n<td align=\"left\"><nt-wrapper translation-result=\"on\"><code>!</code> 字首</nt-wrapper><nt-wrapper translation-origin=\"off\"><code>!</code> prefix</nt-wrapper></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">將模式標記為負數，這意味著僅包含與模式不匹配的檔案</nt-wrapper><nt-wrapper translation-origin=\"off\">Marks the pattern as being negative, meaning that only files that don't match the pattern are included</nt-wrapper></td>\n</tr>\n\n</tbody>\n</table>\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\"><strong>*</strong>請注意，在內部 glob 到正則表示式的轉換中，正則表示式中某些具有特殊含義的字元不會被轉義，並且模式不會用 <code>^</code> / <code>$</code> 包裝。</p><p translation-origin=\"off\"><strong>*</strong> Pay attention that some characters with a special meaning in a regular expression are not escaped and also the pattern is not wrapped in <code>^</code>/<code>$</code> in the internal glob to regex conversion.</p>\n\n<ul>\n<li>\n<p translation-result=\"on\"><code>$</code> 是正則表示式中的一個特殊字元，它與字串的結尾匹配，在將 glob 模式轉換為正則表示式時不會自動轉義。如果你想從字面上匹配 <code>$</code> 字元，則必須自己對它進行轉譯（使用 <code>\\\\$</code>）。</p><p translation-origin=\"off\"><code>$</code> is a special character in regex that matches the end of the string and will not be automatically escaped when converting the glob pattern to a regular expression.\nIf you want to literally match the <code>$</code> character, you have to escape it yourself (with <code>\\\\$</code>).</p>\n\n<div class=\"alert is-important\">\n<p translation-result=\"on\">例如，glob 模式 <code>/foo/bar/$value</code> 會導致出現無法匹配的表示式，因為字串不可能在結尾後有任何字元。</p><p translation-origin=\"off\">For example, the glob pattern <code>/foo/bar/$value</code> results in an unmatchable expression, because it is impossible to have a string that has any characters after it has ended.</p>\n\n</div>\n</li>\n<li>\n<p translation-result=\"on\">將模式轉換為正則表示式時，不會自動用 <code>^</code> 和 <code>$</code> 包裝。因此，這些模式將部分匹配請求 URL。如果你希望你的模式匹配 URL 的開頭和/或結尾，可以自己新增 <code>^</code> / <code>$</code>。</p><p translation-origin=\"off\">The pattern will not be automatically wrapped in <code>^</code> and <code>$</code> when converting it to a regular expression.\nTherefore, the patterns will partially match the request URLs.\nIf you want your patterns to match the beginning and/or end of URLs, you can add <code>^</code>/<code>$</code> yourself.</p>\n\n<div class=\"alert is-important\">\n<p translation-result=\"on\">例如，glob 模式 <code>/foo/bar/*.js</code> 將匹配 <code>.js</code> 和 <code>.json</code> 檔案。如果你想僅匹配 <code>.js</code> 檔案，請使用 <code>/foo/bar/*.js$</code>。</p><p translation-origin=\"off\">For example, the glob pattern <code>/foo/bar/*.js</code> will match both <code>.js</code> and <code>.json</code> files.\nIf you want to only match <code>.js</code> files, use <code>/foo/bar/*.js$</code>.</p>\n\n</div>\n</li>\n</ul>\n</div>\n<p translation-result=\"on\">範例模式：</p><p translation-origin=\"off\">Example patterns:</p>\n\n<table>\n<thead>\n<tr>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">模式</nt-wrapper><nt-wrapper translation-origin=\"off\">Patterns</nt-wrapper></th>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">詳情</nt-wrapper><nt-wrapper translation-origin=\"off\">Details</nt-wrapper></th>\n</tr>\n</thead>\n<tbody>\n\n<tr>\n<td align=\"left\"><code>/**/*.html</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">指定所有 HTML 檔案</nt-wrapper><nt-wrapper translation-origin=\"off\">Specifies all HTML files</nt-wrapper></td>\n</tr>\n\n<tr>\n<td align=\"left\"><code>/*.html</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">僅指定根中的 HTML 檔案</nt-wrapper><nt-wrapper translation-origin=\"off\">Specifies only HTML files in the root</nt-wrapper></td>\n</tr>\n\n<tr>\n<td align=\"left\"><code>!/**/*.map</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">排除所有源對映</nt-wrapper><nt-wrapper translation-origin=\"off\">Exclude all sourcemaps</nt-wrapper></td>\n</tr>\n\n</tbody>\n</table>\n<h2 id=\"service-worker-configuration-properties\" translation-result=\"on\">Service Worker 配置屬性<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-config#service-worker-configuration-properties\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Service worker configuration properties<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-config#service-worker-configuration-properties\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">下面講講配置檔案中的每個屬性。</p><p translation-origin=\"off\">The following sections describe each property of the configuration file.</p>\n\n<h3 id=\"appdata\"><code>appData</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-config#appdata\"><i class=\"material-icons\">link</i></a></h3>\n<p translation-result=\"on\">本節允許你傳遞用來描述這個特定應用版本的任何資料。<code><a href=\"api/service-worker/SwUpdate\" class=\"code-anchor\">SwUpdate</a></code> 服務會在更新通知中包含這些資料。許多應用會使用本節來提供 UI 彈窗時要顯示的附加資訊，以通知使用者有可用的更新。</p><p translation-origin=\"off\">This section enables you to pass any data you want that describes this particular version of the application.\nThe <code><a href=\"api/service-worker/SwUpdate\" class=\"code-anchor\">SwUpdate</a></code> service includes that data in the update notifications.\nMany applications use this section to provide additional information for the display of UI popups, notifying users of the available update.</p>\n\n<p><a id=\"index-file\"></a></p>\n<h3 id=\"index\"><code>index</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-config#index\"><i class=\"material-icons\">link</i></a></h3>\n<p translation-result=\"on\">指定用來充當索引頁的檔案以滿足導航請求。通常是 <code>/index.html</code>。</p><p translation-origin=\"off\">Specifies the file that serves as the index page to satisfy navigation requests.\nUsually this is <code>/index.html</code>.</p>\n\n<h3 id=\"assetgroups\"><code>assetGroups</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-config#assetgroups\"><i class=\"material-icons\">link</i></a></h3>\n<p translation-result=\"on\"><em>資產（Assets）</em>是與應用一起更新的應用版本的一部分。它們可以包含從頁面的同源地址載入的資源以及從 CDN 和其它外部 URL 載入的第三方資源。由於在建構時可能沒法提前知道所有這些外部 URL，因此也可以指定 URL 的模式。</p><p translation-origin=\"off\"><em>Assets</em> are resources that are part of the application version that update along with the application.\nThey can include resources loaded from the page's origin as well as third-party resources loaded from CDNs and other external URLs.\nAs not all such external URLs might be known at build time, URL patterns can be matched.</p>\n\n<div class=\"alert is-important\">\n<p translation-result=\"on\">  對於要處理不同來源資源的 Service Worker，請確保每個源伺服器都正確配置了 <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS\">CORS</a>。</p><p translation-origin=\"off\">  For the service worker to handle resources that are loaded from different origins, make sure that <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS\">CORS</a> is correctly configured on each origin's server.</p>\n\n</div>\n<p translation-result=\"on\">該欄位包含一個資產組的陣列，每個資產組中會定義一組資產資源和它們的快取策略。</p><p translation-origin=\"off\">This field contains an array of asset groups, each of which defines a set of asset resources and the policy by which they are cached.</p>\n\n<code-example format=\"json\" language=\"json\">\n\n{\n  \"assetGroups\": [\n    {\n      …\n    },\n    {\n      …\n    }\n  ]\n}\n\n</code-example>\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\">當 ServiceWorker 處理請求時，它將按照資源組在 <code>ngsw-config.json</code> 中出現的順序對其進行檢查。與所請求的資源匹配的第一個資源組將處理該請求。</p><p translation-origin=\"off\">When the ServiceWorker handles a request, it checks asset groups in the order in which they appear in <code>ngsw-config.json</code>.\nThe first asset group that matches the requested resource handles the request.</p>\n\n<p translation-result=\"on\">建議將更具體的資源組放在列表中較高的位置。比如，與 <code>/foo.js</code> 匹配的資源組應出現在與 <code>*.js</code> 匹配的資源組之前。</p><p translation-origin=\"off\">It is recommended that you put the more specific asset groups higher in the list.\nFor example, an asset group that matches <code>/foo.js</code> should appear before one that matches <code>*.js</code>.</p>\n\n</div>\n<p translation-result=\"on\">每個資產組都會指定一組資源和一個管理它們的策略。此策略用來決定何時獲取資源以及當檢測到更改時該怎麼做。</p><p translation-origin=\"off\">Each asset group specifies both a group of resources and a policy that governs them.\nThis policy determines when the resources are fetched and what happens when changes are detected.</p>\n\n<p translation-result=\"on\">這些資產組會遵循下面的 Typescript 介面：</p><p translation-origin=\"off\">Asset groups follow the Typescript interface shown here:</p>\n\n<code-example format=\"typescript\" language=\"typescript\">\n\ninterface AssetGroup {\n  name: string;\n  installMode?: 'prefetch' | 'lazy';\n  updateMode?: 'prefetch' | 'lazy';\n  resources: {\n    files?: string[];\n    urls?: string[];\n  };\n  cacheQueryOptions?: {\n    ignoreSearch?: boolean;\n  };\n}\n\n</code-example>\n<p translation-result=\"on\">每個 <code>AssetGroup</code> 都由以下資產組屬性定義。</p><p translation-origin=\"off\">Each <code>AssetGroup</code> is defined by the following asset group properties.</p>\n\n<h4 id=\"name\"><code>name</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-config#name\"><i class=\"material-icons\">link</i></a></h4>\n<p translation-result=\"on\"><code>name</code> 是強制性的。它用來標識該配置檔案版本中這個特定的資產組。</p><p translation-origin=\"off\">A <code>name</code> is mandatory.\nIt identifies this particular group of assets between versions of the configuration.</p>\n\n<h4 id=\"installmode\"><code>installMode</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-config#installmode\"><i class=\"material-icons\">link</i></a></h4>\n<p translation-result=\"on\"><code>installMode</code> 決定了這些資源最初的快取方式。<code>installMode</code> 可以取如下兩個值之一：</p><p translation-origin=\"off\">The <code>installMode</code> determines how these resources are initially cached.\nThe <code>installMode</code> can be either of two values:</p>\n\n<table>\n<thead>\n<tr>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">值</nt-wrapper><nt-wrapper translation-origin=\"off\">Values</nt-wrapper></th>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">詳情</nt-wrapper><nt-wrapper translation-origin=\"off\">Details</nt-wrapper></th>\n</tr>\n</thead>\n<tbody>\n\n<tr>\n<td align=\"left\"><code>prefetch</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">要求 Angular Service Worker 在快取當前版本的應用時要獲取每一個列出的資源。這是個頻寬密集型的模式，但可以確保這些資源在請求時可用，即使瀏覽器正處於離線狀態。</nt-wrapper><nt-wrapper translation-origin=\"off\">Tells the Angular service worker to fetch every single listed resource while it's caching the current version of the application. This is bandwidth-intensive but ensures resources are available whenever they're requested, even if the browser is currently offline.</nt-wrapper></td>\n</tr>\n\n<tr>\n<td align=\"left\"><code>lazy</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">不會預先快取任何資源。相反，Angular Service Worker 只會快取它收到請求的資源。這是一種按需快取模式。永遠不會請求的資源也永遠不會被快取。這對於像為不同解析度提供的圖片之類別的資源很有用，那樣 Service Worker 就只會為特定的螢幕和裝置方向快取正確的資源。</nt-wrapper><nt-wrapper translation-origin=\"off\">Does not cache any of the resources up front. Instead, the Angular service worker only caches resources for which it receives requests. This is an on-demand caching mode. Resources that are never requested are not cached. This is useful for things like images at different resolutions, so the service worker only caches the correct assets for the particular screen and orientation.</nt-wrapper></td>\n</tr>\n\n</tbody>\n</table>\n<p translation-result=\"on\">預設為 <code>prefetch</code>。</p><p translation-origin=\"off\">Defaults to <code>prefetch</code>.</p>\n\n<h4 id=\"updatemode\"><code>updateMode</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-config#updatemode\"><i class=\"material-icons\">link</i></a></h4>\n<p translation-result=\"on\">對於已經存在於快取中的資源，<code>updateMode</code> 會決定在發現了新版本應用後的快取行為。\n自上一版本以來更改過的所有組中資源都會根據 <code>updateMode</code> 進行更新。</p><p translation-result=\"on\">對於已經存在於快取中的資源，<code>updateMode</code> 會決定在發現了新版本應用後的快取行為。自上一版本以來更改過的所有組中資源都會根據 <code>updateMode</code> 進行更新。</p><p translation-origin=\"off\">For resources already in the cache, the <code>updateMode</code> determines the caching behavior when a new version of the application is discovered.\nAny resources in the group that have changed since the previous version are updated in accordance with <code>updateMode</code>.</p>\n\n\n<table>\n<thead>\n<tr>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">值</nt-wrapper><nt-wrapper translation-origin=\"off\">Values</nt-wrapper></th>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">詳情</nt-wrapper><nt-wrapper translation-origin=\"off\">Details</nt-wrapper></th>\n</tr>\n</thead>\n<tbody>\n\n<tr>\n<td align=\"left\"><code>prefetch</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">要求 Service Worker 立即下載並快取更新過的資源。</nt-wrapper><nt-wrapper translation-origin=\"off\">Tells the service worker to download and cache the changed resources immediately.</nt-wrapper></td>\n</tr>\n\n<tr>\n<td align=\"left\"><code>lazy</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\"><code>lazy</code> 要求 Service Worker 不要快取這些資源，而是先把它們看作未被請求的，等到它們再次被請求時才進行更新。<code>lazy</code> 這個 <code>updateMode</code> 只有在 <code>installMode</code> 也同樣是 <code>lazy</code> 時才有效。</nt-wrapper><nt-wrapper translation-origin=\"off\">Tells the service worker to not cache those resources. Instead, it treats them as unrequested and waits until they're requested again before updating them. An <code>updateMode</code> of <code>lazy</code> is only valid if the <code>installMode</code> is also <code>lazy</code>.</nt-wrapper></td>\n</tr>\n\n</tbody>\n</table>\n<p translation-result=\"on\">其預設值為 <code>installMode</code> 的值。</p><p translation-origin=\"off\">Defaults to the value <code>installMode</code> is set to.</p>\n\n<h4 id=\"resources\"><code>resources</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-config#resources\"><i class=\"material-icons\">link</i></a></h4>\n<p translation-result=\"on\">本節描述要快取的資源，分為如下幾組：</p><p translation-origin=\"off\">This section describes the resources to cache, broken up into the following groups:</p>\n\n<table>\n<thead>\n<tr>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">資源組</nt-wrapper><nt-wrapper translation-origin=\"off\">Resource groups</nt-wrapper></th>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">詳情</nt-wrapper><nt-wrapper translation-origin=\"off\">Details</nt-wrapper></th>\n</tr>\n</thead>\n<tbody>\n\n<tr>\n<td align=\"left\"><code>files</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\"><code>files</code> 列出了與 <code>dist</code> 目錄中的檔案相匹配的模式。它們可以是單個檔案也可以是能匹配多個檔案的類似 glob 的模式。</nt-wrapper><nt-wrapper translation-origin=\"off\">Lists patterns that match files in the distribution directory. These can be single files or glob-like patterns that match a number of files.</nt-wrapper></td>\n</tr>\n\n<tr>\n<td align=\"left\"><code>urls</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">包括要在執行時進行匹配的 URL 和 URL 模式。這些資源不是直接獲取的，也沒有內容雜湊，但它們會根據 HTTP 標頭進行快取。這對於像 Google Fonts 服務這樣的 CDN 非常有用。<br> <strong>（不支援 glob 的逆模式，<code>?</code> 將會按字面匹配；也就是說它不會匹配除了 <code>?</code> 之外的任何字元。）</strong></nt-wrapper><nt-wrapper translation-origin=\"off\">Includes both URLs and URL patterns that are matched at runtime. These resources are not fetched directly and do not have content hashes, but they are cached according to their HTTP headers. This is most useful for CDNs such as the Google Fonts service. <br>  <em>(Negative glob patterns are not supported and <code>?</code> will be matched literally; that is, it will not match any character other than <code>?</code>.)</em></nt-wrapper></td>\n</tr>\n\n</tbody>\n</table>\n<h4 id=\"cachequeryoptions\"><code>cacheQueryOptions</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-config#cachequeryoptions\"><i class=\"material-icons\">link</i></a></h4>\n<p translation-result=\"on\">這些選項用來修改對請求進行匹配的行為。它們會傳給瀏覽器的 <code>Cache#match</code> 函式。詳情參閱 <a href=\"https://developer.mozilla.org/docs/Web/API/Cache/match\">MDN</a>。目前，只支援下列選項：</p><p translation-origin=\"off\">These options are used to modify the matching behavior of requests.\nThey are passed to the browsers <code>Cache#match</code> function.\nSee <a href=\"https://developer.mozilla.org/docs/Web/API/Cache/match\">MDN</a> for details.\nCurrently, only the following options are supported:</p>\n\n<table>\n<thead>\n<tr>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">選項</nt-wrapper><nt-wrapper translation-origin=\"off\">Options</nt-wrapper></th>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">詳情</nt-wrapper><nt-wrapper translation-origin=\"off\">Details</nt-wrapper></th>\n</tr>\n</thead>\n<tbody>\n\n<tr>\n<td align=\"left\"><code>ignoreSearch</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">忽略查詢引數。預設為 <code>false</code>。</nt-wrapper><nt-wrapper translation-origin=\"off\">Ignore query parameters. Defaults to <code>false</code>.</nt-wrapper></td>\n</tr>\n\n</tbody>\n</table>\n<h3 id=\"datagroups\"><code>dataGroups</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-config#datagroups\"><i class=\"material-icons\">link</i></a></h3>\n<p translation-result=\"on\">與這些資產性（asset）資源不同，資料請求不會隨應用一起版本化。它們會根據手動配置的策略進行快取，這些策略對 API 請求和所依賴的其它資料等情況會更有用。</p><p translation-origin=\"off\">Unlike asset resources, data requests are not versioned along with the application.\nThey're cached according to manually-configured policies that are more useful for situations such as API requests and other data dependencies.</p>\n\n<p translation-result=\"on\">本欄位包含一個數據組的陣列，其中的每一個條目都定義了一組資料資源以及對它們的快取策略。</p><p translation-origin=\"off\">This field contains an array of data groups, each of which defines a set of data resources and the policy by which they are cached.</p>\n\n<code-example format=\"json\" language=\"json\">\n\n{\n  \"dataGroups\": [\n    {\n      …\n    },\n    {\n      …\n    }\n  ]\n}\n\n</code-example>\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\">當 ServiceWorker 處理請求時，它將按照資料組在 <code>ngsw-config.json</code> 中出現的順序對其進行檢查。與所請求的資源匹配的第一個資料組將處理該請求。</p><p translation-origin=\"off\">When the ServiceWorker handles a request, it checks data groups in the order in which they appear in <code>ngsw-config.json</code>.\nThe first data group that matches the requested resource handles the request.</p>\n\n<p translation-result=\"on\">建議將更具體的資料組放在列表中較高的位置。比如，與 <code>/api/foo.json</code> 匹配的資料組應出現在與 <code>/api/*.json</code> 匹配的資料組之前。</p><p translation-origin=\"off\">It is recommended that you put the more specific data groups higher in the list.\nFor example, a data group that matches <code>/api/foo.json</code> should appear before one that matches <code>/api/*.json</code>.</p>\n\n</div>\n<p translation-result=\"on\">資料組遵循下列 TypeScript 介面：</p><p translation-origin=\"off\">Data groups follow this Typescript interface:</p>\n\n<code-example format=\"typescript\" language=\"typescript\">\n\nexport interface DataGroup {\n  name: string;\n  urls: string[];\n  version?: number;\n  cacheConfig: {\n    maxSize: number;\n    maxAge: string;\n    timeout?: string;\n    strategy?: 'freshness' | 'performance';\n  };\n  cacheQueryOptions?: {\n    ignoreSearch?: boolean;\n  };\n}\n\n</code-example>\n<p translation-result=\"on\">每個 <code>DataGroup</code> 都由以下資料組屬性定義。</p><p translation-origin=\"off\">Each <code>DataGroup</code> is defined by the following data group properties.</p>\n\n<h4 id=\"name-1\"><code>name</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-config#name-1\"><i class=\"material-icons\">link</i></a></h4>\n<p translation-result=\"on\">和 <code>assetGroups</code> 下類似，每個資料組也都有一個 <code>name</code>，用作它的唯一標識。</p><p translation-origin=\"off\">Similar to <code>assetGroups</code>, every data group has a <code>name</code> which uniquely identifies it.</p>\n\n<h4 id=\"urls\"><code>urls</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-config#urls\"><i class=\"material-icons\">link</i></a></h4>\n<p translation-result=\"on\">一個 URL 模式的列表。匹配這些模式的 URL 將會根據該資料組的策略進行快取。只有非修改型的請求（GET 和 HEAD）才會進行快取。</p><p translation-origin=\"off\">A list of URL patterns.\nURLs that match these patterns are cached according to this data group's policy.\nOnly non-mutating requests (GET and HEAD) are cached.</p>\n\n<ul>\n<li>\n<p translation-result=\"on\">（不支援 glob 中的否定模式）。</p><p translation-origin=\"off\">Negative glob patterns are not supported</p>\n\n</li>\n<li>\n<p translation-result=\"on\"><code>?</code> 只做字面匹配，也就是說，它<em>只</em>能匹配 <code>?</code> 字元。</p><p translation-origin=\"off\"><code>?</code> is matched literally; that is, it matches <em>only</em> the character <code>?</code></p>\n\n</li>\n</ul>\n<h4 id=\"version\"><code>version</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-config#version\"><i class=\"material-icons\">link</i></a></h4>\n<p translation-result=\"on\">API 有時可能會以不向後相容的方式更改格式。新版本的應用可能與舊的 API 格式不相容，因此也就與該 API 中目前已快取的資源不相容。</p><p translation-origin=\"off\">Occasionally APIs change formats in a way that is not backward-compatible.\nA new version of the application might not be compatible with the old API format and thus might not be compatible with existing cached resources from that API.</p>\n\n<p translation-result=\"on\"><code>version</code> 提供了一種機制，用於指出這些被快取的資源已經透過不向後相容的方式進行了更新，並且舊的快取條目（即來自以前版本的快取條目）應該被丟棄。</p><p translation-origin=\"off\"><code>version</code> provides a mechanism to indicate that the resources being cached have been updated in a backwards-incompatible way, and that the old cache entries —those from previous versions— should be discarded.</p>\n\n<p translation-result=\"on\"><code>version</code> 是個整型欄位，預設為 <code>1</code>。</p><p translation-origin=\"off\"><code>version</code> is an integer field and defaults to <code>1</code>.</p>\n\n<h4 id=\"cacheconfig\"><code>cacheConfig</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-config#cacheconfig\"><i class=\"material-icons\">link</i></a></h4>\n<p translation-result=\"on\">本節定義了對匹配上的請求進行快取時的策略。</p><p translation-origin=\"off\">The following properties define the policy by which matching requests are cached.</p>\n\n<h5 id=\"maxsize\"><code>maxSize</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-config#maxsize\"><i class=\"material-icons\">link</i></a></h5>\n<p translation-result=\"on\"><strong>必要</strong></p><p translation-origin=\"off\"><strong>Required</strong></p>\n\n<p translation-result=\"on\">快取的最大條目數或響應數。開放式快取可以無限增長，並最終超過儲存配額，建議適時清理。</p><p translation-origin=\"off\">The maximum number of entries, or responses, in the cache.\nOpen-ended caches can grow in unbounded ways and eventually exceed storage quotas, calling for eviction.</p>\n\n<h5 id=\"maxage\"><code>maxAge</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-config#maxage\"><i class=\"material-icons\">link</i></a></h5>\n<p translation-result=\"on\"><strong>必要</strong></p><p translation-origin=\"off\"><strong>Required</strong></p>\n\n<p translation-result=\"on\">（必需）<code>maxAge</code> 引數表示在響應因失效而要清除之前允許在快取中留存的時間。<code>maxAge</code> 是一個表示持續時間的字串，可使用以下單位作為字尾：</p><p translation-origin=\"off\">The <code>maxAge</code> parameter indicates how long responses are allowed to remain in the cache before being considered invalid and evicted.\n<code>maxAge</code> is a duration string, using the following unit suffixes:</p>\n\n<table>\n<thead>\n<tr>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">字尾</nt-wrapper><nt-wrapper translation-origin=\"off\">Suffixes</nt-wrapper></th>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">詳情</nt-wrapper><nt-wrapper translation-origin=\"off\">Details</nt-wrapper></th>\n</tr>\n</thead>\n<tbody>\n\n<tr>\n<td align=\"left\"><code>d</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">天</nt-wrapper><nt-wrapper translation-origin=\"off\">Days</nt-wrapper></td>\n</tr>\n\n<tr>\n<td align=\"left\"><code>h</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">小時</nt-wrapper><nt-wrapper translation-origin=\"off\">Hours</nt-wrapper></td>\n</tr>\n\n<tr>\n<td align=\"left\"><code>m</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">分鐘</nt-wrapper><nt-wrapper translation-origin=\"off\">Minutes</nt-wrapper></td>\n</tr>\n\n<tr>\n<td align=\"left\"><code>s</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">秒</nt-wrapper><nt-wrapper translation-origin=\"off\">Seconds</nt-wrapper></td>\n</tr>\n\n<tr>\n<td align=\"left\"><code>u</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">毫秒</nt-wrapper><nt-wrapper translation-origin=\"off\">Milliseconds</nt-wrapper></td>\n</tr>\n\n</tbody>\n</table>\n<p translation-result=\"on\">比如，字串 <code>3d12h</code> 規定此內容最多快取三天半。</p><p translation-origin=\"off\">For example, the string <code>3d12h</code> caches content for up to three and a half days.</p>\n\n<h5 id=\"timeout\"><code>timeout</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-config#timeout\"><i class=\"material-icons\">link</i></a></h5>\n<p translation-result=\"on\">這個表示持續時間的字串用於指定網路超時時間。\n如果配置了網路超時時間，Angular Service Worker 就會先等待這麼長時間再使用快取。<code>timeout</code> 是一個表示持續時間的字串，使用下列字尾單位：</p><p translation-result=\"on\">這個表示持續時間的字串用於指定網路超時時間。如果配置了網路超時時間，Angular Service Worker 就會先等待這麼長時間再使用快取。<code>timeout</code> 是一個表示持續時間的字串，使用下列字尾單位：</p><p translation-origin=\"off\">This duration string specifies the network timeout.\nThe network timeout is how long the Angular service worker waits for the network to respond before using a cached response, if configured to do so.\n<code>timeout</code> is a duration string, using the following unit suffixes:</p>\n\n\n<table>\n<thead>\n<tr>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">字尾</nt-wrapper><nt-wrapper translation-origin=\"off\">Suffixes</nt-wrapper></th>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">詳情</nt-wrapper><nt-wrapper translation-origin=\"off\">Details</nt-wrapper></th>\n</tr>\n</thead>\n<tbody>\n\n<tr>\n<td align=\"left\"><code>d</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">天</nt-wrapper><nt-wrapper translation-origin=\"off\">Days</nt-wrapper></td>\n</tr>\n\n<tr>\n<td align=\"left\"><code>h</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">小時</nt-wrapper><nt-wrapper translation-origin=\"off\">Hours</nt-wrapper></td>\n</tr>\n\n<tr>\n<td align=\"left\"><code>m</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">分鐘</nt-wrapper><nt-wrapper translation-origin=\"off\">Minutes</nt-wrapper></td>\n</tr>\n\n<tr>\n<td align=\"left\"><code>s</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">秒</nt-wrapper><nt-wrapper translation-origin=\"off\">Seconds</nt-wrapper></td>\n</tr>\n\n<tr>\n<td align=\"left\"><code>u</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">毫秒</nt-wrapper><nt-wrapper translation-origin=\"off\">Milliseconds</nt-wrapper></td>\n</tr>\n\n</tbody>\n</table>\n<p translation-result=\"on\">比如，字串 <code>5s30u</code> 將會被翻譯成 5 秒零 30 毫秒的網路超時。</p><p translation-origin=\"off\">For example, the string <code>5s30u</code> translates to five seconds and 30 milliseconds of network timeout.</p>\n\n<h5 id=\"strategy\"><code>strategy</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-config#strategy\"><i class=\"material-icons\">link</i></a></h5>\n<p translation-result=\"on\">Angular Service Worker 可以使用兩種快取策略之一來獲取資料資源。</p><p translation-origin=\"off\">The Angular service worker can use either of two caching strategies for data resources.</p>\n\n<table>\n<thead>\n<tr>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">快取策略</nt-wrapper><nt-wrapper translation-origin=\"off\">Caching strategies</nt-wrapper></th>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">詳情</nt-wrapper><nt-wrapper translation-origin=\"off\">Details</nt-wrapper></th>\n</tr>\n</thead>\n<tbody>\n\n<tr>\n<td align=\"left\"><code>performance</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\"><code>performance</code>，預設值，為儘快給出響應而最佳化。如果快取中存在某個資源，則使用這個快取版本，而不再發起網路請求。它允許資源有一定的陳舊性（取決於 <code>maxAge</code>）以換取更好的效能。適用於那些不經常改變的資源，比如使用者頭像。</nt-wrapper><nt-wrapper translation-origin=\"off\">The default, optimizes for responses that are as fast as possible. If a resource exists in the cache, the cached version is used, and no network request is made. This allows for some staleness, depending on the <code>maxAge</code>, in exchange for better performance. This is suitable for resources that don't change often; for example, user avatar images.</nt-wrapper></td>\n</tr>\n\n<tr>\n<td align=\"left\"><code>freshness</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">為資料的即時性而最佳化，優先從網路獲取請求的資料。只有當網路超時時，請求才會根據 <code>timeout</code> 的設定回退到快取中。這對於那些頻繁變化的資源很有用，比如賬戶餘額。</nt-wrapper><nt-wrapper translation-origin=\"off\">Optimizes for currency of data, preferentially fetching requested data from the network. Only if the network times out, according to <code>timeout</code>, does the request fall back to the cache. This is useful for resources that change frequently; for example, account balances.</nt-wrapper></td>\n</tr>\n\n</tbody>\n</table>\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\">你還可以模擬第三種策略 <a href=\"https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/#stale-while-revalidate\">staleWhileRevalidate</a>，它會返回快取的資料（如果可用），但是也會在後台從網路上獲取新資料，以供下次使用。要使用本策略，請在 <code>cacheConfig</code> 中把 <code>strategy</code> 設定為 <code>freshness</code>，並且把 <code>timeout</code> 設定為 <code>0u</code>。</p><p translation-origin=\"off\">You can also emulate a third strategy, <a href=\"https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/#stale-while-revalidate\">staleWhileRevalidate</a>, which returns cached data if it is available, but also fetches fresh data from the network in the background for next time.\nTo use this strategy set <code>strategy</code> to <code>freshness</code> and <code>timeout</code> to <code>0u</code> in <code>cacheConfig</code>.</p>\n\n<p translation-result=\"on\">本質上說，它會做如下工作：</p><p translation-origin=\"off\">This essentially does the following:</p>\n\n<ol>\n<li>\n<p translation-result=\"on\">首先嚐試從網路上獲取。</p><p translation-origin=\"off\">Try to fetch from the network first.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">如果網路請求沒有立刻完成（也就是 0 ms 內），就忽略快取有效期，並用快取的值做為後備。</p><p translation-origin=\"off\">If the network request does not complete immediately, that is after a timeout of 0&nbsp;ms, ignore the cache age and fall back to the cached value.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">一旦網路請求完成，就更新快取，以供將來的請求使用。</p><p translation-origin=\"off\">Once the network request completes, update the cache for future requests.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">如果指定的資源在快取中不存在，總是等待網路請求。</p><p translation-origin=\"off\">If the resource does not exist in the cache, wait for the network request anyway.</p>\n\n</li>\n</ol>\n</div>\n<h5 id=\"cacheopaqueresponses\"><code>cacheOpaqueResponses</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-config#cacheopaqueresponses\"><i class=\"material-icons\">link</i></a></h5>\n<p translation-result=\"on\">Angular 服務工作者是否應該快取不透明的響應。</p><p translation-origin=\"off\">Whether the Angular service worker should cache opaque responses or not.</p>\n\n<p translation-result=\"on\">如果未指定，則預設值取決於資料組的配置策略：</p><p translation-origin=\"off\">If not specified, the default value depends on the data group's configured strategy:</p>\n\n<table>\n<thead>\n<tr>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">策略</nt-wrapper><nt-wrapper translation-origin=\"off\">Strategies</nt-wrapper></th>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">詳情</nt-wrapper><nt-wrapper translation-origin=\"off\">Details</nt-wrapper></th>\n</tr>\n</thead>\n<tbody>\n\n<tr>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">使用 <code>freshness</code> 策略的組</nt-wrapper><nt-wrapper translation-origin=\"off\">Groups with the <code>freshness</code> strategy</nt-wrapper></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">預設值為 <code>true</code>，Service Worker 會快取不透明響應。這些組每次都會重新請求資料，只有在離線或在慢速網路上時才會回到快取響應。因此，服務工作者是否快取錯誤響應是無關緊要的。</nt-wrapper><nt-wrapper translation-origin=\"off\">The default value is <code>true</code> and the service worker caches opaque responses. These groups will request the data every time and only fall back to the cached response when offline or on a slow network. Therefore, it doesn't matter if the service worker caches an error response.</nt-wrapper></td>\n</tr>\n\n<tr>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">具有 <code>performance</code> 策略的組</nt-wrapper><nt-wrapper translation-origin=\"off\">Groups with the <code>performance</code> strategy</nt-wrapper></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">預設值為 <code>false</code>，Service Worker 不快取不透明響應）。這些組將繼續返回快取響應，直到 <code>maxAge</code> 過期，即使錯誤是由於臨時網路或伺服器問題造成的。因此，服務工作者快取錯誤響應將是有問題的。</nt-wrapper><nt-wrapper translation-origin=\"off\">The default value is <code>false</code> and the service worker doesn't cache opaque responses. These groups would continue to return a cached response until <code>maxAge</code> expires, even if the error was due to a temporary network or server issue. Therefore, it would be problematic for the service worker to cache an error response.</nt-wrapper></td>\n</tr>\n\n</tbody>\n</table>\n<div class=\"callout is-important\">\n<header ng-should-translate=\"\" translation-result=\"on\">評論不透明的響應</header><header ng-should-translate=\"\" translation-origin=\"off\">Comment on opaque responses</header>\n\n<p translation-result=\"on\">如果你不熟悉，<a href=\"https://fetch.spec.whatwg.org#concept-filtered-response-opaque\">不透明響應</a>是請求不同來源的不返回 CORS 標頭的資源時返回的一種特殊型別的響應。不透明響應的特性之一是不允許服務工作者讀取其狀態，這意味著它無法檢查請求是否成功。有關更多詳細資訊，請參閱<a href=\"https://developers.google.com/web/updates/2015/03/introduction-to-fetch#response_types\">fetch()</a>介紹。</p><p translation-origin=\"off\">In case you are not familiar, an <a href=\"https://fetch.spec.whatwg.org#concept-filtered-response-opaque\">opaque response</a> is a special type of response returned when requesting a resource that is on a different origin which doesn't return CORS headers.\nOne of the characteristics of an opaque response is that the service worker is not allowed to read its status, meaning it can't check if the request was successful or not.\nSee <a href=\"https://developers.google.com/web/updates/2015/03/introduction-to-fetch#response_types\">Introduction to fetch()</a> for more details.</p>\n\n<p translation-result=\"on\">如果你無法實現 CORS（例如，如果你不控制來源），更願意對會導致不透明響應的資源使用 <code>freshness</code> 策略。</p><p translation-origin=\"off\">If you are not able to implement CORS —for example, if you don't control the origin— prefer using the <code>freshness</code> strategy for resources that result in opaque responses.</p>\n\n</div>\n<h4 id=\"cachequeryoptions-1\"><code>cacheQueryOptions</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-config#cachequeryoptions-1\"><i class=\"material-icons\">link</i></a></h4>\n<p translation-result=\"on\">詳情參閱 <a href=\"guide/service-worker-config#assetgroups\">assetGroups</a>。</p><p translation-origin=\"off\">See <a href=\"guide/service-worker-config#assetgroups\">assetGroups</a> for details.</p>\n\n<h3 id=\"navigationurls\"><code>navigationUrls</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-config#navigationurls\"><i class=\"material-icons\">link</i></a></h3>\n<p translation-result=\"on\">這個可選節讓你可以指定一個自訂的 URL 列表，它們都會被重新導向到索引檔案。</p><p translation-origin=\"off\">This optional section enables you to specify a custom list of URLs that will be redirected to the index file.</p>\n\n<h4 id=\"handling-navigation-requests\">Handling navigation requests<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-config#handling-navigation-requests\"><i class=\"material-icons\">link</i></a></h4>\n<h3 id=\"處理導航請求\">處理導航請求<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-config#處理導航請求\"><i class=\"material-icons\">link</i></a></h3>\n<p translation-result=\"on\">對於沒有匹配上任何 <code>asset</code> 或 <code>data</code> 組的導航請求，ServiceWorker 會把它們重新導向到指定的<a href=\"guide/service-worker-config#index-file\">索引檔案</a>。下列請求將會視為導航請求：</p><p translation-origin=\"off\">The ServiceWorker redirects navigation requests that don't match any <code>asset</code> or <code>data</code> group to the specified <a href=\"guide/service-worker-config#index-file\">index file</a>.\nA request is considered to be a navigation request if:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\">它的<a href=\"https://developer.mozilla.org/docs/Web/API/Request/method\">方法</a>是 <code>GET</code></p><p translation-origin=\"off\">Its <a href=\"https://developer.mozilla.org/docs/Web/API/Request/method\">method</a> is <code>GET</code></p>\n\n</li>\n<li>\n<p translation-result=\"on\">它的<a href=\"https://developer.mozilla.org/docs/Web/API/Request/mode\">模式</a>是 <code>navigation</code></p><p translation-origin=\"off\">Its <a href=\"https://developer.mozilla.org/docs/Web/API/Request/mode\">mode</a> is <code>navigation</code></p>\n\n</li>\n<li>\n<p translation-result=\"on\">它接受 <code>text/html</code> 響應（根據 <code>Accept</code> 頭的值決定）</p><p translation-origin=\"off\">It accepts a <code>text/html</code> response as determined by the value of the <code>Accept</code> header</p>\n\n</li>\n<li>\n<p translation-result=\"on\">其 URL 符合以下條件：</p><p translation-origin=\"off\">Its URL matches the following criteria:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\">URL 的最後一段路徑中不能包含副檔名（比如 <code>.</code>）</p><p translation-origin=\"off\">The URL must not contain a file extension (that is, a <code>.</code>) in the last path segment</p>\n\n</li>\n<li>\n<p translation-result=\"on\">URL 中不能包含 <code>__</code></p><p translation-origin=\"off\">The URL must not contain <code>__</code></p>\n\n</li>\n</ul>\n</li>\n</ul>\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\">要配置瀏覽請求是否傳送到網路，請參閱 <a href=\"guide/service-worker-config#navigation-request-strategy\">navigationRequestStrategy</a> 部分。</p><p translation-origin=\"off\">To configure whether navigation requests are sent through to the network or not, see the <a href=\"guide/service-worker-config#navigation-request-strategy\">navigationRequestStrategy</a> section.</p>\n\n</div>\n<h4 id=\"matching-navigation-request-urls\">Matching navigation request URLs<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-config#matching-navigation-request-urls\"><i class=\"material-icons\">link</i></a></h4>\n<h3 id=\"匹配導航請求的-url\">匹配導航請求的 URL<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-config#匹配導航請求的-url\"><i class=\"material-icons\">link</i></a></h3>\n<p translation-result=\"on\">雖然這些預設條件在大多數情況下都挺好用，不過有時還是要配置一些不同的規則。比如，你可能希望忽略一些特定的路由（它們可能不是 Angular 應用的一部分），而是把它們透傳給伺服器。</p><p translation-origin=\"off\">While these default criteria are fine in most cases, it is sometimes desirable to configure different rules.\nFor example, you might want to ignore specific routes, such as those that are not part of the Angular app, and pass them through to the server.</p>\n\n<p translation-result=\"on\">該欄位包含一個將要在執行期間匹配的 URL 和 <a href=\"guide/service-worker-config#glob-patterns\">類似 glob 的</a> URL 模式。\n它既可以包含正向模式也可以包含反向模式（比如用 <code>!</code> 開頭的模式）。</p><p translation-origin=\"off\">This field contains an array of URLs and <a href=\"guide/service-worker-config#glob-patterns\">glob-like</a> URL patterns that are matched at runtime.\nIt can contain both negative patterns (that is, patterns starting with <code>!</code>) and non-negative patterns and URLs.</p>\n\n<p translation-result=\"on\">只有那些能匹配<strong>任意</strong>正向 URL 或 URL 模式並且<strong>不匹配任何一個</strong>反向模式的 URL 才會視為導航請求。當匹配時，這些 URL 查詢將會被忽略。</p><p translation-origin=\"off\">Only requests whose URLs match <em>any</em> of the non-negative URLs/patterns and <em>none</em> of the negative ones are considered navigation requests.\nThe URL query is ignored when matching.</p>\n\n<p translation-result=\"on\">如果省略了該欄位，它的預設值是：</p><p translation-origin=\"off\">If the field is omitted, it defaults to:</p>\n\n<code-example format=\"typescript\" language=\"typescript\">\n\n[\n  '/**',           // Include all URLs.\n  '!/**/*.*',      // Exclude URLs to files.\n  '!/**/*__*',     // Exclude URLs containing `__` in the last segment.\n  '!/**/*__*/**',  // Exclude URLs containing `__` in any other segment.\n]\n\n</code-example>\n<p><a id=\"navigation-request-strategy\"></a></p>\n<h3 id=\"navigationrequeststrategy\"><code>navigationRequestStrategy</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-config#navigationrequeststrategy\"><i class=\"material-icons\">link</i></a></h3>\n<p translation-result=\"on\">透過此可選屬性，你可以配置服務工作者如何處理導航請求：</p><p translation-origin=\"off\">This optional property enables you to configure how the service worker handles navigation requests:</p>\n\n<code-example format=\"json\" language=\"json\">\n\n{\n  \"navigationRequestStrategy\": \"freshness\"\n}\n\n</code-example>\n<table>\n<thead>\n<tr>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">可能的值</nt-wrapper><nt-wrapper translation-origin=\"off\">Possible values</nt-wrapper></th>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">詳情</nt-wrapper><nt-wrapper translation-origin=\"off\">Details</nt-wrapper></th>\n</tr>\n</thead>\n<tbody>\n\n<tr>\n<td align=\"left\"><code>'performance'</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">預設設定。提供指定的<a href=\"guide/service-worker-config#index-file\">索引檔案</a>，它通常會被快取。</nt-wrapper><nt-wrapper translation-origin=\"off\">The default setting. Serves the specified <a href=\"guide/service-worker-config#index-file\">index file</a>, which is typically cached.</nt-wrapper></td>\n</tr>\n\n<tr>\n<td align=\"left\"><code>'freshness'</code></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">將請求透傳到網路，並在離線時回退到 <code>performance</code> 模式。當伺服器在用 HTTP 重新導向狀態碼 <code>3xx</code> 將導航請求重新導向到其他位置時，此值很有用。使用此值的原因包括：<ul> <li> 當應用尚未處理身份驗證時，重新導向到身份驗證網站。</li> <li> 重新導向特定的 URL，以免在網站重新設計後破壞現有的連結/書籤。</li> <li>  當頁面暫時關閉時，重新導向到其他網站，比如伺服器狀態頁。</li> </ul></nt-wrapper><nt-wrapper translation-origin=\"off\">Passes the requests through to the network and falls back to the <code>performance</code> behavior when offline. This value is useful when the server redirects the navigation requests elsewhere using a <code>3xx</code> HTTP redirect status code. Reasons for using this value include: <ul> <li> Redirecting to an authentication website when authentication is not handled by the application </li> <li> Redirecting specific URLs to avoid breaking existing links/bookmarks after a website redesign </li> <li> Redirecting to a different website, such as a server-status page, while a page is temporarily down </li> </ul></nt-wrapper></td>\n</tr>\n\n</tbody>\n</table>\n<div class=\"alert is-important\">\n<p translation-result=\"on\"><code>freshness</code> 策略通常會導致向伺服器傳送更多請求，這可能會增加響應延遲。建議你儘可能使用預設的效能策略。</p><p translation-origin=\"off\">The <code>freshness</code> strategy usually results in more requests sent to the server, which can increase response latency.\nIt is recommended that you use the default performance strategy whenever possible.</p>\n\n</div>\n<!-- links -->\n<!-- external links -->\n<!-- end links -->\n\n  <div class=\"reviewed\">最後複查時間：2/28/2022</div>\n</div>\n\n\n<!-- links to this doc:\n - guide/service-worker-devops\n - guide/service-worker-getting-started\n - guide/service-worker-intro\n-->\n<!-- links from this doc:\n - api/service-worker/SwUpdate\n - cli\n - guide/service-worker-config#appdata\n - guide/service-worker-config#assetgroups\n - guide/service-worker-config#cacheconfig\n - guide/service-worker-config#cacheopaqueresponses\n - guide/service-worker-config#cachequeryoptions\n - guide/service-worker-config#cachequeryoptions-1\n - guide/service-worker-config#datagroups\n - guide/service-worker-config#glob-patterns\n - guide/service-worker-config#handling-navigation-requests\n - guide/service-worker-config#index\n - guide/service-worker-config#index-file\n - guide/service-worker-config#installmode\n - guide/service-worker-config#matching-navigation-request-urls\n - guide/service-worker-config#maxage\n - guide/service-worker-config#maxsize\n - guide/service-worker-config#name\n - guide/service-worker-config#name-1\n - guide/service-worker-config#navigation-request-strategy\n - guide/service-worker-config#navigationrequeststrategy\n - guide/service-worker-config#navigationurls\n - guide/service-worker-config#prerequisites\n - guide/service-worker-config#resources\n - guide/service-worker-config#service-worker-configuration\n - guide/service-worker-config#service-worker-configuration-properties\n - guide/service-worker-config#service-worker-配置\n - guide/service-worker-config#service-worker-配置屬性\n - guide/service-worker-config#strategy\n - guide/service-worker-config#timeout\n - guide/service-worker-config#updatemode\n - guide/service-worker-config#urls\n - guide/service-worker-config#version\n - guide/service-worker-config#前提條件\n - guide/service-worker-config#匹配導航請求的-url\n - guide/service-worker-config#處理導航請求\n - guide/service-worker-devops\n - https://developer.chrome.com/docs/workbox/service-worker-overview/\n - https://developer.mozilla.org/docs/Web/API/Cache/match\n - https://developer.mozilla.org/docs/Web/API/Request/method\n - https://developer.mozilla.org/docs/Web/API/Request/mode\n - https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS\n - https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/#stale-while-revalidate\n - https://developers.google.com/web/updates/2015/03/introduction-to-fetch#response_types\n - https://fetch.spec.whatwg.org#concept-filtered-response-opaque\n - https://github.com/ng-docs/angular-cn/edit/cn/aio/content/guide/service-worker-config.md?message=docs%3A%20請簡述你的修改...\n-->"}
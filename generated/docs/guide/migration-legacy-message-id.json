{"id":"guide/migration-legacy-message-id","title":"Migrating legacy localization IDs","contents":"\n\n\n<div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/edit/cn/aio/content/guide/migration-legacy-message-id.md?message=docs%3A%20請簡述你的修改...\" aria-label=\"提供編輯建議\" title=\"提供編輯建議\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n</div>\n\n\n<div class=\"content\">\n  <h1 id=\"migrating-legacy-localization-ids\" translation-result=\"on\">遷移舊版本地化 ID<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-legacy-message-id#migrating-legacy-localization-ids\"><i class=\"material-icons\">link</i></a></h1><h1 translation-origin=\"off\">Migrating legacy localization IDs<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-legacy-message-id#migrating-legacy-localization-ids\"><i class=\"material-icons\">link</i></a></h1>\n\n<h2 id=\"why-this-migration-is-necessary\" translation-result=\"on\">為什麼需要進行遷移<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-legacy-message-id#why-this-migration-is-necessary\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Why this migration is necessary<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-legacy-message-id#why-this-migration-is-necessary\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">Angular 的翻譯體系會根據訊息 ID 與另一種語言的譯後訊息進行匹配。建立這些 ID 的方法之一是讓翻譯體系為你產生它們。以前，這些 ID 的格式在發生細微更改時（比如，加減空格）是不穩定的。而新格式會更加穩健。</p><p translation-origin=\"off\">The Angular translation system works by matching a message ID to a translated message in a different language.\nOne option for creating these IDs is to have the translation system generate them for you.\nPreviously, the format for these IDs are not stable when there are insignificant changes, such as to whitespace.\nThe new format is much more robust.</p>\n\n<p translation-result=\"on\">本主題描述瞭如何遷移舊的本地化 ID，來幫你提前適應完全停止支援舊格式的那一刻。</p><p translation-origin=\"off\">This topic describes how to migrate old localization IDs to help you future-proof your application in the event that the old format is removed.</p>\n\n<h2 id=\"what-this-migration-does\" translation-result=\"on\">此遷移的作用<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-legacy-message-id#what-this-migration-does\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">What this migration does<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-legacy-message-id#what-this-migration-does\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">Angular 11 版引入了一種用於產生本地化 ID 的新格式。這些新的 ID 比以前的舊格式更健壯。但是，在版本 11 之前建立的應用程式仍然將舊格式用作其 ID。</p><p translation-origin=\"off\">Angular version 11 introduced a new format for generating localization IDs.\nThese new IDs are more robust than the previous legacy format.\nHowever, applications created before version 11 still used the legacy format for their IDs.</p>\n\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\">你無需將自訂本地化 ID 遷移到新 ID。</p><p translation-origin=\"off\">You do not need to migrate custom localization IDs to new IDs.</p>\n\n</div>\n<p translation-result=\"on\">隨著 Angular 版本 12 的釋出，你現在可以使用工具將任何舊版的本地化 ID 遷移到基於最新演算法的 ID。</p><p translation-origin=\"off\">With the release of Angular version 12, you now have how tools available to help you migrate any legacy localization IDs to IDs that use the latest algorithms.</p>\n\n<p translation-result=\"on\">你有兩個用於遷移舊版 ID 的選項。第一種方法使用 Angular CLI 在你的應用程式中定位舊版 ID。第二種方法使用獨立指令碼 <code>localize-extract</code> 來定位舊版 ID。</p><p translation-origin=\"off\">You have two options for migrating legacy IDs.\nThe first method uses the Angular CLI to locate legacy IDs in your application.\nThe second method uses a standalone script, <code>localize-extract</code>, to locate the legacy IDs.</p>\n\n<h2 id=\"migrating-legacy-ids-using-the-cli\" translation-result=\"on\">使用 CLI 遷移舊版 ID<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-legacy-message-id#migrating-legacy-ids-using-the-cli\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Migrating legacy IDs using the CLI<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-legacy-message-id#migrating-legacy-ids-using-the-cli\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">要使用 CLI 遷移舊版本地化 ID，請執行以下操作：</p><p translation-origin=\"off\">To migrate legacy localization IDs using the CLI:</p>\n\n<ol>\n<li>\n<p translation-result=\"on\">執行 <code>ng extract-i18n</code> 命令。</p><p translation-origin=\"off\">Run the <code>ng extract-i18n</code> command.</p>\n\n<code-example format=\"shell\" language=\"shell\">\n\nng extract-i18n --format=legacy-migrate\n\n</code-example>\n<p translation-result=\"on\">執行此命令後，你將擁有一個遷移檔案 <code>messages.json</code>，其中包含舊版本地化 ID 與新版 ID 之間的對映，你可以用它來更新應用程式。</p><p translation-origin=\"off\">After running this command, you have a migration file, <code>messages.json</code>, containing a mapping between legacy localization IDs and new IDs that you can use to update your application.</p>\n\n</li>\n<li>\n<p translation-result=\"on\"><code>npx localize-migrate</code> 命令更新應用程式中的 ID。</p><p translation-origin=\"off\">Update the IDs in your application using the <code>npx localize-migrate</code> command.</p>\n\n<code-example format=\"shell\" language=\"shell\">\n\nnpx localize-migrate --files=*.xlf --mapFile=messages.json\n\n</code-example>\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\">你還可以在 <code>files</code> 引數中指定其它格式，比如 <code>*.xmb</code>。</p><p translation-origin=\"off\">You can also specify other formats in the <code>files</code> parameter, such as <code>*.xmb</code>.</p>\n\n</div>\n</li>\n<li>\n<p translation-result=\"on\">將更新後的檔案提交到你的原始碼管理系統。</p><p translation-origin=\"off\">Commit the updated files to your source control system.</p>\n\n</li>\n</ol>\n<p translation-result=\"on\">完成遷移後，將 Angular Compiler 選項 <code>enableI18nLegacyMessageIdFormat</code> 設定為 <code>false</code>。有關此選項的更多資訊，請參見<a href=\"guide/angular-compiler-options#enablei18nlegacymessageidformat\">Angular 編譯器選項</a>。</p><p translation-origin=\"off\">After you complete the migration, set the Angular Compiler option, <code>enableI18nLegacyMessageIdFormat</code>, to <code>false</code>.\nFor more information about this option, see <a href=\"guide/angular-compiler-options#enablei18nlegacymessageidformat\">Angular Compiler Options</a>.</p>\n\n<h2 id=\"migrate-legacy-ids-using-localize-extract\" translation-result=\"on\">用 <code>localize-extract</code> 遷移舊版 ID<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-legacy-message-id#migrate-legacy-ids-using-localize-extract\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Migrate legacy IDs using <code>localize-extract</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-legacy-message-id#migrate-legacy-ids-using-localize-extract\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">如果你未使用 Angular CLI，則可以使用 <code>localize-extract</code> 來遷移舊版本地化 ID：</p><p translation-origin=\"off\">If you are not using the Angular CLI, you can migrate legacy localization IDs using <code>localize-extract</code>:</p>\n\n<ol>\n<li>\n<p translation-result=\"on\">執行 <code>npx localize-extract</code> 命令。</p><p translation-origin=\"off\">Run the <code>npx localize-extract</code> command.</p>\n\n<code-example format=\"shell\" language=\"shell\">\n\nnpx localize-extract --format=legacy-migrate --source=./path/to/bundles/**/*.js --outputPath=./messages.json\n\n</code-example>\n<p translation-result=\"on\">在此命令中，<code>./path/to/bundles/</code> 表示你的可分發檔案的路徑。你可以將 <code>outputPath</code> 引數設定為系統中的任何目錄。</p><p translation-origin=\"off\">In this command, <code>./path/to/bundles/</code> represents the path to your distributable files.\nYou can set the <code>outputPath</code> parameter to any directory in your system.</p>\n\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\">一定不能翻譯這些可分發檔案（比如用 <code>localize-translate</code>），因為這樣做會剝離帶 <code><a href=\"api/localize/init/$localize\" class=\"code-anchor\">$localize</a></code> 標記的字串。</p><p translation-origin=\"off\">Your distributable files must not have been translated, such as by using <code>localize-translate</code>, as doing so strips the <code><a href=\"api/localize/init/$localize\" class=\"code-anchor\">$localize</a></code> tagged strings that the extractor requires.</p>\n\n</div>\n<p translation-result=\"on\">執行此命令後，你將擁有一個遷移檔案 <code>messages.json</code>，其中包含舊版本地化 ID 與新版 ID 之間的對映，可用於更新應用程式。</p><p translation-origin=\"off\">After running this command, you have a migration file, <code>messages.json</code>, containing a mapping between legacy localization IDs and new IDs that you can use to update your application.</p>\n\n</li>\n<li>\n<p translation-result=\"on\"><code>npx localize-migrate</code> 命令更新應用程式中的 ID。</p><p translation-origin=\"off\">Update the IDs in your application using the <code>npx localize-migrate</code> command.</p>\n\n<code-example format=\"shell\" language=\"shell\">\n\nnpx localize-migrate --files=*.xlf --mapFile=messages.json\n\n</code-example>\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\">你還可以在 <code>files</code> 引數中指定其它格式，比如 <code>*.xmb</code>。</p><p translation-origin=\"off\">You can also specify other formats in the <code>files</code> parameter, such as <code>*.xmb</code>.</p>\n\n</div>\n</li>\n</ol>\n<p translation-result=\"on\">完成遷移後，將 Angular Compiler 選項 <code>enableI18nLegacyMessageIdFormat</code> 設定為 <code>false</code>。有關此選項的更多資訊，請參見<a href=\"guide/angular-compiler-options#enablei18nlegacymessageidformat\">Angular 編譯器選項</a>。</p><p translation-origin=\"off\">After you complete the migration, set the Angular Compiler option, <code>enableI18nLegacyMessageIdFormat</code>, to <code>false</code>.\nFor more information about this option, see <a href=\"guide/angular-compiler-options#enablei18nlegacymessageidformat\">Angular Compiler Options</a>.</p>\n\n\n<!-- links -->\n<!-- external links -->\n<!-- end links -->\n\n  <div class=\"reviewed\">最後複查時間：2/28/2022</div>\n</div>\n\n\n<!-- links to this doc:\n-->\n<!-- links from this doc:\n - api/localize/init/$localize\n - guide/angular-compiler-options#enablei18nlegacymessageidformat\n - guide/migration-legacy-message-id#migrate-legacy-ids-using-localize-extract\n - guide/migration-legacy-message-id#migrating-legacy-ids-using-the-cli\n - guide/migration-legacy-message-id#migrating-legacy-localization-ids\n - guide/migration-legacy-message-id#what-this-migration-does\n - guide/migration-legacy-message-id#why-this-migration-is-necessary\n - guide/migration-legacy-message-id#為什麼需要進行遷移\n - guide/migration-legacy-message-id#使用-cli-遷移舊版-id\n - guide/migration-legacy-message-id#此遷移的作用\n - guide/migration-legacy-message-id#用-localize-extract-遷移舊版-id\n - guide/migration-legacy-message-id#遷移舊版本地化-id\n - https://github.com/ng-docs/angular-cn/edit/cn/aio/content/guide/migration-legacy-message-id.md?message=docs%3A%20請簡述你的修改...\n-->"}
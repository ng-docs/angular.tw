{"id":"guide/testing-code-coverage","title":"Find out how much code you're testing","contents":"\n\n\n<div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/edit/cn/aio/content/guide/testing-code-coverage.md?message=docs%3A%20請簡述你的修改...\" aria-label=\"提供編輯建議\" title=\"提供編輯建議\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n</div>\n\n\n<div class=\"content\">\n  <p><a id=\"code-coverage\"></a></p>\n<h1 id=\"find-out-how-much-code-youre-testing\" translation-result=\"on\">找出你要測試多少程式碼<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/testing-code-coverage#find-out-how-much-code-youre-testing\"><i class=\"material-icons\">link</i></a></h1><h1 translation-origin=\"off\">Find out how much code you're testing<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/testing-code-coverage#find-out-how-much-code-youre-testing\"><i class=\"material-icons\">link</i></a></h1>\n\n<p translation-result=\"on\">CLI 可以執行單元測試並建立程式碼覆蓋率報告。程式碼覆蓋率報告會向你展示程式碼庫中可能無法透過單元測試進行正確測試的任意部位。</p><p translation-origin=\"off\">The Angular CLI can run unit tests and create code coverage reports.\nCode coverage reports show you any parts of your code base that might not be properly tested by your unit tests.</p>\n\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\">如果你要試驗本指南中所講的應用，請<live-example name=\"testing\" nodownload=\"\">在瀏覽器中執行它</live-example>或<live-example name=\"testing\" downloadonly=\"\">下載並在本地執行它</live-example>。</p><p translation-origin=\"off\">If you'd like to experiment with the application that this guide describes, <live-example name=\"testing\" nodownload=\"\">run it in your browser</live-example> or <live-example name=\"testing\" downloadonly=\"\">download and run it locally</live-example>.</p>\n\n</div>\n<p translation-result=\"on\">要產生覆蓋率報告，請在專案的根目錄下執行以下命令。</p><p translation-origin=\"off\">To generate a coverage report run the following command in the root of your project.</p>\n\n<code-example format=\"shell\" language=\"shell\">\n\nng test --no-watch --code-coverage\n\n</code-example>\n<p translation-result=\"on\">測試完成後，該命令會在專案中建立一個 <code>/coverage</code> 目錄。開啟 <code>index.html</code> 檔案，可以檢視帶有原始碼和程式碼覆蓋率值的報表。</p><p translation-origin=\"off\">When the tests are complete, the command creates a new <code>/coverage</code> directory in the project.\nOpen the <code>index.html</code> file to see a report with your source code and code coverage values.</p>\n\n<p translation-result=\"on\">如果要在每次測試時都建立程式碼覆蓋率報告，可以在 CLI 配置檔案 <code>angular.json</code> 中設定以下選項：</p><p translation-origin=\"off\">If you want to create code-coverage reports every time you test, set the following option in the Angular CLI configuration file, <code>angular.json</code>:</p>\n\n<code-example format=\"json\" language=\"json\">\n\n\"test\": {\n  \"options\": {\n    \"codeCoverage\": true\n  }\n}\n\n</code-example>\n<h2 id=\"code-coverage-enforcement\" translation-result=\"on\">程式碼覆蓋的實施<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/testing-code-coverage#code-coverage-enforcement\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Code coverage enforcement<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/testing-code-coverage#code-coverage-enforcement\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">程式碼覆蓋率可以讓你估算出你的程式碼測試了多少。如果你的團隊確定要設定單元測試的最小覆蓋率，可以使用 Angular CLI 來強制實施這個最低要求。</p><p translation-origin=\"off\">The code coverage percentages let you estimate how much of your code is tested.\nIf your team decides on a set minimum amount to be unit tested, enforce this minimum with the Angular CLI.</p>\n\n<p translation-result=\"on\">比如，假設你希望程式碼庫的程式碼覆蓋率至少達到 80％。要啟用此功能，請開啟 <a href=\"https://karma-runner.github.io\">Karma</a> 測試平台的配置檔案 <code>karma.conf.js</code>，並在 <code>coverageReporter:</code> 鍵下新增 <code>check</code> 屬性。</p><p translation-origin=\"off\">For example, suppose you want the code base to have a minimum of 80% code coverage.\nTo enable this, open the <a href=\"https://karma-runner.github.io\">Karma</a> test platform configuration file, <code>karma.conf.js</code>, and add the <code>check</code> property in the <code>coverageReporter:</code> key.</p>\n\n<code-example format=\"javascript\" language=\"javascript\">\n\ncoverageReporter: {\n  dir: require('path').join(__dirname, './coverage/&lt;project-name&gt;'),\n  subdir: '.',\n  reporters: [\n    { type: 'html' },\n    { type: 'text-summary' }\n  ],\n  check: {\n    <a href=\"api/core/global\" class=\"code-anchor\">global</a>: {\n      statements: 80,\n      branches: 80,\n      functions: 80,\n      lines: 80\n    }\n  }\n}\n\n</code-example>\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\">在<a href=\"guide/testing#configuration\">測試指南</a>中可以瞭解更多關於建立和微調 Karma 配置的內容。</p><p translation-origin=\"off\">Read more about creating and fine tunning Karma configuration in the <a href=\"guide/testing#configuration\">testing guide</a>.</p>\n\n</div>\n<p translation-result=\"on\"><code>check</code> 屬性會讓該工具在專案中執行單元測試時強制要求至少 80％的程式碼覆蓋率。</p><p translation-origin=\"off\">The <code>check</code> property causes the tool to enforce a minimum of 80% code coverage when the unit tests are run in the project.</p>\n\n<p translation-result=\"on\">在 <a href=\"https://github.com/karma-runner/karma-coverage/blob/master/docs/configuration.md\">Karma 覆蓋率文件</a>中閱讀有關覆蓋配置選項的更多資訊。</p><p translation-origin=\"off\">Read more on coverage configuration options in the <a href=\"https://github.com/karma-runner/karma-coverage/blob/master/docs/configuration.md\">karma coverage documentation</a>.</p>\n\n<!-- links -->\n<!-- external links -->\n<!-- end links -->\n\n  <div class=\"reviewed\">最後複查時間：1/17/2023</div>\n</div>\n\n\n<!-- links to this doc:\n - guide/testing\n-->\n<!-- links from this doc:\n - api/core/global\n - guide/testing#configuration\n - guide/testing-code-coverage#code-coverage-enforcement\n - guide/testing-code-coverage#find-out-how-much-code-youre-testing\n - guide/testing-code-coverage#程式碼覆蓋的實施\n - guide/testing-code-coverage#找出你要測試多少程式碼\n - https://github.com/karma-runner/karma-coverage/blob/master/docs/configuration.md\n - https://github.com/ng-docs/angular-cn/edit/cn/aio/content/guide/testing-code-coverage.md?message=docs%3A%20請簡述你的修改...\n - https://karma-runner.github.io\n-->"}
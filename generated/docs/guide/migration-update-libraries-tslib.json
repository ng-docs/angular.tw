{"id":"guide/migration-update-libraries-tslib","title":"tslib direct dependency migration","contents":"\n\n\n<div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/edit/cn/aio/content/guide/migration-update-libraries-tslib.md?message=docs%3A%20請簡述你的修改...\" aria-label=\"提供編輯建議\" title=\"提供編輯建議\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n</div>\n\n\n<div class=\"content\">\n  <h1 id=\"tslib-direct-dependency-migration\" translation-result=\"on\"><code>tslib</code> 直接依賴項遷移<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-update-libraries-tslib#tslib-direct-dependency-migration\"><i class=\"material-icons\">link</i></a></h1><h1 translation-origin=\"off\"><code>tslib</code> direct dependency migration<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-update-libraries-tslib#tslib-direct-dependency-migration\"><i class=\"material-icons\">link</i></a></h1>\n\n<h2 id=\"what-does-this-migration-do\" translation-result=\"on\">這種遷移是做什麼的？<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-update-libraries-tslib#what-does-this-migration-do\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">What does this migration do?<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-update-libraries-tslib#what-does-this-migration-do\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">如果你的工作區中有任何庫，此遷移會將它們對 <code>tslib</code> 的平級依賴轉換為直接依賴。TypeScript 使用 <code>tslib</code> 包來提供 TypeScript 編譯後代碼中使用的常用輔助函式。<code>tslib</code> 版本也更新為 <code>2.0.0</code> 以支援 TypeScript 3.9。</p><p translation-origin=\"off\">If you have any libraries within your workspace, this migration will convert <code>tslib</code> peer dependencies to direct dependencies for the libraries.\nTypeScript uses the <code>tslib</code> package to provide common helper functions used in compiled TypeScript code.\nThe <code>tslib</code> version is also updated to <code>2.0.0</code> to support TypeScript 3.9.</p>\n\n<p translation-result=\"on\">之前：</p><p translation-origin=\"off\">Before:</p>\n\n<code-example format=\"json\" language=\"json\">\n\n{\n  \"name\": \"my-lib\",\n  \"version\": \"0.0.1\",\n  \"peerDependencies\": {\n    \"@angular/common\": \"^9.0.0\",\n    \"@angular/core\": \"^9.0.0\",\n    \"tslib\": \"^1.12.0\"\n  }\n}\n\n</code-example>\n<p translation-result=\"on\">之後：</p><p translation-origin=\"off\">After:</p>\n\n<code-example format=\"json\" language=\"json\">\n\n{\n  \"name\": \"my-lib\",\n  \"version\": \"0.0.1\",\n  \"peerDependencies\": {\n    \"@angular/common\": \"^9.0.0\",\n    \"@angular/core\": \"^9.0.0\"\n  },\n  \"dependencies\": {\n    \"tslib\": \"^2.0.0\"\n  }\n}\n\n</code-example>\n<h2 id=\"why-is-this-migration-necessary\" translation-result=\"on\">為何這次遷移必不可少？<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-update-libraries-tslib#why-is-this-migration-necessary\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Why is this migration necessary?<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-update-libraries-tslib#why-is-this-migration-necessary\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\"><a href=\"https://github.com/Microsoft/tslib\"><code>tslib</code></a> 是 Typescript 的執行時庫。該函式庫的版本繫結到了用於編譯庫的 TypeScript 編譯器的版本。平級依賴不能準確表達此執行時庫與編譯器之間的這種關係。如果 <code>tslib</code> 仍然宣告為庫對等依賴項，則某些 Angular 工作區可能會出現工作區無法滿足 <code>tslib</code> 平級依賴項要求的狀態，從而導致建構期或執行期錯誤。</p><p translation-origin=\"off\">The <a href=\"https://github.com/Microsoft/tslib\"><code>tslib</code></a> is a runtime library for Typescript.\nThe version of this library is bound to the version of the TypeScript compiler used to compile a library.\nPeer dependencies do not accurately represent this relationship between the runtime and the compiler.\nIf <code>tslib</code> remained declared as a library peer dependency, it would be possible for some Angular workspaces to get into a state where the workspace could not satisfy <code>tslib</code> peer dependency requirements for multiple libraries, resulting in build-time or run-time errors.</p>\n\n<p translation-result=\"on\">從 TypeScript 3.9（由 Angular v10 使用）開始，需要 <code>tslib</code> 版本 2.x 來建構新的應用程式。但是，使用以前的 TypeScript 版本建構並已釋出到 npm 的較早的函式庫可能需要 <code>tslib</code>。這種遷移使依賴於 <code>tslib</code> 執行時庫的某個不相容版本的程式碼可以保持互操作性。</p><p translation-origin=\"off\">As of TypeScript 3.9 (used by Angular v10), <code>tslib</code> version of 2.x is required to build new applications.\nHowever, older libraries built with previous version of TypeScript and already published to npm might need <code>tslib</code> 1.x.\nThis migration makes it possible for code depending on incompatible versions of the <code>tslib</code> runtime library to remain interoperable.</p>\n\n<h2 id=\"do-i-still-need-tslib-as-a-dependency-in-my-workspace-packagejson\" translation-result=\"on\">我是否仍需要 <code>tslib</code> 作為我的工作區 <code>package.json</code> 的依賴項？<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-update-libraries-tslib#do-i-still-need-tslib-as-a-dependency-in-my-workspace-packagejson\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Do I still need <code>tslib</code> as a dependency in my workspace <code>package.json</code>?<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration-update-libraries-tslib#do-i-still-need-tslib-as-a-dependency-in-my-workspace-packagejson\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">是。<code>package.json</code> 檔案中宣告的 <code>tslib</code> 依賴用於在此工作區內建構應用程式，以及對工作區中的函式庫進行執行單元測試，這是必要的。</p><p translation-origin=\"off\">Yes.\nThe <code>tslib</code> dependency declared in the <code>package.json</code> file of the workspace is used to build applications within this workspace, as well as run unit tests for workspace libraries, and is required.</p>\n\n<!-- links -->\n<!-- external links -->\n<!-- end links -->\n\n  <div class=\"reviewed\">最後複查時間：2/28/2022</div>\n</div>\n\n\n<!-- links to this doc:\n-->\n<!-- links from this doc:\n - guide/migration-update-libraries-tslib#do-i-still-need-tslib-as-a-dependency-in-my-workspace-packagejson\n - guide/migration-update-libraries-tslib#tslib-direct-dependency-migration\n - guide/migration-update-libraries-tslib#tslib-直接依賴項遷移\n - guide/migration-update-libraries-tslib#what-does-this-migration-do\n - guide/migration-update-libraries-tslib#why-is-this-migration-necessary\n - guide/migration-update-libraries-tslib#為何這次遷移必不可少\n - guide/migration-update-libraries-tslib#我是否仍需要-tslib-作為我的工作區-packagejson-的依賴項\n - guide/migration-update-libraries-tslib#這種遷移是做什麼的\n - https://github.com/Microsoft/tslib\n - https://github.com/ng-docs/angular-cn/edit/cn/aio/content/guide/migration-update-libraries-tslib.md?message=docs%3A%20請簡述你的修改...\n-->"}